(self.webpackChunkvoronoi_shopping=self.webpackChunkvoronoi_shopping||[]).push([[865],{1223:function(t,n,e){var r=e(5112),i=e(30),a=e(3070).f,o=r("unscopables"),u=Array.prototype;null==u[o]&&a(u,o,{configurable:!0,value:i(null)}),t.exports=function(t){u[o][t]=!0}},7475:function(t,n,e){var r=e(3157),i=e(4411),a=e(111),o=e(5112)("species"),u=Array;t.exports=function(t){var n;return r(t)&&(n=t.constructor,(i(n)&&(n===u||r(n.prototype))||a(n)&&null===(n=n[o]))&&(n=void 0)),void 0===n?u:n}},5417:function(t,n,e){var r=e(7475);t.exports=function(t,n){return new(r(t))(0===n?0:n)}},7207:function(t){var n=TypeError;t.exports=function(t){if(t>9007199254740991)throw n("Maximum allowed index exceeded");return t}},6790:function(t,n,e){"use strict";var r=e(3157),i=e(6244),a=e(7207),o=e(9974),u=function(t,n,e,s,l,h,c,f){for(var d,v,p=l,g=0,y=!!c&&o(c,f);g<s;)g in e&&(d=y?y(e[g],g,n):e[g],h>0&&r(d)?(v=i(d),p=u(t,n,d,v,p,h-1)-1):(a(p+1),t[p]=d),p++),g++;return p};t.exports=u},3157:function(t,n,e){var r=e(4326);t.exports=Array.isArray||function(t){return"Array"==r(t)}},4944:function(t,n,e){"use strict";var r=e(2109),i=e(6790),a=e(7908),o=e(6244),u=e(9303),s=e(5417);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=a(this),e=o(n),r=s(n,0);return r.length=i(r,n,n,e,0,void 0===t?1:u(t)),r}})},3792:function(t,n,e){e(1223)("flat")},5438:function(t,n,e){var r=e(2109),i=Math.hypot,a=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,arity:2,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(t,n){for(var e,r,i=0,u=0,s=arguments.length,l=0;u<s;)l<(e=a(arguments[u++]))?(i=i*(r=l/e)*r+1,l=e):i+=e>0?(r=e/l)*r:e;return l===1/0?1/0:l*o(i)}})},9247:function(t,n,e){"use strict";e.d(n,{m:function(){return r}});var r=function(t){var n,e;return null==t||null===(n=t.localFile)||void 0===n||null===(e=n.childImageSharp)||void 0===e?void 0:e.gatsbyImageData}},2865:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return Zn}});var r=e(9439),i=e(7294),a=function(t){var n=i.useRef(t);return i.useEffect((function(){n.current=t})),n},o=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=a(t),o=i.useRef(),u=[n,e,r];function s(){o.current&&clearTimeout(o.current),o.current=void 0}function l(){o.current=void 0}return i.useEffect((function(){return s}),u),i.useCallback((function(){var t=arguments,i=o.current;if(void 0===i&&e)return o.current=setTimeout(l,n),r.current.apply(null,t);i&&clearTimeout(i),o.current=setTimeout((function(){o.current=void 0,r.current.apply(null,t)}),n)}),u)},u=function(t,n,e){var r=i.useState(t);return[r[0],o(r[1],n,e)]};var s=function(t,n,e,r){var a=i.useRef(e),o=i.useRef(r);i.useEffect((function(){a.current=e,o.current=r})),i.useEffect((function(){var e=t&&"current"in t?t.current:t;if(e){var r=0;e.addEventListener(n,u);var i=o.current;return function(){r=1,e.removeEventListener(n,u),i&&i()}}function u(){if(!r){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];a.current.apply(this,n)}}}),[t,n])},l={},h="undefined"==typeof window?null:window,c=function(){return[document.documentElement.clientWidth,document.documentElement.clientHeight]},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=t.wait,e=t.leading,i=t.initialWidth,a=void 0===i?0:i,o=t.initialHeight,f=void 0===o?0:o,d=u("undefined"==typeof document?[a,f]:c,n,e),v=(0,r.Z)(d,2),p=v[0],g=v[1],y=function(){return g(c)};return s(h,"resize",y),s(h,"orientationchange",y),p},d=e(6659),v=(e(4944),e(3792),function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var a;if(null!=r)a=r,r=null;else do{r=2*n()-1,a=2*n()-1,i=r*r+a*a}while(!i||i>1);return t+e*a*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(Math.random)),p=function(t){var n=t.minItems,e=t.width,r=t.minHeight,a=t.relMargin,o=t.minTilePixels,u=t.colJitter,s=void 0===u?0:u,l=(0,i.useMemo)((function(){try{if(e&&r){var t=o&&e*r/n<o?n*o/e:r,i=Math.sqrt(n),u=e&&t&&Math.min(e/t,1.5),l={x:u>1?u:1,y:u<1?1/u:1},h=u?i*l.x:i,c=u?i*l.y:i,f=Math.ceil(c),d=Math.ceil(h),p=d*d-n>=d?d-1:d,g=f-Math.floor((f*p-n)/p),y=Math.max(t*a.top,30),m=Math.max(t*a.bottom,30),_=Math.max(e*a.right,60),x=Math.max(e*a.left,60),w=function(t,n){return t*v(0,n)()},b=n%p,k=1===b?1:0,A=function(n){return t*(n%2)?.02*t:-.02*t},S=(E=b>0&&k===b?g-1:g,T=(t-(y+m))/Math.max(E-1,1),{positions:Array.from({length:E},(function(t,n){return y+T*n})),interval:T}),M=Array.from({length:g}).map((function(t,n){var r,i,a,o,u,l=1===n,h=n===g-1;return function(t,n,e){var r=t.positions,i=t.interval,a=n.positions;return Array.from({length:r.length}).map((function(t,n){return[r[n]+w(i,s),a[e]+A(n)]}))}((r=!b||!(h||l)?p:l?k?p+k:p:h?k?b-k:b:p,i=(e-(x+_))/Math.max(r-1,1),a=Math.max(p-r,0),o=a?i*a*.5/p:0,u=a?i*r/p:i,{positions:Array.from({length:r},(function(t,n){return x+o+u*n})),interval:i}),S,n)})).flat();return{grid:M,numCols:p,numRows:g,height:t,width:e}}}catch(C){return void console.error(C)}var E,T}),[e,r,n,o,a.top,a.bottom,a.right,a.left,s]),h=(0,i.useCallback)((function(t){return function(n){return t.grid[n]}}),[]);return{getGridCoordinates:l?h(l):void 0,gridSpecs:l}},g=e(3422),y=e(7059),m=e(9247),_=e(1380),x=e(3366),w=e(4942);function b(){}function k(t){return null==t?b:function(){return this.querySelector(t)}}function A(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function S(){return[]}function M(t){return function(n){return n.matches(t)}}var E=Array.prototype.find;function T(){return this.firstElementChild}var C=Array.prototype.filter;function I(){return Array.from(this.children)}function P(t){return new Array(t.length)}function j(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function N(t){return function(){return t}}function H(t,n,e,r,i,a){for(var o,u=0,s=n.length,l=a.length;u<l;++u)(o=n[u])?(o.__data__=a[u],r[u]=o):e[u]=new j(t,a[u]);for(;u<s;++u)(o=n[u])&&(i[u]=o)}function L(t,n,e,r,i,a,o){var u,s,l,h=new Map,c=n.length,f=a.length,d=new Array(c);for(u=0;u<c;++u)(s=n[u])&&(d[u]=l=o.call(s,s.__data__,u,n)+"",h.has(l)?i[u]=s:h.set(l,s));for(u=0;u<f;++u)l=o.call(t,a[u],u,a)+"",(s=h.get(l))?(r[u]=s,s.__data__=a[u],h.delete(l)):e[u]=new j(t,a[u]);for(u=0;u<c;++u)(s=n[u])&&h.get(d[u])===s&&(i[u]=s)}function U(t){return t.__data__}function Z(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function z(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function O(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return B(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return B(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function B(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}j.prototype={constructor:j,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var F="http://www.w3.org/1999/xhtml",D={svg:"http://www.w3.org/2000/svg",xhtml:F,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),D.hasOwnProperty(n)?{space:D[n],local:t}:t}function R(t){return function(){this.removeAttribute(t)}}function K(t){return function(){this.removeAttributeNS(t.space,t.local)}}function G(t,n){return function(){this.setAttribute(t,n)}}function V(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function W(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function $(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function J(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function X(t){return function(){this.style.removeProperty(t)}}function Q(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Y(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function tt(t,n){return t.style.getPropertyValue(n)||J(t).getComputedStyle(t,null).getPropertyValue(n)}function nt(t){return function(){delete this[t]}}function et(t,n){return function(){this[t]=n}}function rt(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function it(t){return t.trim().split(/^|\s+/)}function at(t){return t.classList||new ot(t)}function ot(t){this._node=t,this._names=it(t.getAttribute("class")||"")}function ut(t,n){for(var e=at(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function st(t,n){for(var e=at(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function lt(t){return function(){ut(this,t)}}function ht(t){return function(){st(this,t)}}function ct(t,n){return function(){(n.apply(this,arguments)?ut:st)(this,t)}}function ft(){this.textContent=""}function dt(t){return function(){this.textContent=t}}function vt(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function pt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function yt(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function mt(){this.nextSibling&&this.parentNode.appendChild(this)}function _t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===F&&n.documentElement.namespaceURI===F?n.createElement(t):n.createElementNS(e,t)}}function wt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bt(t){var n=q(t);return(n.local?wt:xt)(n)}function kt(){return null}function At(){var t=this.parentNode;t&&t.removeChild(this)}function St(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Mt(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Et(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Tt(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,a=n.length;r<a;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function Ct(t,n,e){return function(){var r,i=this.__on,a=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var o=0,u=i.length;o<u;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=e),void(r.value=n);this.addEventListener(t.type,a,e),r={type:t.type,name:t.name,value:n,listener:a,options:e},i?i.push(r):this.__on=[r]}}function It(t,n,e){var r=J(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function Pt(t,n){return function(){return It(this,t,n)}}function jt(t,n){return function(){return It(this,t,n.apply(this,arguments))}}ot.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Nt=e(4687),Ht=e.n(Nt),Lt=Ht().mark(Ut);function Ut(){var t,n,e,r,i,a,o;return Ht().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:t=this._groups,n=0,e=t.length;case 1:if(!(n<e)){u.next=13;break}r=t[n],i=0,a=r.length;case 3:if(!(i<a)){u.next=10;break}if(!(o=r[i])){u.next=7;break}return u.next=7,o;case 7:++i,u.next=3;break;case 10:++n,u.next=1;break;case 13:case"end":return u.stop()}}),Lt,this)}var Zt=[null];function zt(t,n){this._groups=t,this._parents=n}function Ot(){return new zt([[document.documentElement]],Zt)}zt.prototype=Ot.prototype=(0,w.Z)({constructor:zt,select:function(t){"function"!=typeof t&&(t=k(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o,u=n[i],s=u.length,l=r[i]=new Array(s),h=0;h<s;++h)(a=u[h])&&(o=t.call(a,a.__data__,h,u))&&("__data__"in a&&(o.__data__=a.__data__),l[h]=o);return new zt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return A(t.apply(this,arguments))}}(t):function(t){return null==t?S:function(){return this.querySelectorAll(t)}}(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var o,u=n[a],s=u.length,l=0;l<s;++l)(o=u[l])&&(r.push(t.call(o,o.__data__,l,u)),i.push(o));return new zt(r,i)},selectChild:function(t){return this.select(null==t?T:function(t){return function(){return E.call(this.children,t)}}("function"==typeof t?t:M(t)))},selectChildren:function(t){return this.selectAll(null==t?I:function(t){return function(){return C.call(this.children,t)}}("function"==typeof t?t:M(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a,o=n[i],u=o.length,s=r[i]=[],l=0;l<u;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&s.push(a);return new zt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,U);var e=n?L:H,r=this._parents,i=this._groups;"function"!=typeof t&&(t=N(t));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var h=r[l],c=i[l],f=c.length,d=Z(t.call(h,h&&h.__data__,l,r)),v=d.length,p=u[l]=new Array(v),g=o[l]=new Array(v),y=s[l]=new Array(f);e(h,c,p,g,y,d,n);for(var m,_,x=0,w=0;x<v;++x)if(m=p[x]){for(x>=w&&(w=x+1);!(_=g[w])&&++w<v;);m._next=_||null}}return(o=new zt(o,r))._enter=u,o._exit=s,o},enter:function(){return new zt(this._enter||this._groups.map(P),this._parents)},exit:function(){return new zt(this._exit||this._groups.map(P),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?a.remove():e(a),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l,h=e[s],c=r[s],f=h.length,d=u[s]=new Array(f),v=0;v<f;++v)(l=h[v]||c[v])&&(d[v]=l);for(;s<i;++s)u[s]=e[s];return new zt(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=z);for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var o,u=e[a],s=u.length,l=i[a]=new Array(s),h=0;h<s;++h)(o=u[h])&&(l[h]=o);l.sort(n)}return new zt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t,n=0,e=O(this);try{for(e.s();!(t=e.n()).done;){t.value;++n}}catch(r){e.e(r)}finally{e.f()}return n},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,a=n[e],o=0,u=a.length;o<u;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,n){var e=q(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?K:R:"function"==typeof n?e.local?$:W:e.local?V:G)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?X:"function"==typeof n?Y:Q)(t,n,null==e?"":e)):tt(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?nt:"function"==typeof n?rt:et)(t,n)):this.node()[t]},classed:function(t,n){var e=it(t+"");if(arguments.length<2){for(var r=at(this.node()),i=-1,a=e.length;++i<a;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?ct:n?lt:ht)(e,n))},text:function(t){return arguments.length?this.each(null==t?ft:("function"==typeof t?vt:dt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?yt:gt)(t)):this.node().innerHTML},raise:function(){return this.each(mt)},lower:function(){return this.each(_t)},append:function(t){var n="function"==typeof t?t:bt(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:bt(t),r=null==n?kt:"function"==typeof n?n:k(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(At)},clone:function(t){return this.select(t?Mt:St)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,a=Et(t+""),o=a.length;if(!(arguments.length<2)){for(u=n?Ct:Tt,r=0;r<o;++r)this.each(u(a[r],n,e));return this}var u=this.node().__on;if(u)for(var s,l=0,h=u.length;l<h;++l)for(r=0,s=u[l];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?jt:Pt)(t,n))}},Symbol.iterator,Ut);function Bt(t){return"string"==typeof t?new zt([[document.querySelector(t)]],[document.documentElement]):new zt([[t]],Zt)}var Ft=-22;function Dt(t,n,e){t.style("transform-origin",(function(t){return t.x+"px "+t.y+"px"}));var r=t.select(".base");r.select(".image-fo").attr("x",(function(t){return t.x-n/2})).attr("y",(function(t){return t.y-n/2})).attr("width",n).attr("height",n),r.select(".cell-gap").attr("d",(function(t){return t.path})),r.select(".pattern").attr("d",(function(t){return t.path})),r.select(".highlight-pattern").attr("d",(function(t){return t.path})),r.select(".cell-border").attr("d",(function(t){return t.path}));var i=t.select(".annotation");return i.select("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("y",(function(t){return t.y})),i.each((function(t){!function(t,n,e){Bt(n).select(".label").attr("x",(function(){var n=t.title.length/2*7+22,r=n,i=e-n;return Math.min(Math.max(t.x,r),i)})).attr("y",t.y)}(t,this,e),function(t,n){var e,r,i=null===(e=Bt(n).select(".label"))||void 0===e||null===(r=e.node())||void 0===r?void 0:r.getBBox();if(i){var a=i.x-9,o=i.width+18,u=i.height+10;Bt(n).select(".label-box").attr("rx",2).attr("x",a).attr("y",t.y+Ft-u/2).attr("width",o).attr("height",u)}}(t,this)})),t}function qt(t){var n=t.svg,e=t.data,r=t.options,i=t.voronoi,a=t.onHover,o=t.onClick,u=t.onMouseLeave;n.select("defs").selectAll("clipPath").data(e,(function(t){return String(t.id)})).join((function(t){var n=t.append("g").each((function(t){Bt(this).classed("defs-cell",!0)}));return n.append("clipPath").attr("id",(function(t){return"clip-"+t.id})).attr("fill","white").append("path").classed("defs-path",!0).attr("d",(function(t){return t.path})),n}),(function(t){return t.select("clipPath path").attr("d",(function(t){return t.path}))})),function(t,n,e){t.selectAll(".cell").data(n).join((function(t){return function(t,n){var e=t.append("g").each((function(t){Bt(this).classed("cell id-"+t.id,!0)})).style("transform-origin",(function(t){return t.x+"px "+t.y+"px"})),r=e.append("g").classed("base",!0).attr("clip-path",(function(t){return"url(#clip-"+t.id+")"}));r.append("foreignObject").classed("image-fo",!0).attr("x",(function(t){return t.x-n/2})).attr("y",(function(t){return t.y-n/2})).attr("width",n).attr("height",n).append("xhtml:img").classed("image",!0).attr("xmlns","http://www.w3.org/1999/xhtml").attr("src",(function(t){return t.imgSrc||""})),r.append("path").attr("d",(function(t){return t.path})).classed("pattern",!0).attr("fill","url(#diagonalHatch)"),r.append("path").attr("d",(function(t){return t.path})).classed("highlight-pattern",!0),r.append("path").attr("d",(function(t){return t.path})).classed("cell-gap",!0),r.append("path").attr("d",(function(t){return t.path})).classed("cell-border",!0);var i=e.append("g").classed("annotation",!0);return i.append("circle").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",3).attr("tabindex",-1).classed("focus-dot",!0),i.append("rect").classed("label-box",!0).attr("tabindex",(function(t){return 10+t.index})),i.append("text").attr("dy",Ft||null).text((function(t){return t.title||""})).classed("label",!0),i.append("text").attr("dy",-1*Ft||null).text((function(t){return t.price||""})).classed("price",!0),e}(t,e.imageSize)}),(function(t){return Dt(t,e.imageSize,e.width)}))}(n,e,r),n.selectAll(".bounds").data([i.renderBounds()]).join("path").attr("d",(function(t){return t})).classed("bounds",!0),n.selectAll(".hover-cell").data(e,(function(t){return String(t.id)})).join((function(t){var n=t.append("g").each((function(t){Bt(this).classed("hover-cell",!0)}));return n.append("path").attr("d",(function(t){return t.path})).attr("fill","transparent").classed("hover-border",!0),n}),(function(t){return t.select(".hover-border").attr("d",(function(t){return t.path})),t})),n.on("keyup",(function(t){if("Space"===t.code){var n,e=Bt(document.activeElement),r=null==e||null===(n=e.datum())||void 0===n?void 0:n.slug;r&&o(r)}})),n.selectAll(".hover-border").on("mouseenter",(function(t,e){n.selectAll(".cell.exposed").empty()&&!n.node().contains(document.activeElement)&&a(e.slug)})),n.selectAll(".label-box").on("focus",(function(t){var e=Bt(t.target).datum();n.selectAll(".exposed").empty()?a(e.slug):o(e.slug)})),n.selectAll(".hover-cell").on("click",(function(t,n){t.stopPropagation();var e=Bt(this).classed("exposed");n.slug&&!e&&o(n.slug)})),n.on("mouseleave",u)}var Rt=function(t){return function(){var n=Bt(t);n.classed("expose-view")||n.selectAll(".cell").classed("hover-selected exposed",!1)}},Kt=function(t){return function(n){Bt(t).selectAll(".cell").classed("hover-selected",(function(t){return t.slug===n}))}},Gt=e(5671),Vt=e(3144),Wt=(e(5438),134217729);function $t(t,n,e,r,i){var a,o,u,s,l=n[0],h=r[0],c=0,f=0;h>l==h>-l?(a=l,l=n[++c]):(a=h,h=r[++f]);var d=0;if(c<t&&f<e)for(h>l==h>-l?(u=a-((o=l+a)-l),l=n[++c]):(u=a-((o=h+a)-h),h=r[++f]),a=o,0!==u&&(i[d++]=u);c<t&&f<e;)h>l==h>-l?(u=a-((o=a+l)-(s=o-a))+(l-s),l=n[++c]):(u=a-((o=a+h)-(s=o-a))+(h-s),h=r[++f]),a=o,0!==u&&(i[d++]=u);for(;c<t;)u=a-((o=a+l)-(s=o-a))+(l-s),l=n[++c],a=o,0!==u&&(i[d++]=u);for(;f<e;)u=a-((o=a+h)-(s=o-a))+(h-s),h=r[++f],a=o,0!==u&&(i[d++]=u);return 0===a&&0!==d||(i[d++]=a),d}function Jt(t){return new Float64Array(t)}var Xt=Jt(4),Qt=Jt(8),Yt=Jt(12),tn=Jt(16),nn=Jt(4);function en(t,n,e,r,i,a){var o=(n-a)*(e-i),u=(t-i)*(r-a),s=o-u;if(0===o||0===u||o>0!=u>0)return s;var l=Math.abs(o+u);return Math.abs(s)>=33306690738754716e-32*l?s:-function(t,n,e,r,i,a,o){var u,s,l,h,c,f,d,v,p,g,y,m,_,x,w,b,k,A,S=t-i,M=e-i,E=n-a,T=r-a;c=(w=(v=S-(d=(f=Wt*S)-(f-S)))*(g=T-(p=(f=Wt*T)-(f-T)))-((x=S*T)-d*p-v*p-d*g))-(y=w-(k=(v=E-(d=(f=Wt*E)-(f-E)))*(g=M-(p=(f=Wt*M)-(f-M)))-((b=E*M)-d*p-v*p-d*g))),Xt[0]=w-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-b),Xt[1]=_-(y+c)+(c-b),c=(A=m+y)-m,Xt[2]=m-(A-c)+(y-c),Xt[3]=A;var C=function(t,n){for(var e=n[0],r=1;r<t;r++)e+=n[r];return e}(4,Xt),I=22204460492503146e-32*o;if(C>=I||-C>=I)return C;if(u=t-(S+(c=t-S))+(c-i),l=e-(M+(c=e-M))+(c-i),s=n-(E+(c=n-E))+(c-a),h=r-(T+(c=r-T))+(c-a),0===u&&0===s&&0===l&&0===h)return C;if(I=11093356479670487e-47*o+33306690738754706e-32*Math.abs(C),(C+=S*h+T*u-(E*l+M*s))>=I||-C>=I)return C;c=(w=(v=u-(d=(f=Wt*u)-(f-u)))*(g=T-(p=(f=Wt*T)-(f-T)))-((x=u*T)-d*p-v*p-d*g))-(y=w-(k=(v=s-(d=(f=Wt*s)-(f-s)))*(g=M-(p=(f=Wt*M)-(f-M)))-((b=s*M)-d*p-v*p-d*g))),nn[0]=w-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-b),nn[1]=_-(y+c)+(c-b),c=(A=m+y)-m,nn[2]=m-(A-c)+(y-c),nn[3]=A;var P=$t(4,Xt,4,nn,Qt);c=(w=(v=S-(d=(f=Wt*S)-(f-S)))*(g=h-(p=(f=Wt*h)-(f-h)))-((x=S*h)-d*p-v*p-d*g))-(y=w-(k=(v=E-(d=(f=Wt*E)-(f-E)))*(g=l-(p=(f=Wt*l)-(f-l)))-((b=E*l)-d*p-v*p-d*g))),nn[0]=w-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-b),nn[1]=_-(y+c)+(c-b),c=(A=m+y)-m,nn[2]=m-(A-c)+(y-c),nn[3]=A;var j=$t(P,Qt,4,nn,Yt);c=(w=(v=u-(d=(f=Wt*u)-(f-u)))*(g=h-(p=(f=Wt*h)-(f-h)))-((x=u*h)-d*p-v*p-d*g))-(y=w-(k=(v=s-(d=(f=Wt*s)-(f-s)))*(g=l-(p=(f=Wt*l)-(f-l)))-((b=s*l)-d*p-v*p-d*g))),nn[0]=w-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-b),nn[1]=_-(y+c)+(c-b),c=(A=m+y)-m,nn[2]=m-(A-c)+(y-c),nn[3]=A;var N=$t(j,Yt,4,nn,tn);return tn[N-1]}(t,n,e,r,i,a,l)}Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(8),Jt(8),Jt(8),Jt(4),Jt(8),Jt(8),Jt(8),Jt(12),Jt(192),Jt(192);Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(8),Jt(8),Jt(8),Jt(8),Jt(8),Jt(8),Jt(8),Jt(8),Jt(8),Jt(4),Jt(4),Jt(4),Jt(8),Jt(16),Jt(16),Jt(16),Jt(32),Jt(32),Jt(48),Jt(64),Jt(1152),Jt(1152);Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(4),Jt(24),Jt(24),Jt(24),Jt(24),Jt(24),Jt(24),Jt(24),Jt(24),Jt(24),Jt(24),Jt(1152),Jt(1152),Jt(1152),Jt(1152),Jt(1152),Jt(2304),Jt(2304),Jt(3456),Jt(5760),Jt(8),Jt(8),Jt(8),Jt(16),Jt(24),Jt(48),Jt(48),Jt(96),Jt(192),Jt(384),Jt(384),Jt(384),Jt(768);Jt(96),Jt(96),Jt(96),Jt(1152);var rn=Math.pow(2,-52),an=new Uint32Array(512),on=function(){function t(n){(0,Gt.Z)(this,t);var e=n.length>>1;if(e>0&&"number"!=typeof n[0])throw new Error("Expected coords to contain numbers.");this.coords=n;var r=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}return(0,Vt.Z)(t,[{key:"update",value:function(){for(var t=this.coords,n=this._hullPrev,e=this._hullNext,r=this._hullTri,i=this._hullHash,a=t.length>>1,o=1/0,u=1/0,s=-1/0,l=-1/0,h=0;h<a;h++){var c=t[2*h],f=t[2*h+1];c<o&&(o=c),f<u&&(u=f),c>s&&(s=c),f>l&&(l=f),this._ids[h]=h}for(var d,v,p,g=(o+s)/2,y=(u+l)/2,m=1/0,_=0;_<a;_++){var x=un(g,y,t[2*_],t[2*_+1]);x<m&&(d=_,m=x)}var w=t[2*d],b=t[2*d+1];m=1/0;for(var k=0;k<a;k++)if(k!==d){var A=un(w,b,t[2*k],t[2*k+1]);A<m&&A>0&&(v=k,m=A)}for(var S=t[2*v],M=t[2*v+1],E=1/0,T=0;T<a;T++)if(T!==d&&T!==v){var C=sn(w,b,S,M,t[2*T],t[2*T+1]);C<E&&(p=T,E=C)}var I=t[2*p],P=t[2*p+1];if(E===1/0){for(var j=0;j<a;j++)this._dists[j]=t[2*j]-t[0]||t[2*j+1]-t[1];ln(this._ids,this._dists,0,a-1);for(var N=new Uint32Array(a),H=0,L=0,U=-1/0;L<a;L++){var Z=this._ids[L];this._dists[Z]>U&&(N[H++]=Z,U=this._dists[Z])}return this.hull=N.subarray(0,H),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(en(w,b,S,M,I,P)<0){var z=v,O=S,B=M;v=p,S=I,M=P,p=z,I=O,P=B}var F=function(t,n,e,r,i,a){var o=e-t,u=r-n,s=i-t,l=a-n,h=o*o+u*u,c=s*s+l*l,f=.5/(o*l-u*s);return{x:t+(l*h-u*c)*f,y:n+(o*c-s*h)*f}}(w,b,S,M,I,P);this._cx=F.x,this._cy=F.y;for(var D=0;D<a;D++)this._dists[D]=un(t[2*D],t[2*D+1],F.x,F.y);ln(this._ids,this._dists,0,a-1),this._hullStart=d;var q=3;e[d]=n[p]=v,e[v]=n[d]=p,e[p]=n[v]=d,r[d]=0,r[v]=1,r[p]=2,i.fill(-1),i[this._hashKey(w,b)]=d,i[this._hashKey(S,M)]=v,i[this._hashKey(I,P)]=p,this.trianglesLen=0,this._addTriangle(d,v,p,-1,-1,-1);for(var R,K,G=0;G<this._ids.length;G++){var V=this._ids[G],W=t[2*V],$=t[2*V+1];if(!(G>0&&Math.abs(W-R)<=rn&&Math.abs($-K)<=rn)&&(R=W,K=$,V!==d&&V!==v&&V!==p)){for(var J=0,X=0,Q=this._hashKey(W,$);X<this._hashSize&&(-1===(J=i[(Q+X)%this._hashSize])||J===e[J]);X++);for(var Y=J=n[J],tt=void 0;tt=e[Y],en(W,$,t[2*Y],t[2*Y+1],t[2*tt],t[2*tt+1])>=0;)if((Y=tt)===J){Y=-1;break}if(-1!==Y){var nt=this._addTriangle(Y,V,e[Y],-1,-1,r[Y]);r[V]=this._legalize(nt+2),r[Y]=nt,q++;for(var et=e[Y];tt=e[et],en(W,$,t[2*et],t[2*et+1],t[2*tt],t[2*tt+1])<0;)nt=this._addTriangle(et,V,tt,r[V],-1,r[et]),r[V]=this._legalize(nt+2),e[et]=et,q--,et=tt;if(Y===J)for(;en(W,$,t[2*(tt=n[Y])],t[2*tt+1],t[2*Y],t[2*Y+1])<0;)nt=this._addTriangle(tt,V,Y,-1,r[Y],r[tt]),this._legalize(nt+2),r[tt]=nt,e[Y]=Y,q--,Y=tt;this._hullStart=n[V]=Y,e[Y]=n[et]=V,e[V]=et,i[this._hashKey(W,$)]=V,i[this._hashKey(t[2*Y],t[2*Y+1])]=Y}}}this.hull=new Uint32Array(q);for(var rt=0,it=this._hullStart;rt<q;rt++)this.hull[rt]=it,it=e[it];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,n){return Math.floor((e=t-this._cx,r=n-this._cy,i=e/(Math.abs(e)+Math.abs(r)),(r>0?3-i:1+i)/4*this._hashSize))%this._hashSize;var e,r,i}},{key:"_legalize",value:function(t){for(var n,e,r,i,a,o,u,s,l,h,c,f,d,v,p,g,y=this._triangles,m=this._halfedges,_=this.coords,x=0,w=0;;){var b=m[t],k=t-t%3;if(w=k+(t+2)%3,-1!==b){var A=b-b%3,S=k+(t+1)%3,M=A+(b+2)%3,E=y[w],T=y[t],C=y[S],I=y[M];if(n=_[2*E],e=_[2*E+1],r=_[2*T],i=_[2*T+1],a=_[2*C],o=_[2*C+1],u=_[2*I],s=_[2*I+1],l=void 0,h=void 0,c=void 0,f=void 0,d=void 0,v=void 0,void 0,p=void 0,g=void 0,(l=n-u)*((f=i-s)*(g=(d=a-u)*d+(v=o-s)*v)-(p=(c=r-u)*c+f*f)*v)-(h=e-s)*(c*g-p*d)+(l*l+h*h)*(c*v-f*d)<0){y[t]=I,y[b]=E;var P=m[M];if(-1===P){var j=this._hullStart;do{if(this._hullTri[j]===M){this._hullTri[j]=t;break}j=this._hullPrev[j]}while(j!==this._hullStart)}this._link(t,P),this._link(b,m[w]),this._link(w,M);var N=A+(b+1)%3;x<an.length&&(an[x++]=N)}else{if(0===x)break;t=an[--x]}}else{if(0===x)break;t=an[--x]}}return w}},{key:"_link",value:function(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}},{key:"_addTriangle",value:function(t,n,e,r,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=e,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}],[{key:"from",value:function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fn,i=n.length,a=new Float64Array(2*i),o=0;o<i;o++){var u=n[o];a[2*o]=e(u),a[2*o+1]=r(u)}return new t(a)}}]),t}();function un(t,n,e,r){var i=t-e,a=n-r;return i*i+a*a}function sn(t,n,e,r,i,a){var o=e-t,u=r-n,s=i-t,l=a-n,h=o*o+u*u,c=s*s+l*l,f=.5/(o*l-u*s),d=(l*h-u*c)*f,v=(o*c-s*h)*f;return d*d+v*v}function ln(t,n,e,r){if(r-e<=20)for(var i=e+1;i<=r;i++){for(var a=t[i],o=n[a],u=i-1;u>=e&&n[t[u]]>o;)t[u+1]=t[u--];t[u+1]=a}else{var s=e+1,l=r;hn(t,e+r>>1,s),n[t[e]]>n[t[r]]&&hn(t,e,r),n[t[s]]>n[t[r]]&&hn(t,s,r),n[t[e]]>n[t[s]]&&hn(t,e,s);for(var h=t[s],c=n[h];;){do{s++}while(n[t[s]]<c);do{l--}while(n[t[l]]>c);if(l<s)break;hn(t,s,l)}t[e+1]=t[l],t[l]=h,r-s+1>=l-e?(ln(t,n,s,r),ln(t,n,e,l-1)):(ln(t,n,e,l-1),ln(t,n,s,r))}}function hn(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function cn(t){return t[0]}function fn(t){return t[1]}var dn=1e-6,vn=function(){function t(){(0,Gt.Z)(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return(0,Vt.Z)(t,[{key:"moveTo",value:function(t,n){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+n)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,n){this._+="L".concat(this._x1=+t,",").concat(this._y1=+n)}},{key:"arc",value:function(t,n,e){var r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>dn||Math.abs(this._y1-i)>dn)&&(this._+="L"+r+","+i),e&&(this._+="A".concat(e,",").concat(e,",0,1,1,").concat(t-e,",").concat(n,"A").concat(e,",").concat(e,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(t,n,e,r){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+n,"h").concat(+e,"v").concat(+r,"h").concat(-e,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),pn=function(){function t(){(0,Gt.Z)(this,t),this._=[]}return(0,Vt.Z)(t,[{key:"moveTo",value:function(t,n){this._.push([t,n])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,n){this._.push([t,n])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}();function gn(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return yn(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yn(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function yn(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var mn=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],i=(0,r.Z)(e,4),a=i[0],o=i[1],u=i[2],s=i[3];if((0,Gt.Z)(this,t),!((u=+u)>=(a=+a)&&(s=+s)>=(o=+o)))throw new Error("invalid bounds");this.delaunay=n,this._circumcenters=new Float64Array(2*n.points.length),this.vectors=new Float64Array(2*n.points.length),this.xmax=u,this.xmin=a,this.ymax=s,this.ymin=o,this._init()}return(0,Vt.Z)(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,n,e=this.delaunay,r=e.points,i=e.hull,a=e.triangles,o=this.vectors,u=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),s=0,l=0,h=a.length;s<h;s+=3,l+=2){var c=2*a[s],f=2*a[s+1],d=2*a[s+2],v=r[c],p=r[c+1],g=r[f],y=r[f+1],m=r[d],_=r[d+1],x=g-v,w=y-p,b=m-v,k=_-p,A=2*(x*k-w*b);if(Math.abs(A)<1e-9){var S=1e9,M=2*a[0];t=(v+m)/2-(S*=Math.sign((r[M]-v)*k-(r[M+1]-p)*b))*k,n=(p+_)/2+S*b}else{var E=1/A,T=x*x+w*w,C=b*b+k*k;t=v+(k*T-w*C)*E,n=p+(x*C-b*T)*E}u[l]=t,u[l+1]=n}var I,P,j,N=i[i.length-1],H=4*N,L=r[2*N],U=r[2*N+1];o.fill(0);for(var Z=0;Z<i.length;++Z)I=H,P=L,j=U,H=4*(N=i[Z]),L=r[2*N],U=r[2*N+1],o[I+2]=o[H]=j-U,o[I+3]=o[H+1]=L-P}},{key:"render",value:function(t){var n=null==t?t=new vn:void 0,e=this.delaunay,r=e.halfedges,i=e.inedges,a=e.hull,o=this.circumcenters,u=this.vectors;if(a.length<=1)return null;for(var s=0,l=r.length;s<l;++s){var h=r[s];if(!(h<s)){var c=2*Math.floor(s/3),f=2*Math.floor(h/3),d=o[c],v=o[c+1],p=o[f],g=o[f+1];this._renderSegment(d,v,p,g,t)}}for(var y,m=a[a.length-1],_=0;_<a.length;++_){y=m,m=a[_];var x=2*Math.floor(i[m]/3),w=o[x],b=o[x+1],k=4*y,A=this._project(w,b,u[k+2],u[k+3]);A&&this._renderSegment(w,b,A[0],A[1],t)}return n&&n.value()}},{key:"renderBounds",value:function(t){var n=null==t?t=new vn:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}},{key:"renderCell",value:function(t,n){var e=null==n?n=new vn:void 0,r=this._clip(t);if(null!==r&&r.length){n.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||n.lineTo(r[a],r[a+1]);return n.closePath(),e&&e.value()}}},{key:"cellPolygons",value:Ht().mark((function t(){var n,e,r,i;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.delaunay.points,e=0,r=n.length/2;case 2:if(!(e<r)){t.next=11;break}if(!(i=this.cellPolygon(e))){t.next=8;break}return i.index=e,t.next=8,i;case 8:++e,t.next=2;break;case 11:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var n=new pn;return this.renderCell(t,n),n.value()}},{key:"_renderSegment",value:function(t,n,e,r,i){var a,o=this._regioncode(t,n),u=this._regioncode(e,r);0===o&&0===u?(i.moveTo(t,n),i.lineTo(e,r)):(a=this._clipSegment(t,n,e,r,o,u))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}},{key:"neighbors",value:Ht().mark((function t(n){var e,r,i,a,o,u,s,l,h;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this._clip(n))){t.next=33;break}r=gn(this.delaunay.neighbors(n)),t.prev=3,r.s();case 5:if((i=r.n()).done){t.next=25;break}if(a=i.value,!(o=this._clip(a))){t.next=23;break}u=0,s=e.length;case 10:if(!(u<s)){t.next=23;break}l=0,h=o.length;case 12:if(!(l<h)){t.next=20;break}if(e[u]!=o[l]||e[u+1]!=o[l+1]||e[(u+2)%s]!=o[(l+h-2)%h]||e[(u+3)%s]!=o[(l+h-1)%h]){t.next=17;break}return t.next=16,a;case 16:return t.abrupt("break",23);case 17:l+=2,t.next=12;break;case 20:u+=2,t.next=10;break;case 23:t.next=5;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(3),r.e(t.t0);case 30:return t.prev=30,r.f(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[3,27,30,33]])}))},{key:"_cell",value:function(t){var n=this.circumcenters,e=this.delaunay,r=e.inedges,i=e.halfedges,a=e.triangles,o=r[t];if(-1===o)return null;var u=[],s=o;do{var l=Math.floor(s/3);if(u.push(n[2*l],n[2*l+1]),a[s=s%3==2?s-2:s+1]!==t)break;s=i[s]}while(s!==o&&-1!==s);return u}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var n=this._cell(t);if(null===n)return null;var e=this.vectors,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}},{key:"_clipFinite",value:function(t,n){for(var e,i,a,o,u=n.length,s=null,l=n[u-2],h=n[u-1],c=this._regioncode(l,h),f=0,d=0;d<u;d+=2)if(e=l,i=h,l=n[d],h=n[d+1],a=c,c=this._regioncode(l,h),0===a&&0===c)o=f,f=0,s?s.push(l,h):s=[l,h];else{var v=void 0,p=void 0,g=void 0,y=void 0,m=void 0;if(0===a){if(null===(v=this._clipSegment(e,i,l,h,a,c)))continue;var _=v,x=(0,r.Z)(_,4);p=x[0],g=x[1],y=x[2],m=x[3]}else{if(null===(v=this._clipSegment(l,h,e,i,c,a)))continue;var w=v,b=(0,r.Z)(w,4);y=b[0],m=b[1],p=b[2],g=b[3],o=f,f=this._edgecode(p,g),o&&f&&this._edge(t,o,f,s,s.length),s?s.push(p,g):s=[p,g]}o=f,f=this._edgecode(y,m),o&&f&&this._edge(t,o,f,s,s.length),s?s.push(y,m):s=[y,m]}if(s)o=f,f=this._edgecode(s[0],s[1]),o&&f&&this._edge(t,o,f,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(t,n,e,r,i,a){for(;;){if(0===i&&0===a)return[t,n,e,r];if(i&a)return null;var o=void 0,u=void 0,s=i||a;8&s?(o=t+(e-t)*(this.ymax-n)/(r-n),u=this.ymax):4&s?(o=t+(e-t)*(this.ymin-n)/(r-n),u=this.ymin):2&s?(u=n+(r-n)*(this.xmax-t)/(e-t),o=this.xmax):(u=n+(r-n)*(this.xmin-t)/(e-t),o=this.xmin),i?(t=o,n=u,i=this._regioncode(t,n)):(e=o,r=u,a=this._regioncode(e,r))}}},{key:"_clipInfinite",value:function(t,n,e,r,i,a){var o,u=Array.from(n);if((o=this._project(u[0],u[1],e,r))&&u.unshift(o[0],o[1]),(o=this._project(u[u.length-2],u[u.length-1],i,a))&&u.push(o[0],o[1]),u=this._clipFinite(t,u))for(var s,l=0,h=u.length,c=this._edgecode(u[h-2],u[h-1]);l<h;l+=2)s=c,c=this._edgecode(u[l],u[l+1]),s&&c&&(l=this._edge(t,s,c,u,l),h=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}},{key:"_edge",value:function(t,n,e,r,i){for(;n!==e;){var a=void 0,o=void 0;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(t,a,o)||(r.splice(i,0,a,o),i+=2)}if(r.length>4)for(var u=0;u<r.length;u+=2){var s=(u+2)%r.length,l=(u+4)%r.length;(r[u]===r[s]&&r[s]===r[l]||r[u+1]===r[s+1]&&r[s+1]===r[l+1])&&(r.splice(s,2),u-=2)}return i}},{key:"_project",value:function(t,n,e,r){var i,a,o,u=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<u&&(o=this.ymin,a=t+(u=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<u&&(o=this.ymax,a=t+(u=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<u&&(a=this.xmax,o=n+(u=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<u&&(a=this.xmin,o=n+(u=i)*r)}return[a,o]}},{key:"_edgecode",value:function(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}},{key:"_regioncode",value:function(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}]),t}(),_n=Ht().mark(Cn);function xn(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return wn(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wn(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,a=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw a}}}}function wn(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var bn=2*Math.PI,kn=Math.pow;function An(t){return t[0]}function Sn(t){return t[1]}function Mn(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}var En=function(){function t(n){(0,Gt.Z)(this,t),this._delaunator=new on(n),this.inedges=new Int32Array(n.length/2),this._hullIndex=new Int32Array(n.length/2),this.points=this._delaunator.coords,this._init()}return(0,Vt.Z)(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var n=t.triangles,e=t.coords,r=0;r<n.length;r+=3){var i=2*n[r],a=2*n[r+1],o=2*n[r+2];if((e[o]-e[i])*(e[a+1]-e[i+1])-(e[a]-e[i])*(e[o+1]-e[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(function(t,n){return n})).sort((function(t,e){return n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]}));for(var e=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[n[2*e],n[2*e+1],n[2*r],n[2*r+1]],a=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]),o=0,u=n.length/2;o<u;++o){var s=Mn(n[2*o],n[2*o+1],a);n[2*o]=s[0],n[2*o+1]=s[1]}this._delaunator=new on(n)}else delete this.collinear;for(var l=this.halfedges=this._delaunator.halfedges,h=this.hull=this._delaunator.hull,c=this.triangles=this._delaunator.triangles,f=this.inedges.fill(-1),d=this._hullIndex.fill(-1),v=0,p=l.length;v<p;++v){var g=c[v%3==2?v-2:v+1];-1!==l[v]&&-1!==f[g]||(f[g]=v)}for(var y=0,m=h.length;y<m;++y)d[h[y]]=y;h.length<=2&&h.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=h[0],f[h[0]]=1,2===h.length&&(f[h[1]]=0,this.triangles[1]=h[1],this.triangles[2]=h[1]))}},{key:"voronoi",value:function(t){return new mn(this,t)}},{key:"neighbors",value:Ht().mark((function t(n){var e,r,i,a,o,u,s,l,h,c,f;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!(u=this.collinear)){t.next=10;break}if(!((s=u.indexOf(n))>0)){t.next=6;break}return t.next=6,u[s-1];case 6:if(!(s<u.length-1)){t.next=9;break}return t.next=9,u[s+1];case 9:return t.abrupt("return");case 10:if(-1!==(l=e[n])){t.next=13;break}return t.abrupt("return");case 13:h=l,c=-1;case 14:return t.next=16,c=o[h];case 16:if(o[h=h%3==2?h-2:h+1]===n){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(h=a[h])){t.next=26;break}if((f=r[(i[n]+1)%r.length])===c){t.next=25;break}return t.next=25,f;case 25:return t.abrupt("return");case 26:if(h!==l){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!=t||(n=+n)!=n)return-1;for(var r,i=e;(r=this._step(e,t,n))>=0&&r!==e&&r!==i;)e=r;return r}},{key:"_step",value:function(t,n,e){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,u=this.triangles,s=this.points;if(-1===r[t]||!s.length)return(t+1)%(s.length>>1);var l=t,h=kn(n-s[2*t],2)+kn(e-s[2*t+1],2),c=r[t],f=c;do{var d=u[f],v=kn(n-s[2*d],2)+kn(e-s[2*d+1],2);if(v<h&&(h=v,l=d),u[f=f%3==2?f-2:f+1]!==t)break;if(-1===(f=o[f])){if((f=i[(a[t]+1)%i.length])!==d&&kn(n-s[2*f],2)+kn(e-s[2*f+1],2)<h)return f;break}}while(f!==c);return l}},{key:"render",value:function(t){for(var n=null==t?t=new vn:void 0,e=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var u=r[a];if(!(u<a)){var s=2*i[a],l=2*i[u];t.moveTo(e[s],e[s+1]),t.lineTo(e[l],e[l+1])}}return this.renderHull(t),n&&n.value()}},{key:"renderPoints",value:function(t,n){void 0!==n||t&&"function"==typeof t.moveTo||(n=t,t=null),n=null==n?2:+n;for(var e=null==t?t=new vn:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],u=r[i+1];t.moveTo(o+n,u),t.arc(o,u,n,0,bn)}return e&&e.value()}},{key:"renderHull",value:function(t){var n=null==t?t=new vn:void 0,e=this.hull,r=this.points,i=2*e[0],a=e.length;t.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var u=2*e[o];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}},{key:"hullPolygon",value:function(){var t=new pn;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,n){var e=null==n?n=new vn:void 0,r=this.points,i=this.triangles,a=2*i[t*=3],o=2*i[t+1],u=2*i[t+2];return n.moveTo(r[a],r[a+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.closePath(),e&&e.value()}},{key:"trianglePolygons",value:Ht().mark((function t(){var n,e,r;return Ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.triangles,e=0,r=n.length/3;case 2:if(!(e<r)){t.next=8;break}return t.next=5,this.trianglePolygon(e);case 5:++e,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var n=new pn;return this.renderTriangle(t,n),n.value()}}],[{key:"from",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:An,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn,i=arguments.length>3?arguments[3]:void 0;return new t("length"in n?Tn(n,e,r,i):Float64Array.from(Cn(n,e,r,i)))}}]),t}();function Tn(t,n,e,r){for(var i=t.length,a=new Float64Array(2*i),o=0;o<i;++o){var u=t[o];a[2*o]=n.call(r,u,o,t),a[2*o+1]=e.call(r,u,o,t)}return a}function Cn(t,n,e,r){var i,a,o,u;return Ht().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:i=0,a=xn(t),s.prev=2,a.s();case 4:if((o=a.n()).done){s.next=13;break}return u=o.value,s.next=8,n.call(r,u,i,t);case 8:return s.next=10,e.call(r,u,i,t);case 10:++i;case 11:s.next=4;break;case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(2),a.e(s.t0);case 18:return s.prev=18,a.f(),s.finish(18);case 21:case"end":return s.stop()}}),_n,null,[[2,15,18,21]])}var In=0,Pn=24,jn=["id"],Nn=(0,i.memo)((function(t){var n=t.data,e=t.highlightPatternData,r=t.width,a=t.height,o=t.imageSize,u=t.highlightedAreaId,s=void 0===u?null:u,l=t.onClickCell,h=(0,i.useState)(null),c=h[0],f=h[1],d=(0,i.useState)(!1),v=d[0],p=d[1],g=(0,i.useState)(""),y=(g[0],g[1],(0,i.useCallback)((function(t){f(t)}),[])),m=((0,i.useRef)(null),function(t){var n=t.width,e=t.height,r=t.data,a=(0,i.useMemo)((function(){return En.from(r,(function(t){return t.x}),(function(t){return t.y}))}),[r]),o=(0,i.useMemo)((function(){var t=[Number(Pn)-11,Number(In)-11,n-11,e-11];return a.voronoi(t)}),[a,e,n]),u=(0,i.useMemo)((function(){return r.map((function(t,n){return Object.assign({},t,{path:o.renderCell(n)})}))}),[r,o]);return{delaunay:a,voronoi:o,enrichedData:u}}({data:n,width:r,height:a})),_=m.voronoi,x=m.enrichedData,w=(0,i.useMemo)((function(){return{width:r,height:a,imageSize:o}}),[a,o,r]);return(0,i.useEffect)((function(){c&&w&&(qt({svg:Bt(c).attr("id","voronoi-projects").attr("fill","none").attr("stroke-linejoin","round").attr("stroke-linecap","round"),voronoi:_,data:x,options:w,onClick:l,onHover:Kt(c),onMouseLeave:Rt(c)}),p(!0))}),[x,v,l,c,_,w]),(0,i.useEffect)((function(){v&&c&&function(t){return function(n){var e=Bt(t);e.selectAll(".cell").each((function(t){var e=Bt(this),r=e.select(".highlight-pattern"),i=Boolean(t.areas.find((function(t){return n&&t.id===n})));n&&i&&r.style("fill","url(#diagonalHatchHighlight-"+n+")"),e.classed("area-highlight",i)})),e.classed("highlight-view",!!n)}}(c)(s)}),[s,v,c]),i.createElement(i.Fragment,null,i.createElement("svg",{ref:y,width:r,height:a,className:"cursor-pointer voronoi animate-fadeIn"},i.createElement("defs",null,i.createElement(Hn,{id:"diagonalHatch",className:"stroke-bg-secondary"}),e.map((function(t){var n=t.color,e=t.id;return i.createElement(Hn,{key:e,stroke:n||"black",id:"diagonalHatchHighlight-"+e})})))))})),Hn=function(t){var n=t.id,e=(0,x.Z)(t,jn);return i.createElement("pattern",{key:n,id:String(n),patternUnits:"userSpaceOnUse",width:"4",height:"4"},i.createElement("path",Object.assign({d:"M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2",strokeWidth:"1",opacity:.8},e)))},Ln=function(t){var n=t.gridSpecs,e=n.width,r=n.height,a=n.numCols,o=n.numRows,u=t.projects,s=t.areas,l=t.getGridCoordinates,h=(0,g.t)()[0],c=function(t){var n=t.projects,e=t.getGridCoordinates;return(0,i.useMemo)((function(){return e?n.map((function(t,n){var r=t.images,i=t.id,a=t.categories,o=t.name,u=t.slug,s=t.price,l=null!=r&&r[0]?(0,m.m)(null==r?void 0:r[0]):void 0;return{x:e(n)[0],y:e(n)[1],imgSrc:l?(0,y.d)(l):"",id:i,index:n,title:String(o),price:s+",00 €",slug:String(u),areas:(null==a?void 0:a.filter(_.Z).map((function(t){return{color:String(t.color),name:String(t.name),id:t.id}})))||[]}})):[]}),[e,n])}({projects:u,getGridCoordinates:l});return i.createElement(i.Fragment,null,i.createElement("div",{id:"voronoiContainer",className:"overflow-x-hidden"},i.createElement(Nn,{data:c,width:e,height:r,onClickCell:function(){},imageSize:1.2*Math.max(e/a,r/o),highlightPatternData:s,highlightedAreaId:null==h?void 0:h.id})))},Un={top:.18,right:.14,bottom:.16,left:.14},Zn=function(t){var n=t.projects,e=t.areas,r=f({wait:300}),a=r[0],o=r[1],u=p({minItems:n.length,width:a,minHeight:o-d.i,relMargin:Un,minTilePixels:55e3,colJitter:.05}),s=u.getGridCoordinates,l=u.gridSpecs;return l&&s?i.createElement(Ln,{projects:n,areas:e,gridSpecs:l,getGridCoordinates:s}):null}}}]);
//# sourceMappingURL=865-de33f8d7d08a1ac22505.js.map