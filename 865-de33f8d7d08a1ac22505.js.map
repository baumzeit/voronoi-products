{"version":3,"file":"865-de33f8d7d08a1ac22505.js","mappings":"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","sources":["webpack://voronoi-shopping/./node_modules/core-js/internals/add-to-unscopables.js","webpack://voronoi-shopping/./node_modules/core-js/internals/array-species-constructor.js","webpack://voronoi-shopping/./node_modules/core-js/internals/array-species-create.js","webpack://voronoi-shopping/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://voronoi-shopping/./node_modules/core-js/internals/flatten-into-array.js","webpack://voronoi-shopping/./node_modules/core-js/internals/is-array.js","webpack://voronoi-shopping/./node_modules/core-js/modules/es.array.flat.js","webpack://voronoi-shopping/./node_modules/core-js/modules/es.array.unscopables.flat.js","webpack://voronoi-shopping/./node_modules/core-js/modules/es.math.hypot.js","webpack://voronoi-shopping/./src/common/utility/get-image.ts","webpack://voronoi-shopping/./node_modules/@react-hook/latest/dist/module/index.js","webpack://voronoi-shopping/./node_modules/@react-hook/window-size/node_modules/@react-hook/debounce/dist/module/index.js","webpack://voronoi-shopping/./node_modules/@react-hook/event/dist/module/index.js","webpack://voronoi-shopping/./node_modules/@react-hook/window-size/dist/module/index.js","webpack://voronoi-shopping/./node_modules/d3-random/src/normal.js","webpack://voronoi-shopping/./node_modules/d3-random/src/defaultSource.js","webpack://voronoi-shopping/./src/common/hooks/use-jitter-grid.tsx","webpack://voronoi-shopping/./node_modules/d3-selection/src/selector.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/array.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selectorAll.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/matcher.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/selectChild.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/selectChildren.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/sparse.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/enter.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/constant.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/data.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/sort.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/size.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/namespaces.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/namespace.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/attr.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/window.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/style.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/property.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/classed.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/text.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/html.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/raise.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/lower.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/creator.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/insert.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/remove.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/clone.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/on.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/dispatch.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/iterator.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/index.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/select.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/selectAll.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/filter.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/exit.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/join.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/merge.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/order.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/call.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/nodes.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/node.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/empty.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/each.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/append.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/selection/datum.js","webpack://voronoi-shopping/./node_modules/d3-selection/src/select.js","webpack://voronoi-shopping/./src/features/viz/Voronoi/helpers/draw-cell.ts","webpack://voronoi-shopping/./src/features/viz/Voronoi/helpers/adjust-annotation.ts","webpack://voronoi-shopping/./src/features/viz/Voronoi/helpers/draw-voronoi.ts","webpack://voronoi-shopping/./src/features/viz/Voronoi/helpers/voronoi-actions.tsx","webpack://voronoi-shopping/./node_modules/robust-predicates/esm/util.js","webpack://voronoi-shopping/./node_modules/robust-predicates/esm/orient2d.js","webpack://voronoi-shopping/./node_modules/robust-predicates/esm/orient3d.js","webpack://voronoi-shopping/./node_modules/robust-predicates/esm/incircle.js","webpack://voronoi-shopping/./node_modules/robust-predicates/esm/insphere.js","webpack://voronoi-shopping/./node_modules/delaunator/index.js","webpack://voronoi-shopping/./node_modules/d3-delaunay/src/path.js","webpack://voronoi-shopping/./node_modules/d3-delaunay/src/polygon.js","webpack://voronoi-shopping/./node_modules/d3-delaunay/src/voronoi.js","webpack://voronoi-shopping/./node_modules/d3-delaunay/src/delaunay.js","webpack://voronoi-shopping/./src/features/viz/Voronoi/use-voronoi-model.ts","webpack://voronoi-shopping/./src/features/viz/Voronoi/VoronoiChart.tsx","webpack://voronoi-shopping/./src/features/viz/Voronoi/VoronoiContainer.tsx","webpack://voronoi-shopping/./src/features/projects/use-projects-chart-data.ts","webpack://voronoi-shopping/./src/features/projects/ProjectsMap.tsx"],"sourcesContent":["var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        doesNotExceedSafeInteger(targetIndex + 1);\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es-x/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","var $ = require('../internals/export');\n\n// eslint-disable-next-line es-x/no-math-hypot -- required for testing\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, arity: 2, forced: BUGGY }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  hypot: function hypot(value1, value2) {\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n","import { IGatsbyImageData } from 'gatsby-plugin-image'\n\ntype DeepMaybe<T> = T extends object\n  ? {\n      [P in keyof T]?: P extends 'gatsbyImageData' ? IGatsbyImageData : DeepMaybe<T[P]> | null\n    }\n  : T\n\ntype StrapiMedia = DeepMaybe<Queries.STRAPI__MEDIA> | null\n\nexport const getStrapiImage = <T extends StrapiMedia = StrapiMedia>(queryImage: T) =>\n  queryImage?.localFile?.childImageSharp?.gatsbyImageData\n","import * as React from 'react';\n\nvar useLatest = function useLatest(current) {\n  var storedValue = React.useRef(current);\n  React.useEffect(function () {\n    storedValue.current = current;\n  });\n  return storedValue;\n};\n\nexport default useLatest;","import * as React from 'react';\nimport useLatest from '@react-hook/latest';\nexport var useDebounceCallback = function useDebounceCallback(callback) {\n  var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;\n  var leading = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var storedCallback = useLatest(callback);\n  var timeout = React.useRef();\n  var deps = [wait, leading, storedCallback]; // Cleans up pending timeouts when the deps change\n\n  function _ref() {\n    timeout.current && clearTimeout(timeout.current);\n    timeout.current = void 0;\n  }\n\n  React.useEffect(function () {\n    return _ref;\n  }, deps);\n\n  function _ref2() {\n    timeout.current = void 0;\n  }\n\n  return React.useCallback(function () {\n    // eslint-disable-next-line prefer-rest-params\n    var args = arguments;\n    var current = timeout.current; // Calls on leading edge\n\n    if (current === void 0 && leading) {\n      timeout.current = setTimeout(_ref2, wait); // eslint-disable-next-line prefer-spread\n\n      return storedCallback.current.apply(null, args);\n    } // Clear the timeout every call and start waiting again\n\n\n    current && clearTimeout(current); // Waits for `wait` before invoking the callback\n\n    timeout.current = setTimeout(function () {\n      timeout.current = void 0;\n      storedCallback.current.apply(null, args);\n    }, wait);\n  }, deps);\n};\nexport var useDebounce = function useDebounce(initialState, wait, leading) {\n  var state = React.useState(initialState);\n  return [state[0], useDebounceCallback(state[1], wait, leading)];\n};","import * as React from 'react';\n\nfunction useEvent(target, type, listener, cleanup) {\n  var storedListener = React.useRef(listener);\n  var storedCleanup = React.useRef(cleanup);\n  React.useEffect(function () {\n    storedListener.current = listener;\n    storedCleanup.current = cleanup;\n  });\n  React.useEffect(function () {\n    var targetEl = target && 'current' in target ? target.current : target;\n    if (!targetEl) return;\n    var didUnsubscribe = 0;\n\n    function listener() {\n      if (didUnsubscribe) return;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      storedListener.current.apply(this, args);\n    }\n\n    targetEl.addEventListener(type, listener);\n    var cleanup = storedCleanup.current;\n    return function () {\n      didUnsubscribe = 1;\n      targetEl.removeEventListener(type, listener);\n      cleanup && cleanup();\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [target, type]);\n}\n\nexport default useEvent;","import _slicedToArray from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { useDebounce } from '@react-hook/debounce';\nimport useEvent from '@react-hook/event';\nvar emptyObj = {};\nvar win = typeof window === 'undefined' ? null : window;\n\nvar getSize = function getSize() {\n  return [document.documentElement.clientWidth, document.documentElement.clientHeight];\n};\n\nexport var useWindowSize = function useWindowSize() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : emptyObj;\n  var wait = options.wait,\n      leading = options.leading,\n      _options$initialWidth = options.initialWidth,\n      initialWidth = _options$initialWidth === void 0 ? 0 : _options$initialWidth,\n      _options$initialHeigh = options.initialHeight,\n      initialHeight = _options$initialHeigh === void 0 ? 0 : _options$initialHeigh;\n\n  var _useDebounce = useDebounce(\n  /* istanbul ignore next */\n  typeof document === 'undefined' ? [initialWidth, initialHeight] : getSize, wait, leading),\n      _useDebounce2 = _slicedToArray(_useDebounce, 2),\n      size = _useDebounce2[0],\n      setDebouncedSize = _useDebounce2[1];\n\n  var setSize = function setSize() {\n    return setDebouncedSize(getSize);\n  };\n\n  useEvent(win, 'resize', setSize);\n  useEvent(win, 'orientationchange', setSize);\n  return size;\n};\nexport var useWindowHeight = function useWindowHeight(options) {\n  return useWindowSize(options)[1];\n};\nexport var useWindowWidth = function useWindowWidth(options) {\n  return useWindowSize(options)[0];\n};","import defaultSource from \"./defaultSource.js\";\nexport default (function sourceRandomNormal(source) {\n  function randomNormal(mu, sigma) {\n    var x, r;\n    mu = mu == null ? 0 : +mu;\n    sigma = sigma == null ? 1 : +sigma;\n    return function () {\n      var y; // If available, use the second previously-generated uniform random.\n\n      if (x != null) y = x, x = null; // Otherwise, generate a new x and y.\n      else do {\n        x = source() * 2 - 1;\n        y = source() * 2 - 1;\n        r = x * x + y * y;\n      } while (!r || r > 1);\n      return mu + sigma * y * Math.sqrt(-2 * Math.log(r) / r);\n    };\n  }\n\n  randomNormal.source = sourceRandomNormal;\n  return randomNormal;\n})(defaultSource);","export default Math.random;","import { randomNormal } from 'd3-random'\nimport { useCallback, useMemo } from 'react'\n\ntype UseJitterGridProps = {\n  minItems: number\n  width: number\n  minHeight: number\n  minTilePixels?: number\n  relMargin: {\n    top: number\n    right: number\n    bottom: number\n    left: number\n  }\n  colJitter?: number\n}\n\nexport type GridCoordinate = [x: number, y: number]\ntype GridPositions = GridCoordinate[]\n\ntype AxisSpecs = {\n  positions: number[]\n  interval: number\n}\n\ntype GridSpecs = {\n  grid: GridPositions\n  numCols: number\n  numRows: number\n  height: number\n  width: number\n}\n\nexport type UseJitterGridReturn = {\n  gridSpecs?: {\n    grid: GridPositions\n    numCols: number\n    numRows: number\n    height: number\n    width: number\n  }\n  getGridCoordinates?: (idx: number) => GridCoordinate\n}\n\nexport const useJitterGrid = ({\n  minItems,\n  width,\n  minHeight,\n  relMargin,\n  minTilePixels,\n  colJitter = 0\n}: UseJitterGridProps): UseJitterGridReturn => {\n  const gridData = useMemo(() => {\n    try {\n      if (width && minHeight) {\n        const pixels = width * minHeight\n        const pixelsPerItem = pixels / minItems\n        const height = minTilePixels && pixelsPerItem < minTilePixels ? (minItems * minTilePixels) / width : minHeight\n\n        const defaultSize = Math.sqrt(minItems)\n        const aspect = width && height && Math.min(width / height, 1.5)\n\n        const aspectFactor = {\n          x: aspect > 1 ? aspect : 1,\n          y: aspect < 1 ? 1 / aspect : 1\n        }\n        const virtualColumns = aspect ? defaultSize * aspectFactor.x : defaultSize\n        const virtualRows = aspect ? defaultSize * aspectFactor.y : defaultSize\n\n        const safeRows = Math.ceil(virtualRows)\n        const safeColumns = Math.ceil(virtualColumns)\n\n        const refCols = safeColumns * safeColumns - minItems >= safeColumns ? safeColumns - 1 : safeColumns\n        const refRows = safeRows - Math.floor((safeRows * refCols - minItems) / refCols)\n\n        const minMarginY = 30\n        const minMarginX = 60\n\n        const marginTop = Math.max(height * relMargin.top, minMarginY)\n        const marginBottom = Math.max(height * relMargin.bottom, minMarginY)\n        const marginRight = Math.max(width * relMargin.right, minMarginX)\n        const marginLeft = Math.max(width * relMargin.left, minMarginX)\n\n        const getNoise = (unitSize: number, jitter: number) => unitSize * randomNormal(0, jitter)()\n\n        const getColSpecs = (items: number): AxisSpecs => {\n          const colWidth = (width - (marginLeft + marginRight)) / Math.max(items - 1, 1)\n          const colDiff = Math.max(refCols - items, 0)\n          const offset = colDiff ? (0.5 * (colWidth * colDiff)) / refCols : 0\n          const adjustedColWidth = colDiff ? (colWidth * items) / refCols : colWidth\n          return {\n            positions: Array.from({ length: items }, (_, idx) => marginLeft + offset + adjustedColWidth * idx),\n            interval: colWidth\n          }\n        }\n        const getRowSpecs = (rows: number): AxisSpecs => {\n          const rowHeight = (height - (marginTop + marginBottom)) / Math.max(rows - 1, 1)\n          return {\n            positions: Array.from({ length: rows }, (_, idx) => marginTop + rowHeight * idx),\n            interval: rowHeight\n          }\n        }\n\n        const numOrphans = minItems % refCols\n        const adoptedOrphans = numOrphans === 1 ? 1 : 0\n        const getRowJitter = (idx: number) => (height * (idx % 2) ? height * 0.02 : height * -0.02)\n\n        const getCoordinates = (colSpecs: AxisSpecs, rowSpecs: AxisSpecs, rowIdx: number): GridCoordinate[] => {\n          const { positions: colPos, interval: colSize } = colSpecs\n          const { positions: rowPos } = rowSpecs\n\n          return Array.from({ length: colPos.length }).map((_, idx) => {\n            return [\n              colPos[idx] + getNoise(colSize, colJitter),\n              rowPos[rowIdx] + getRowJitter(idx) //+ getNoise(rowSize, 0.01)\n            ]\n          })\n        }\n\n        const actualRows = numOrphans > 0 && adoptedOrphans === numOrphans ? refRows - 1 : refRows\n\n        const rowSpecs = getRowSpecs(actualRows)\n\n        const gridPositions: GridPositions = Array.from({ length: refRows })\n          .map((_, rowIdx) => {\n            const adoptionRowIdx = rowIdx === 1\n            const isLastRow = rowIdx === refRows - 1\n            const regularRow = !numOrphans || !(isLastRow || adoptionRowIdx)\n\n            const actualCols = regularRow\n              ? refCols\n              : adoptionRowIdx\n              ? adoptedOrphans //\n                ? refCols + adoptedOrphans\n                : refCols\n              : isLastRow\n              ? adoptedOrphans //\n                ? numOrphans - adoptedOrphans\n                : numOrphans\n              : refCols\n\n            const colSpecs = getColSpecs(actualCols)\n\n            return getCoordinates(colSpecs, rowSpecs, rowIdx)\n          })\n          .flat()\n\n        return { grid: gridPositions, numCols: refCols, numRows: refRows, height: height, width: width }\n      }\n    } catch (err) {\n      console.error(err)\n      return undefined\n    }\n  }, [\n    width,\n    minHeight,\n    minItems,\n    minTilePixels,\n    relMargin.top,\n    relMargin.bottom,\n    relMargin.right,\n    relMargin.left,\n    colJitter\n  ])\n\n  const getGridCoordinates = useCallback(\n    (gridData: GridSpecs) =>\n      (idx: number): GridCoordinate => {\n        return gridData.grid[idx]\n      },\n    []\n  )\n\n  return { getGridCoordinates: gridData ? getGridCoordinates(gridData) : undefined, gridSpecs: gridData }\n}\n","function none() {}\n\nexport default function (selector) {\n  return selector == null ? none : function () {\n    return this.querySelector(selector);\n  };\n}","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we don’t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}","function empty() {\n  return [];\n}\n\nexport default function (selector) {\n  return selector == null ? empty : function () {\n    return this.querySelectorAll(selector);\n  };\n}","export default function (selector) {\n  return function () {\n    return this.matches(selector);\n  };\n}\nexport function childMatcher(selector) {\n  return function (node) {\n    return node.matches(selector);\n  };\n}","import { childMatcher } from \"../matcher.js\";\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function () {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function (match) {\n  return this.select(match == null ? childFirst : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}","import { childMatcher } from \"../matcher.js\";\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function () {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function (match) {\n  return this.selectAll(match == null ? children : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}","export default function (update) {\n  return new Array(update.length);\n}","import sparse from \"./sparse.js\";\nimport { Selection } from \"./index.js\";\nexport default function () {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function appendChild(child) {\n    return this._parent.insertBefore(child, this._next);\n  },\n  insertBefore: function insertBefore(child, next) {\n    return this._parent.insertBefore(child, next);\n  },\n  querySelector: function querySelector(selector) {\n    return this._parent.querySelector(selector);\n  },\n  querySelectorAll: function querySelectorAll(selector) {\n    return this._parent.querySelectorAll(selector);\n  }\n};","export default function (x) {\n  return function () {\n    return x;\n  };\n}","import { Selection } from \"./index.js\";\nimport { EnterNode } from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length; // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  } // Put any non-null nodes that don’t fit into exit.\n\n\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map(),\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue; // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  } // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n\n\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  } // Add any remaining nodes that were not bound to data to exit.\n\n\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && nodeByKeyValue.get(keyValues[i]) === node) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function (value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key); // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength) {\n          ;\n        }\n\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n} // Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isn’t worried about “live” collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// don’t; we’d rather avoid a gratuitous copy.)\n\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data ? data // Array, TypedArray, NodeList, array-like\n  : Array.from(data); // Map, Set, iterable, string, or anything else\n}","import { Selection } from \"./index.js\";\nexport default function (compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function () {\n  var size = 0;\n\n  var _iterator = _createForOfIteratorHelper(this),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      ++size;\n    } // eslint-disable-line no-unused-vars\n\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return size;\n}","export var xhtml = \"http://www.w3.org/1999/xhtml\";\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};","import namespaces from \"./namespaces.js\";\nexport default function (name) {\n  var prefix = name += \"\",\n      i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {\n    space: namespaces[prefix],\n    local: name\n  } : name; // eslint-disable-line no-prototype-builtins\n}","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function () {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function () {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local ? node.getAttributeNS(fullname.space, fullname.local) : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null ? fullname.local ? attrRemoveNS : attrRemove : typeof value === \"function\" ? fullname.local ? attrFunctionNS : attrFunction : fullname.local ? attrConstantNS : attrConstant)(fullname, value));\n}","export default function (node) {\n  return node.ownerDocument && node.ownerDocument.defaultView // node is a Node\n  || node.document && node // node is a Window\n  || node.defaultView; // node is a Document\n}","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function () {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function (name, value, priority) {\n  return arguments.length > 1 ? this.each((value == null ? styleRemove : typeof value === \"function\" ? styleFunction : styleConstant)(name, value, priority == null ? \"\" : priority)) : styleValue(this.node(), name);\n}\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name) || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}","function propertyRemove(name) {\n  return function () {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function () {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];else this[name] = v;\n  };\n}\n\nexport default function (name, value) {\n  return arguments.length > 1 ? this.each((value == null ? propertyRemove : typeof value === \"function\" ? propertyFunction : propertyConstant)(name, value)) : this.node()[name];\n}","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function add(name) {\n    var i = this._names.indexOf(name);\n\n    if (i < 0) {\n      this._names.push(name);\n\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function remove(name) {\n    var i = this._names.indexOf(name);\n\n    if (i >= 0) {\n      this._names.splice(i, 1);\n\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function contains(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node),\n      i = -1,\n      n = names.length;\n\n  while (++i < n) {\n    list.add(names[i]);\n  }\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node),\n      i = -1,\n      n = names.length;\n\n  while (++i < n) {\n    list.remove(names[i]);\n  }\n}\n\nfunction classedTrue(names) {\n  return function () {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function () {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function () {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function (name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()),\n        i = -1,\n        n = names.length;\n\n    while (++i < n) {\n      if (!list.contains(names[i])) return false;\n    }\n\n    return true;\n  }\n\n  return this.each((typeof value === \"function\" ? classedFunction : value ? classedTrue : classedFalse)(names, value));\n}","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function (value) {\n  return arguments.length ? this.each(value == null ? textRemove : (typeof value === \"function\" ? textFunction : textConstant)(value)) : this.node().textContent;\n}","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function () {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function () {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function (value) {\n  return arguments.length ? this.each(value == null ? htmlRemove : (typeof value === \"function\" ? htmlFunction : htmlConstant)(value)) : this.node().innerHTML;\n}","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function () {\n  return this.each(raise);\n}","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function () {\n  return this.each(lower);\n}","import namespace from \"./namespace.js\";\nimport { xhtml } from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function () {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml ? document.createElement(name) : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function () {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function (name) {\n  var fullname = namespace(name);\n  return (fullname.local ? creatorFixed : creatorInherit)(fullname);\n}","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function (name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function () {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function () {\n  return this.each(remove);\n}","function selection_cloneShallow() {\n  var clone = this.cloneNode(false),\n      parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true),\n      parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function (deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}","function contextListener(listener) {\n  return function (event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nfunction onRemove(typename) {\n  return function () {\n    var on = this.__on;\n    if (!on) return;\n\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n\n    if (++i) on.length = i;else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function () {\n    var on = this.__on,\n        o,\n        listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {\n      type: typename.type,\n      name: typename.name,\n      value: value,\n      listener: listener,\n      options: options\n    };\n    if (!on) this.__on = [o];else on.push(o);\n  };\n}\n\nexport default function (typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"),\n      i,\n      n = typenames.length,\n      t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n\n  for (i = 0; i < n; ++i) {\n    this.each(on(typenames[i], value, options));\n  }\n\n  return this;\n}","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function () {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function () {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function (type, params) {\n  return this.each((typeof params === \"function\" ? dispatchFunction : dispatchConstant)(type, params));\n}","import _regeneratorRuntime from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/regenerator/index.js\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(_callee);\n\nexport default function _callee() {\n  var groups, j, m, group, i, n, node;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          groups = this._groups, j = 0, m = groups.length;\n\n        case 1:\n          if (!(j < m)) {\n            _context.next = 13;\n            break;\n          }\n\n          group = groups[j], i = 0, n = group.length;\n\n        case 3:\n          if (!(i < n)) {\n            _context.next = 10;\n            break;\n          }\n\n          if (!(node = group[i])) {\n            _context.next = 7;\n            break;\n          }\n\n          _context.next = 7;\n          return node;\n\n        case 7:\n          ++i;\n          _context.next = 3;\n          break;\n\n        case 10:\n          ++j;\n          _context.next = 1;\n          break;\n\n        case 13:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}","import _defineProperty from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\nexport var root = [null];\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = _defineProperty({\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n}, Symbol.iterator, selection_iterator);\nexport default selection;","import { Selection } from \"./index.js\";\nimport selector from \"../selector.js\";\nexport default function (select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}","import { Selection } from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function () {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function (select) {\n  if (typeof select === \"function\") select = arrayAll(select);else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}","import { Selection } from \"./index.js\";\nimport matcher from \"../matcher.js\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}","import sparse from \"./sparse.js\";\nimport { Selection } from \"./index.js\";\nexport default function () {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}","export default function (onenter, onupdate, onexit) {\n  var enter = this.enter(),\n      update = this,\n      exit = this.exit();\n\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n\n  if (onexit == null) exit.remove();else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}","import { Selection } from \"./index.js\";\nexport default function (context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}","export default function () {\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}","export default function () {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}","export default function () {\n  return Array.from(this);\n}","export default function () {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}","export default function () {\n  return !this.node();\n}","export default function (callback) {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}","import creator from \"../creator.js\";\nexport default function (name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function () {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}","export default function (value) {\n  return arguments.length ? this.property(\"__data__\", value) : this.node().__data__;\n}","import { Selection, root } from \"./selection/index.js\";\nexport default function (selector) {\n  return typeof selector === \"string\" ? new Selection([[document.querySelector(selector)]], [document.documentElement]) : new Selection([[selector]], root);\n}","import { EnterElement, select, Selection } from 'd3-selection'\n\nimport { adjustLabel, adjustLabelBox } from './adjust-annotation'\nimport { EnrichedDatum } from './draw-voronoi'\n\nexport function drawCell(selection: Selection<EnterElement, EnrichedDatum, SVGSVGElement, unknown>, imageSize: number) {\n  const cell = selection\n    .append('g')\n    // .attr('clip-path', (d) => `url(#clip-${d.id})`)\n    .each(function (d) {\n      select(this).classed(`cell id-${d.id}`, true)\n    })\n    .style('transform-origin', (d) => `${d.x}px ${d.y}px`)\n\n  const base = cell\n    .append('g')\n    .classed('base', true)\n    .attr('clip-path', (d) => `url(#clip-${d.id})`)\n\n  base\n    .append('foreignObject')\n    .classed('image-fo', true)\n    .attr('x', (d) => d.x - imageSize / 2)\n    .attr('y', (d) => d.y - imageSize / 2)\n    .attr('width', imageSize)\n    .attr('height', imageSize)\n    .append('xhtml:img')\n    .classed('image', true)\n    .attr('xmlns', 'http://www.w3.org/1999/xhtml')\n    .attr('src', (d) => d.imgSrc || '')\n\n  base\n    .append('path')\n    .attr('d', (d) => d.path)\n    .classed('pattern', true)\n    .attr('fill', 'url(#diagonalHatch)')\n  base\n    .append('path')\n    .attr('d', (d) => d.path)\n    .classed('highlight-pattern', true)\n  base\n    .append('path')\n    .attr('d', (d) => d.path)\n    .classed('cell-gap', true)\n\n  base\n    .append('path')\n    .attr('d', (d) => d.path)\n    .classed('cell-border', true)\n\n  // annotation layer\n  const annotation = cell.append('g').classed('annotation', true)\n  annotation\n    .append('circle')\n    .attr('cx', (d) => d.x)\n    .attr('cy', (d) => d.y)\n    .attr('r', 3)\n    .attr('tabindex', -1)\n    .classed('focus-dot', true)\n\n  annotation\n    .append('rect')\n    .classed('label-box', true)\n    .attr('tabindex', (d) => 10 + d.index)\n\n  annotation\n    .append('text')\n    .attr('dy', LABEL_OFFSET_Y || null)\n    .text((d) => d.title || '')\n    .classed('label', true)\n  annotation\n    .append('text')\n    .attr('dy', -1 * LABEL_OFFSET_Y || null)\n    .text((d) => d.price || '')\n    .classed('price', true)\n\n  return cell\n}\n\nexport const LABEL_OFFSET_Y = -22\n\nexport function updateCell(\n  selection: Selection<SVGGElement, EnrichedDatum, SVGSVGElement, unknown>,\n  imageSize: number,\n  width: number\n) {\n  selection.style('transform-origin', (d) => `${d.x}px ${d.y}px`)\n\n  const base = selection.select<SVGGElement>('.base')\n  base\n    .select('.image-fo')\n    .attr('x', (d) => d.x - imageSize / 2)\n    .attr('y', (d) => d.y - imageSize / 2)\n    .attr('width', imageSize)\n    .attr('height', imageSize)\n  base.select('.cell-gap').attr('d', (d) => d.path)\n  base.select('.pattern').attr('d', (d) => d.path)\n  base.select('.highlight-pattern').attr('d', (d) => d.path)\n  base.select('.cell-border').attr('d', (d) => d.path)\n\n  const annotation = selection.select<SVGGElement>('.annotation')\n  annotation\n    .select('circle')\n    .attr('cx', (d) => d.x)\n    .attr('cy', (d) => d.y)\n    .attr('y', (d) => d.y)\n  annotation.each(function (d) {\n    adjustLabel(d, this, width)\n    adjustLabelBox(d, this)\n  })\n\n  return selection\n}\n","import { select } from 'd3-selection'\n\nimport { LABEL_OFFSET_Y } from './draw-cell'\nimport { EnrichedDatum } from './draw-voronoi'\n\nexport function adjustLabelBox(d: EnrichedDatum, cell: SVGGElement) {\n  const box = select(cell).select<SVGTextElement>('.label')?.node()?.getBBox()\n  if (box) {\n    const paddingX = 9\n    const paddingY = 5\n    const boxStart = box.x - paddingX\n    const boxWidth = box.width + paddingX * 2\n    const boxHeight = box.height + paddingY * 2\n    select(cell)\n      .select('.label-box')\n      .attr('rx', 2)\n      .attr('x', boxStart)\n      .attr('y', d.y + LABEL_OFFSET_Y - boxHeight / 2)\n      .attr('width', boxWidth)\n      .attr('height', boxHeight)\n  }\n}\n\nexport function adjustLabel(d: EnrichedDatum, cell: SVGGElement, width: number) {\n  const label = select(cell).select('.label')\n  label\n    .attr('x', () => {\n      const titleSpace = (d.title.length / 2) * 7 + 22\n\n      const min = titleSpace\n      const max = width - titleSpace\n      return Math.min(Math.max(d.x, min), max)\n    })\n    .attr('y', d.y)\n}\n","import { Voronoi } from 'd3-delaunay'\nimport { select, Selection, BaseType } from 'd3-selection'\nimport { FocusEvent } from 'react'\n\nimport { VoronoiChartDatum } from '../../../projects/use-projects-chart-data'\nimport { PointWithPath } from '../use-voronoi-model'\nimport { drawCell, updateCell } from './draw-cell'\nimport { VoronoiOptions } from './voronoi-actions'\n\nexport type EnrichedDatum = VoronoiChartDatum & PointWithPath\n\nexport type VoronoiDrawProps = {\n  svg: Selection<SVGSVGElement, unknown, null, undefined>\n  data: EnrichedDatum[]\n  options: VoronoiOptions\n  voronoi: Voronoi<EnrichedDatum>\n  onHover: (slug: string) => void\n  onClick: (slug: string) => void\n  onMouseLeave: () => void\n}\n\nexport function drawVoronoi({ svg, data, options: opts, voronoi, onHover, onClick, onMouseLeave }: VoronoiDrawProps) {\n  svg\n    .select('defs')\n    .selectAll<d3.BaseType, EnrichedDatum>('clipPath')\n    .data(data, (d) => String(d.id))\n    .join(\n      (enter) => {\n        const defG = enter.append('g').each(function (d) {\n          select(this).classed(`defs-cell`, true)\n        })\n        defG\n          .append('clipPath')\n          .attr('id', (d) => `clip-${d.id}`)\n          .attr('fill', 'white')\n          .append('path')\n          .classed('defs-path', true)\n          .attr('d', (d) => d.path)\n        return defG\n      },\n      (update) => update.select('clipPath path').attr('d', (d) => d.path)\n    )\n\n  drawContentLayer(svg, data, opts)\n\n  svg\n    .selectAll('.bounds')\n    .data([voronoi.renderBounds()])\n    .join('path')\n    .attr('d', (d) => d)\n    .classed('bounds', true)\n\n  svg\n    .selectAll<SVGGElement, EnrichedDatum>('.hover-cell')\n    .data(data, (d) => String(d.id))\n    .join(\n      (enter) => {\n        const cell = enter.append('g').each(function (d) {\n          select(this).classed(`hover-cell`, true)\n        })\n        cell\n          .append('path')\n          .attr('d', (d) => d.path)\n          .attr('fill', 'transparent')\n          .classed('hover-border', true)\n\n        return cell\n      },\n      (update) => {\n        update.select('.hover-border').attr('d', (d) => d.path)\n        return update\n      }\n    )\n\n  svg.on('keyup', (e: KeyboardEvent) => {\n    if (e.code === 'Space') {\n      const activeElement = select<BaseType, EnrichedDatum | null>(document.activeElement)\n      const activeElementSlug = activeElement?.datum()?.slug\n      if (activeElementSlug) {\n        onClick(activeElementSlug)\n      }\n    }\n  })\n\n  svg.selectAll<SVGPathElement, EnrichedDatum>('.hover-border').on('mouseenter', function (e: MouseEvent, d) {\n    if (svg.selectAll('.cell.exposed').empty() && !svg.node()!.contains(document.activeElement)) {\n      onHover(d.slug)\n    }\n  })\n\n  svg.selectAll('.label-box').on('focus', function (e: FocusEvent<SVGElement>) {\n    const datum = select<SVGElement, EnrichedDatum>(e.target).datum()\n    if (!svg.selectAll('.exposed').empty()) {\n      onClick(datum.slug)\n    } else {\n      onHover(datum.slug)\n    }\n  })\n\n  svg.selectAll<SVGGElement, EnrichedDatum>('.hover-cell').on('click', function (e: MouseEvent, d) {\n    e.stopPropagation()\n    const isExposed = select(this).classed('exposed')\n    if (d.slug && !isExposed) {\n      onClick(d.slug)\n    }\n  })\n\n  svg.on('mouseleave', onMouseLeave)\n}\n\nexport function drawContentLayer(\n  sel: Selection<SVGSVGElement, unknown, any, undefined>,\n  data: EnrichedDatum[],\n  options: Pick<VoronoiOptions, 'imageSize' | 'width'>\n) {\n  sel\n    .selectAll<SVGGElement, EnrichedDatum>('.cell')\n    .data(data)\n    .join(\n      (enter) => drawCell(enter, options.imageSize),\n      (update) => updateCell(update, options.imageSize, options.width)\n    )\n}\n","import * as d3 from 'd3-selection'\n\nimport { EnrichedDatum } from './draw-voronoi'\n\nexport type Dimensions = { width: number; height: number }\nexport type Padding = {\n  top: number\n  right: number\n  bottom: number\n  left: number\n}\n\nexport type VoronoiOptions = {\n  height: number\n  width: number\n  imageSize: number\n}\n\nexport type SetExposedCellFn = (id: string | null) => void\n\nexport const restore = (svgNode: SVGSVGElement) => () => {\n  const svg = d3.select(svgNode)\n  if (!svg.classed('expose-view')) {\n    svg.selectAll<SVGPathElement, EnrichedDatum>(`.cell`).classed('hover-selected exposed', false)\n  }\n}\n\nexport const hoverCell = (svgNode: SVGSVGElement) => (hoveredSlug: string) => {\n  const svg = d3.select(svgNode)\n  svg.selectAll<SVGPathElement, EnrichedDatum>(`.cell`).classed('hover-selected', (d) => d.slug === hoveredSlug)\n}\n\nexport const highlightCellsByAreaId = (svgNode: SVGSVGElement) => (highlightId: string | null) => {\n  const svg = d3.select(svgNode)\n  svg.selectAll<SVGGElement, EnrichedDatum>('.cell').each(function (d) {\n    const cellG = d3.select(this)\n    const highlightPath = cellG.select('.highlight-pattern')\n    const shouldHighlight = Boolean(d.areas.find((area) => highlightId && area.id === highlightId))\n\n    if (highlightId && shouldHighlight) {\n      highlightPath.style('fill', `url(#diagonalHatchHighlight-${highlightId})`)\n    }\n\n    cellG.classed('area-highlight', shouldHighlight)\n  })\n  svg.classed('highlight-view', !!highlightId)\n}\n","export var epsilon = 1.1102230246251565e-16;\nexport var splitter = 134217729;\nexport var resulterrbound = (3 + 8 * epsilon) * epsilon; // fast_expansion_sum_zeroelim routine from oritinal code\n\nexport function sum(elen, e, flen, f, h) {\n  var Q, Qnew, hh, bvirt;\n  var enow = e[0];\n  var fnow = f[0];\n  var eindex = 0;\n  var findex = 0;\n\n  if (fnow > enow === fnow > -enow) {\n    Q = enow;\n    enow = e[++eindex];\n  } else {\n    Q = fnow;\n    fnow = f[++findex];\n  }\n\n  var hindex = 0;\n\n  if (eindex < elen && findex < flen) {\n    if (fnow > enow === fnow > -enow) {\n      Qnew = enow + Q;\n      hh = Q - (Qnew - enow);\n      enow = e[++eindex];\n    } else {\n      Qnew = fnow + Q;\n      hh = Q - (Qnew - fnow);\n      fnow = f[++findex];\n    }\n\n    Q = Qnew;\n\n    if (hh !== 0) {\n      h[hindex++] = hh;\n    }\n\n    while (eindex < elen && findex < flen) {\n      if (fnow > enow === fnow > -enow) {\n        Qnew = Q + enow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (enow - bvirt);\n        enow = e[++eindex];\n      } else {\n        Qnew = Q + fnow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n        fnow = f[++findex];\n      }\n\n      Q = Qnew;\n\n      if (hh !== 0) {\n        h[hindex++] = hh;\n      }\n    }\n  }\n\n  while (eindex < elen) {\n    Qnew = Q + enow;\n    bvirt = Qnew - Q;\n    hh = Q - (Qnew - bvirt) + (enow - bvirt);\n    enow = e[++eindex];\n    Q = Qnew;\n\n    if (hh !== 0) {\n      h[hindex++] = hh;\n    }\n  }\n\n  while (findex < flen) {\n    Qnew = Q + fnow;\n    bvirt = Qnew - Q;\n    hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n    fnow = f[++findex];\n    Q = Qnew;\n\n    if (hh !== 0) {\n      h[hindex++] = hh;\n    }\n  }\n\n  if (Q !== 0 || hindex === 0) {\n    h[hindex++] = Q;\n  }\n\n  return hindex;\n}\nexport function sum_three(alen, a, blen, b, clen, c, tmp, out) {\n  return sum(sum(alen, a, blen, b, tmp), tmp, clen, c, out);\n} // scale_expansion_zeroelim routine from oritinal code\n\nexport function scale(elen, e, b, h) {\n  var Q, sum, hh, product1, product0;\n  var bvirt, c, ahi, alo, bhi, blo;\n  c = splitter * b;\n  bhi = c - (c - b);\n  blo = b - bhi;\n  var enow = e[0];\n  Q = enow * b;\n  c = splitter * enow;\n  ahi = c - (c - enow);\n  alo = enow - ahi;\n  hh = alo * blo - (Q - ahi * bhi - alo * bhi - ahi * blo);\n  var hindex = 0;\n\n  if (hh !== 0) {\n    h[hindex++] = hh;\n  }\n\n  for (var i = 1; i < elen; i++) {\n    enow = e[i];\n    product1 = enow * b;\n    c = splitter * enow;\n    ahi = c - (c - enow);\n    alo = enow - ahi;\n    product0 = alo * blo - (product1 - ahi * bhi - alo * bhi - ahi * blo);\n    sum = Q + product0;\n    bvirt = sum - Q;\n    hh = Q - (sum - bvirt) + (product0 - bvirt);\n\n    if (hh !== 0) {\n      h[hindex++] = hh;\n    }\n\n    Q = product1 + sum;\n    hh = sum - (Q - product1);\n\n    if (hh !== 0) {\n      h[hindex++] = hh;\n    }\n  }\n\n  if (Q !== 0 || hindex === 0) {\n    h[hindex++] = Q;\n  }\n\n  return hindex;\n}\nexport function negate(elen, e) {\n  for (var i = 0; i < elen; i++) {\n    e[i] = -e[i];\n  }\n\n  return elen;\n}\nexport function estimate(elen, e) {\n  var Q = e[0];\n\n  for (var i = 1; i < elen; i++) {\n    Q += e[i];\n  }\n\n  return Q;\n}\nexport function vec(n) {\n  return new Float64Array(n);\n}","import { epsilon, splitter, resulterrbound, estimate, vec, sum } from './util.js';\nvar ccwerrboundA = (3 + 16 * epsilon) * epsilon;\nvar ccwerrboundB = (2 + 12 * epsilon) * epsilon;\nvar ccwerrboundC = (9 + 64 * epsilon) * epsilon * epsilon;\nvar B = vec(4);\nvar C1 = vec(8);\nvar C2 = vec(12);\nvar D = vec(16);\nvar u = vec(4);\n\nfunction orient2dadapt(ax, ay, bx, by, cx, cy, detsum) {\n  var acxtail, acytail, bcxtail, bcytail;\n\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n  var acx = ax - cx;\n  var bcx = bx - cx;\n  var acy = ay - cy;\n  var bcy = by - cy;\n  s1 = acx * bcy;\n  c = splitter * acx;\n  ahi = c - (c - acx);\n  alo = acx - ahi;\n  c = splitter * bcy;\n  bhi = c - (c - bcy);\n  blo = bcy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = acy * bcx;\n  c = splitter * acy;\n  ahi = c - (c - acy);\n  alo = acy - ahi;\n  c = splitter * bcx;\n  bhi = c - (c - bcx);\n  blo = bcx - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  B[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  B[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  B[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  B[3] = u3;\n  var det = estimate(4, B);\n  var errbound = ccwerrboundB * detsum;\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  bvirt = ax - acx;\n  acxtail = ax - (acx + bvirt) + (bvirt - cx);\n  bvirt = bx - bcx;\n  bcxtail = bx - (bcx + bvirt) + (bvirt - cx);\n  bvirt = ay - acy;\n  acytail = ay - (acy + bvirt) + (bvirt - cy);\n  bvirt = by - bcy;\n  bcytail = by - (bcy + bvirt) + (bvirt - cy);\n\n  if (acxtail === 0 && acytail === 0 && bcxtail === 0 && bcytail === 0) {\n    return det;\n  }\n\n  errbound = ccwerrboundC * detsum + resulterrbound * Math.abs(det);\n  det += acx * bcytail + bcy * acxtail - (acy * bcxtail + bcx * acytail);\n  if (det >= errbound || -det >= errbound) return det;\n  s1 = acxtail * bcy;\n  c = splitter * acxtail;\n  ahi = c - (c - acxtail);\n  alo = acxtail - ahi;\n  c = splitter * bcy;\n  bhi = c - (c - bcy);\n  blo = bcy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = acytail * bcx;\n  c = splitter * acytail;\n  ahi = c - (c - acytail);\n  alo = acytail - ahi;\n  c = splitter * bcx;\n  bhi = c - (c - bcx);\n  blo = bcx - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  u[3] = u3;\n  var C1len = sum(4, B, 4, u, C1);\n  s1 = acx * bcytail;\n  c = splitter * acx;\n  ahi = c - (c - acx);\n  alo = acx - ahi;\n  c = splitter * bcytail;\n  bhi = c - (c - bcytail);\n  blo = bcytail - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = acy * bcxtail;\n  c = splitter * acy;\n  ahi = c - (c - acy);\n  alo = acy - ahi;\n  c = splitter * bcxtail;\n  bhi = c - (c - bcxtail);\n  blo = bcxtail - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  u[3] = u3;\n  var C2len = sum(C1len, C1, 4, u, C2);\n  s1 = acxtail * bcytail;\n  c = splitter * acxtail;\n  ahi = c - (c - acxtail);\n  alo = acxtail - ahi;\n  c = splitter * bcytail;\n  bhi = c - (c - bcytail);\n  blo = bcytail - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = acytail * bcxtail;\n  c = splitter * acytail;\n  ahi = c - (c - acytail);\n  alo = acytail - ahi;\n  c = splitter * bcxtail;\n  bhi = c - (c - bcxtail);\n  blo = bcxtail - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  u[3] = u3;\n  var Dlen = sum(C2len, C2, 4, u, D);\n  return D[Dlen - 1];\n}\n\nexport function orient2d(ax, ay, bx, by, cx, cy) {\n  var detleft = (ay - cy) * (bx - cx);\n  var detright = (ax - cx) * (by - cy);\n  var det = detleft - detright;\n  if (detleft === 0 || detright === 0 || detleft > 0 !== detright > 0) return det;\n  var detsum = Math.abs(detleft + detright);\n  if (Math.abs(det) >= ccwerrboundA * detsum) return det;\n  return -orient2dadapt(ax, ay, bx, by, cx, cy, detsum);\n}\nexport function orient2dfast(ax, ay, bx, by, cx, cy) {\n  return (ay - cy) * (bx - cx) - (ax - cx) * (by - cy);\n}","import { epsilon, splitter, resulterrbound, estimate, vec, sum, scale } from './util.js';\nvar o3derrboundA = (7 + 56 * epsilon) * epsilon;\nvar o3derrboundB = (3 + 28 * epsilon) * epsilon;\nvar o3derrboundC = (26 + 288 * epsilon) * epsilon * epsilon;\nvar bc = vec(4);\nvar ca = vec(4);\nvar ab = vec(4);\nvar at_b = vec(4);\nvar at_c = vec(4);\nvar bt_c = vec(4);\nvar bt_a = vec(4);\nvar ct_a = vec(4);\nvar ct_b = vec(4);\nvar bct = vec(8);\nvar cat = vec(8);\nvar abt = vec(8);\nvar u = vec(4);\n\nvar _8 = vec(8);\n\nvar _8b = vec(8);\n\nvar _16 = vec(8);\n\nvar _12 = vec(12);\n\nvar fin = vec(192);\nvar fin2 = vec(192);\n\nfunction finadd(finlen, alen, a) {\n  finlen = sum(finlen, fin, alen, a, fin2);\n  var tmp = fin;\n  fin = fin2;\n  fin2 = tmp;\n  return finlen;\n}\n\nfunction tailinit(xtail, ytail, ax, ay, bx, by, a, b) {\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, t1, t0, u3, negate;\n\n  if (xtail === 0) {\n    if (ytail === 0) {\n      a[0] = 0;\n      b[0] = 0;\n      return 1;\n    } else {\n      negate = -ytail;\n      s1 = negate * ax;\n      c = splitter * negate;\n      ahi = c - (c - negate);\n      alo = negate - ahi;\n      c = splitter * ax;\n      bhi = c - (c - ax);\n      blo = ax - bhi;\n      a[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      a[1] = s1;\n      s1 = ytail * bx;\n      c = splitter * ytail;\n      ahi = c - (c - ytail);\n      alo = ytail - ahi;\n      c = splitter * bx;\n      bhi = c - (c - bx);\n      blo = bx - bhi;\n      b[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      b[1] = s1;\n      return 2;\n    }\n  } else {\n    if (ytail === 0) {\n      s1 = xtail * ay;\n      c = splitter * xtail;\n      ahi = c - (c - xtail);\n      alo = xtail - ahi;\n      c = splitter * ay;\n      bhi = c - (c - ay);\n      blo = ay - bhi;\n      a[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      a[1] = s1;\n      negate = -xtail;\n      s1 = negate * by;\n      c = splitter * negate;\n      ahi = c - (c - negate);\n      alo = negate - ahi;\n      c = splitter * by;\n      bhi = c - (c - by);\n      blo = by - bhi;\n      b[0] = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      b[1] = s1;\n      return 2;\n    } else {\n      s1 = xtail * ay;\n      c = splitter * xtail;\n      ahi = c - (c - xtail);\n      alo = xtail - ahi;\n      c = splitter * ay;\n      bhi = c - (c - ay);\n      blo = ay - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = ytail * ax;\n      c = splitter * ytail;\n      ahi = c - (c - ytail);\n      alo = ytail - ahi;\n      c = splitter * ax;\n      bhi = c - (c - ax);\n      blo = ax - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      a[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      a[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      a[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      a[3] = u3;\n      s1 = ytail * bx;\n      c = splitter * ytail;\n      ahi = c - (c - ytail);\n      alo = ytail - ahi;\n      c = splitter * bx;\n      bhi = c - (c - bx);\n      blo = bx - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = xtail * by;\n      c = splitter * xtail;\n      ahi = c - (c - xtail);\n      alo = xtail - ahi;\n      c = splitter * by;\n      bhi = c - (c - by);\n      blo = by - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      b[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      b[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      b[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      b[3] = u3;\n      return 4;\n    }\n  }\n}\n\nfunction tailadd(finlen, a, b, k, z) {\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, u3;\n\n  s1 = a * b;\n  c = splitter * a;\n  ahi = c - (c - a);\n  alo = a - ahi;\n  c = splitter * b;\n  bhi = c - (c - b);\n  blo = b - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  c = splitter * k;\n  bhi = c - (c - k);\n  blo = k - bhi;\n  _i = s0 * k;\n  c = splitter * s0;\n  ahi = c - (c - s0);\n  alo = s0 - ahi;\n  u[0] = alo * blo - (_i - ahi * bhi - alo * bhi - ahi * blo);\n  _j = s1 * k;\n  c = splitter * s1;\n  ahi = c - (c - s1);\n  alo = s1 - ahi;\n  _0 = alo * blo - (_j - ahi * bhi - alo * bhi - ahi * blo);\n  _k = _i + _0;\n  bvirt = _k - _i;\n  u[1] = _i - (_k - bvirt) + (_0 - bvirt);\n  u3 = _j + _k;\n  u[2] = _k - (u3 - _j);\n  u[3] = u3;\n  finlen = finadd(finlen, 4, u);\n\n  if (z !== 0) {\n    c = splitter * z;\n    bhi = c - (c - z);\n    blo = z - bhi;\n    _i = s0 * z;\n    c = splitter * s0;\n    ahi = c - (c - s0);\n    alo = s0 - ahi;\n    u[0] = alo * blo - (_i - ahi * bhi - alo * bhi - ahi * blo);\n    _j = s1 * z;\n    c = splitter * s1;\n    ahi = c - (c - s1);\n    alo = s1 - ahi;\n    _0 = alo * blo - (_j - ahi * bhi - alo * bhi - ahi * blo);\n    _k = _i + _0;\n    bvirt = _k - _i;\n    u[1] = _i - (_k - bvirt) + (_0 - bvirt);\n    u3 = _j + _k;\n    u[2] = _k - (u3 - _j);\n    u[3] = u3;\n    finlen = finadd(finlen, 4, u);\n  }\n\n  return finlen;\n}\n\nfunction orient3dadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, permanent) {\n  var finlen;\n  var adxtail, bdxtail, cdxtail;\n  var adytail, bdytail, cdytail;\n  var adztail, bdztail, cdztail;\n\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _k, _0, s1, s0, t1, t0, u3;\n\n  var adx = ax - dx;\n  var bdx = bx - dx;\n  var cdx = cx - dx;\n  var ady = ay - dy;\n  var bdy = by - dy;\n  var cdy = cy - dy;\n  var adz = az - dz;\n  var bdz = bz - dz;\n  var cdz = cz - dz;\n  s1 = bdx * cdy;\n  c = splitter * bdx;\n  ahi = c - (c - bdx);\n  alo = bdx - ahi;\n  c = splitter * cdy;\n  bhi = c - (c - cdy);\n  blo = cdy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = cdx * bdy;\n  c = splitter * cdx;\n  ahi = c - (c - cdx);\n  alo = cdx - ahi;\n  c = splitter * bdy;\n  bhi = c - (c - bdy);\n  blo = bdy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  bc[3] = u3;\n  s1 = cdx * ady;\n  c = splitter * cdx;\n  ahi = c - (c - cdx);\n  alo = cdx - ahi;\n  c = splitter * ady;\n  bhi = c - (c - ady);\n  blo = ady - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = adx * cdy;\n  c = splitter * adx;\n  ahi = c - (c - adx);\n  alo = adx - ahi;\n  c = splitter * cdy;\n  bhi = c - (c - cdy);\n  blo = cdy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ca[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ca[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ca[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ca[3] = u3;\n  s1 = adx * bdy;\n  c = splitter * adx;\n  ahi = c - (c - adx);\n  alo = adx - ahi;\n  c = splitter * bdy;\n  bhi = c - (c - bdy);\n  blo = bdy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = bdx * ady;\n  c = splitter * bdx;\n  ahi = c - (c - bdx);\n  alo = bdx - ahi;\n  c = splitter * ady;\n  bhi = c - (c - ady);\n  blo = ady - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ab[3] = u3;\n  finlen = sum(sum(scale(4, bc, adz, _8), _8, scale(4, ca, bdz, _8b), _8b, _16), _16, scale(4, ab, cdz, _8), _8, fin);\n  var det = estimate(finlen, fin);\n  var errbound = o3derrboundB * permanent;\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  bvirt = ax - adx;\n  adxtail = ax - (adx + bvirt) + (bvirt - dx);\n  bvirt = bx - bdx;\n  bdxtail = bx - (bdx + bvirt) + (bvirt - dx);\n  bvirt = cx - cdx;\n  cdxtail = cx - (cdx + bvirt) + (bvirt - dx);\n  bvirt = ay - ady;\n  adytail = ay - (ady + bvirt) + (bvirt - dy);\n  bvirt = by - bdy;\n  bdytail = by - (bdy + bvirt) + (bvirt - dy);\n  bvirt = cy - cdy;\n  cdytail = cy - (cdy + bvirt) + (bvirt - dy);\n  bvirt = az - adz;\n  adztail = az - (adz + bvirt) + (bvirt - dz);\n  bvirt = bz - bdz;\n  bdztail = bz - (bdz + bvirt) + (bvirt - dz);\n  bvirt = cz - cdz;\n  cdztail = cz - (cdz + bvirt) + (bvirt - dz);\n\n  if (adxtail === 0 && bdxtail === 0 && cdxtail === 0 && adytail === 0 && bdytail === 0 && cdytail === 0 && adztail === 0 && bdztail === 0 && cdztail === 0) {\n    return det;\n  }\n\n  errbound = o3derrboundC * permanent + resulterrbound * Math.abs(det);\n  det += adz * (bdx * cdytail + cdy * bdxtail - (bdy * cdxtail + cdx * bdytail)) + adztail * (bdx * cdy - bdy * cdx) + bdz * (cdx * adytail + ady * cdxtail - (cdy * adxtail + adx * cdytail)) + bdztail * (cdx * ady - cdy * adx) + cdz * (adx * bdytail + bdy * adxtail - (ady * bdxtail + bdx * adytail)) + cdztail * (adx * bdy - ady * bdx);\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  var at_len = tailinit(adxtail, adytail, bdx, bdy, cdx, cdy, at_b, at_c);\n  var bt_len = tailinit(bdxtail, bdytail, cdx, cdy, adx, ady, bt_c, bt_a);\n  var ct_len = tailinit(cdxtail, cdytail, adx, ady, bdx, bdy, ct_a, ct_b);\n  var bctlen = sum(bt_len, bt_c, ct_len, ct_b, bct);\n  finlen = finadd(finlen, scale(bctlen, bct, adz, _16), _16);\n  var catlen = sum(ct_len, ct_a, at_len, at_c, cat);\n  finlen = finadd(finlen, scale(catlen, cat, bdz, _16), _16);\n  var abtlen = sum(at_len, at_b, bt_len, bt_a, abt);\n  finlen = finadd(finlen, scale(abtlen, abt, cdz, _16), _16);\n\n  if (adztail !== 0) {\n    finlen = finadd(finlen, scale(4, bc, adztail, _12), _12);\n    finlen = finadd(finlen, scale(bctlen, bct, adztail, _16), _16);\n  }\n\n  if (bdztail !== 0) {\n    finlen = finadd(finlen, scale(4, ca, bdztail, _12), _12);\n    finlen = finadd(finlen, scale(catlen, cat, bdztail, _16), _16);\n  }\n\n  if (cdztail !== 0) {\n    finlen = finadd(finlen, scale(4, ab, cdztail, _12), _12);\n    finlen = finadd(finlen, scale(abtlen, abt, cdztail, _16), _16);\n  }\n\n  if (adxtail !== 0) {\n    if (bdytail !== 0) {\n      finlen = tailadd(finlen, adxtail, bdytail, cdz, cdztail);\n    }\n\n    if (cdytail !== 0) {\n      finlen = tailadd(finlen, -adxtail, cdytail, bdz, bdztail);\n    }\n  }\n\n  if (bdxtail !== 0) {\n    if (cdytail !== 0) {\n      finlen = tailadd(finlen, bdxtail, cdytail, adz, adztail);\n    }\n\n    if (adytail !== 0) {\n      finlen = tailadd(finlen, -bdxtail, adytail, cdz, cdztail);\n    }\n  }\n\n  if (cdxtail !== 0) {\n    if (adytail !== 0) {\n      finlen = tailadd(finlen, cdxtail, adytail, bdz, bdztail);\n    }\n\n    if (bdytail !== 0) {\n      finlen = tailadd(finlen, -cdxtail, bdytail, adz, adztail);\n    }\n  }\n\n  return fin[finlen - 1];\n}\n\nexport function orient3d(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz) {\n  var adx = ax - dx;\n  var bdx = bx - dx;\n  var cdx = cx - dx;\n  var ady = ay - dy;\n  var bdy = by - dy;\n  var cdy = cy - dy;\n  var adz = az - dz;\n  var bdz = bz - dz;\n  var cdz = cz - dz;\n  var bdxcdy = bdx * cdy;\n  var cdxbdy = cdx * bdy;\n  var cdxady = cdx * ady;\n  var adxcdy = adx * cdy;\n  var adxbdy = adx * bdy;\n  var bdxady = bdx * ady;\n  var det = adz * (bdxcdy - cdxbdy) + bdz * (cdxady - adxcdy) + cdz * (adxbdy - bdxady);\n  var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz) + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz) + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz);\n  var errbound = o3derrboundA * permanent;\n\n  if (det > errbound || -det > errbound) {\n    return det;\n  }\n\n  return orient3dadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, permanent);\n}\nexport function orient3dfast(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz) {\n  var adx = ax - dx;\n  var bdx = bx - dx;\n  var cdx = cx - dx;\n  var ady = ay - dy;\n  var bdy = by - dy;\n  var cdy = cy - dy;\n  var adz = az - dz;\n  var bdz = bz - dz;\n  var cdz = cz - dz;\n  return adx * (bdy * cdz - bdz * cdy) + bdx * (cdy * adz - cdz * ady) + cdx * (ady * bdz - adz * bdy);\n}","import { epsilon, splitter, resulterrbound, estimate, vec, sum, sum_three, scale } from './util.js';\nvar iccerrboundA = (10 + 96 * epsilon) * epsilon;\nvar iccerrboundB = (4 + 48 * epsilon) * epsilon;\nvar iccerrboundC = (44 + 576 * epsilon) * epsilon * epsilon;\nvar bc = vec(4);\nvar ca = vec(4);\nvar ab = vec(4);\nvar aa = vec(4);\nvar bb = vec(4);\nvar cc = vec(4);\nvar u = vec(4);\nvar v = vec(4);\nvar axtbc = vec(8);\nvar aytbc = vec(8);\nvar bxtca = vec(8);\nvar bytca = vec(8);\nvar cxtab = vec(8);\nvar cytab = vec(8);\nvar abt = vec(8);\nvar bct = vec(8);\nvar cat = vec(8);\nvar abtt = vec(4);\nvar bctt = vec(4);\nvar catt = vec(4);\n\nvar _8 = vec(8);\n\nvar _16 = vec(16);\n\nvar _16b = vec(16);\n\nvar _16c = vec(16);\n\nvar _32 = vec(32);\n\nvar _32b = vec(32);\n\nvar _48 = vec(48);\n\nvar _64 = vec(64);\n\nvar fin = vec(1152);\nvar fin2 = vec(1152);\n\nfunction finadd(finlen, a, alen) {\n  finlen = sum(finlen, fin, a, alen, fin2);\n  var tmp = fin;\n  fin = fin2;\n  fin2 = tmp;\n  return finlen;\n}\n\nfunction incircleadapt(ax, ay, bx, by, cx, cy, dx, dy, permanent) {\n  var finlen;\n  var adxtail, bdxtail, cdxtail, adytail, bdytail, cdytail;\n  var axtbclen, aytbclen, bxtcalen, bytcalen, cxtablen, cytablen;\n  var abtlen, bctlen, catlen;\n  var abttlen, bcttlen, cattlen;\n  var n1, n0;\n\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n  var adx = ax - dx;\n  var bdx = bx - dx;\n  var cdx = cx - dx;\n  var ady = ay - dy;\n  var bdy = by - dy;\n  var cdy = cy - dy;\n  s1 = bdx * cdy;\n  c = splitter * bdx;\n  ahi = c - (c - bdx);\n  alo = bdx - ahi;\n  c = splitter * cdy;\n  bhi = c - (c - cdy);\n  blo = cdy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = cdx * bdy;\n  c = splitter * cdx;\n  ahi = c - (c - cdx);\n  alo = cdx - ahi;\n  c = splitter * bdy;\n  bhi = c - (c - bdy);\n  blo = bdy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  bc[3] = u3;\n  s1 = cdx * ady;\n  c = splitter * cdx;\n  ahi = c - (c - cdx);\n  alo = cdx - ahi;\n  c = splitter * ady;\n  bhi = c - (c - ady);\n  blo = ady - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = adx * cdy;\n  c = splitter * adx;\n  ahi = c - (c - adx);\n  alo = adx - ahi;\n  c = splitter * cdy;\n  bhi = c - (c - cdy);\n  blo = cdy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ca[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ca[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ca[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ca[3] = u3;\n  s1 = adx * bdy;\n  c = splitter * adx;\n  ahi = c - (c - adx);\n  alo = adx - ahi;\n  c = splitter * bdy;\n  bhi = c - (c - bdy);\n  blo = bdy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = bdx * ady;\n  c = splitter * bdx;\n  ahi = c - (c - bdx);\n  alo = bdx - ahi;\n  c = splitter * ady;\n  bhi = c - (c - ady);\n  blo = ady - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ab[3] = u3;\n  finlen = sum(sum(sum(scale(scale(4, bc, adx, _8), _8, adx, _16), _16, scale(scale(4, bc, ady, _8), _8, ady, _16b), _16b, _32), _32, sum(scale(scale(4, ca, bdx, _8), _8, bdx, _16), _16, scale(scale(4, ca, bdy, _8), _8, bdy, _16b), _16b, _32b), _32b, _64), _64, sum(scale(scale(4, ab, cdx, _8), _8, cdx, _16), _16, scale(scale(4, ab, cdy, _8), _8, cdy, _16b), _16b, _32), _32, fin);\n  var det = estimate(finlen, fin);\n  var errbound = iccerrboundB * permanent;\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  bvirt = ax - adx;\n  adxtail = ax - (adx + bvirt) + (bvirt - dx);\n  bvirt = ay - ady;\n  adytail = ay - (ady + bvirt) + (bvirt - dy);\n  bvirt = bx - bdx;\n  bdxtail = bx - (bdx + bvirt) + (bvirt - dx);\n  bvirt = by - bdy;\n  bdytail = by - (bdy + bvirt) + (bvirt - dy);\n  bvirt = cx - cdx;\n  cdxtail = cx - (cdx + bvirt) + (bvirt - dx);\n  bvirt = cy - cdy;\n  cdytail = cy - (cdy + bvirt) + (bvirt - dy);\n\n  if (adxtail === 0 && bdxtail === 0 && cdxtail === 0 && adytail === 0 && bdytail === 0 && cdytail === 0) {\n    return det;\n  }\n\n  errbound = iccerrboundC * permanent + resulterrbound * Math.abs(det);\n  det += (adx * adx + ady * ady) * (bdx * cdytail + cdy * bdxtail - (bdy * cdxtail + cdx * bdytail)) + 2 * (adx * adxtail + ady * adytail) * (bdx * cdy - bdy * cdx) + ((bdx * bdx + bdy * bdy) * (cdx * adytail + ady * cdxtail - (cdy * adxtail + adx * cdytail)) + 2 * (bdx * bdxtail + bdy * bdytail) * (cdx * ady - cdy * adx)) + ((cdx * cdx + cdy * cdy) * (adx * bdytail + bdy * adxtail - (ady * bdxtail + bdx * adytail)) + 2 * (cdx * cdxtail + cdy * cdytail) * (adx * bdy - ady * bdx));\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  if (bdxtail !== 0 || bdytail !== 0 || cdxtail !== 0 || cdytail !== 0) {\n    s1 = adx * adx;\n    c = splitter * adx;\n    ahi = c - (c - adx);\n    alo = adx - ahi;\n    s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n    t1 = ady * ady;\n    c = splitter * ady;\n    ahi = c - (c - ady);\n    alo = ady - ahi;\n    t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n    _i = s0 + t0;\n    bvirt = _i - s0;\n    aa[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 + t1;\n    bvirt = _i - _0;\n    aa[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    aa[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    aa[3] = u3;\n  }\n\n  if (cdxtail !== 0 || cdytail !== 0 || adxtail !== 0 || adytail !== 0) {\n    s1 = bdx * bdx;\n    c = splitter * bdx;\n    ahi = c - (c - bdx);\n    alo = bdx - ahi;\n    s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n    t1 = bdy * bdy;\n    c = splitter * bdy;\n    ahi = c - (c - bdy);\n    alo = bdy - ahi;\n    t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n    _i = s0 + t0;\n    bvirt = _i - s0;\n    bb[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 + t1;\n    bvirt = _i - _0;\n    bb[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    bb[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    bb[3] = u3;\n  }\n\n  if (adxtail !== 0 || adytail !== 0 || bdxtail !== 0 || bdytail !== 0) {\n    s1 = cdx * cdx;\n    c = splitter * cdx;\n    ahi = c - (c - cdx);\n    alo = cdx - ahi;\n    s0 = alo * alo - (s1 - ahi * ahi - (ahi + ahi) * alo);\n    t1 = cdy * cdy;\n    c = splitter * cdy;\n    ahi = c - (c - cdy);\n    alo = cdy - ahi;\n    t0 = alo * alo - (t1 - ahi * ahi - (ahi + ahi) * alo);\n    _i = s0 + t0;\n    bvirt = _i - s0;\n    cc[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 + t1;\n    bvirt = _i - _0;\n    cc[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    cc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    cc[3] = u3;\n  }\n\n  if (adxtail !== 0) {\n    axtbclen = scale(4, bc, adxtail, axtbc);\n    finlen = finadd(finlen, sum_three(scale(axtbclen, axtbc, 2 * adx, _16), _16, scale(scale(4, cc, adxtail, _8), _8, bdy, _16b), _16b, scale(scale(4, bb, adxtail, _8), _8, -cdy, _16c), _16c, _32, _48), _48);\n  }\n\n  if (adytail !== 0) {\n    aytbclen = scale(4, bc, adytail, aytbc);\n    finlen = finadd(finlen, sum_three(scale(aytbclen, aytbc, 2 * ady, _16), _16, scale(scale(4, bb, adytail, _8), _8, cdx, _16b), _16b, scale(scale(4, cc, adytail, _8), _8, -bdx, _16c), _16c, _32, _48), _48);\n  }\n\n  if (bdxtail !== 0) {\n    bxtcalen = scale(4, ca, bdxtail, bxtca);\n    finlen = finadd(finlen, sum_three(scale(bxtcalen, bxtca, 2 * bdx, _16), _16, scale(scale(4, aa, bdxtail, _8), _8, cdy, _16b), _16b, scale(scale(4, cc, bdxtail, _8), _8, -ady, _16c), _16c, _32, _48), _48);\n  }\n\n  if (bdytail !== 0) {\n    bytcalen = scale(4, ca, bdytail, bytca);\n    finlen = finadd(finlen, sum_three(scale(bytcalen, bytca, 2 * bdy, _16), _16, scale(scale(4, cc, bdytail, _8), _8, adx, _16b), _16b, scale(scale(4, aa, bdytail, _8), _8, -cdx, _16c), _16c, _32, _48), _48);\n  }\n\n  if (cdxtail !== 0) {\n    cxtablen = scale(4, ab, cdxtail, cxtab);\n    finlen = finadd(finlen, sum_three(scale(cxtablen, cxtab, 2 * cdx, _16), _16, scale(scale(4, bb, cdxtail, _8), _8, ady, _16b), _16b, scale(scale(4, aa, cdxtail, _8), _8, -bdy, _16c), _16c, _32, _48), _48);\n  }\n\n  if (cdytail !== 0) {\n    cytablen = scale(4, ab, cdytail, cytab);\n    finlen = finadd(finlen, sum_three(scale(cytablen, cytab, 2 * cdy, _16), _16, scale(scale(4, aa, cdytail, _8), _8, bdx, _16b), _16b, scale(scale(4, bb, cdytail, _8), _8, -adx, _16c), _16c, _32, _48), _48);\n  }\n\n  if (adxtail !== 0 || adytail !== 0) {\n    if (bdxtail !== 0 || bdytail !== 0 || cdxtail !== 0 || cdytail !== 0) {\n      s1 = bdxtail * cdy;\n      c = splitter * bdxtail;\n      ahi = c - (c - bdxtail);\n      alo = bdxtail - ahi;\n      c = splitter * cdy;\n      bhi = c - (c - cdy);\n      blo = cdy - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = bdx * cdytail;\n      c = splitter * bdx;\n      ahi = c - (c - bdx);\n      alo = bdx - ahi;\n      c = splitter * cdytail;\n      bhi = c - (c - cdytail);\n      blo = cdytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 + t0;\n      bvirt = _i - s0;\n      u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 + t1;\n      bvirt = _i - _0;\n      u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      u[3] = u3;\n      s1 = cdxtail * -bdy;\n      c = splitter * cdxtail;\n      ahi = c - (c - cdxtail);\n      alo = cdxtail - ahi;\n      c = splitter * -bdy;\n      bhi = c - (c - -bdy);\n      blo = -bdy - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = cdx * -bdytail;\n      c = splitter * cdx;\n      ahi = c - (c - cdx);\n      alo = cdx - ahi;\n      c = splitter * -bdytail;\n      bhi = c - (c - -bdytail);\n      blo = -bdytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 + t0;\n      bvirt = _i - s0;\n      v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 + t1;\n      bvirt = _i - _0;\n      v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      v[3] = u3;\n      bctlen = sum(4, u, 4, v, bct);\n      s1 = bdxtail * cdytail;\n      c = splitter * bdxtail;\n      ahi = c - (c - bdxtail);\n      alo = bdxtail - ahi;\n      c = splitter * cdytail;\n      bhi = c - (c - cdytail);\n      blo = cdytail - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = cdxtail * bdytail;\n      c = splitter * cdxtail;\n      ahi = c - (c - cdxtail);\n      alo = cdxtail - ahi;\n      c = splitter * bdytail;\n      bhi = c - (c - bdytail);\n      blo = bdytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      bctt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      bctt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      bctt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      bctt[3] = u3;\n      bcttlen = 4;\n    } else {\n      bct[0] = 0;\n      bctlen = 1;\n      bctt[0] = 0;\n      bcttlen = 1;\n    }\n\n    if (adxtail !== 0) {\n      var len = scale(bctlen, bct, adxtail, _16c);\n      finlen = finadd(finlen, sum(scale(axtbclen, axtbc, adxtail, _16), _16, scale(len, _16c, 2 * adx, _32), _32, _48), _48);\n      var len2 = scale(bcttlen, bctt, adxtail, _8);\n      finlen = finadd(finlen, sum_three(scale(len2, _8, 2 * adx, _16), _16, scale(len2, _8, adxtail, _16b), _16b, scale(len, _16c, adxtail, _32), _32, _32b, _64), _64);\n\n      if (bdytail !== 0) {\n        finlen = finadd(finlen, scale(scale(4, cc, adxtail, _8), _8, bdytail, _16), _16);\n      }\n\n      if (cdytail !== 0) {\n        finlen = finadd(finlen, scale(scale(4, bb, -adxtail, _8), _8, cdytail, _16), _16);\n      }\n    }\n\n    if (adytail !== 0) {\n      var _len = scale(bctlen, bct, adytail, _16c);\n\n      finlen = finadd(finlen, sum(scale(aytbclen, aytbc, adytail, _16), _16, scale(_len, _16c, 2 * ady, _32), _32, _48), _48);\n\n      var _len2 = scale(bcttlen, bctt, adytail, _8);\n\n      finlen = finadd(finlen, sum_three(scale(_len2, _8, 2 * ady, _16), _16, scale(_len2, _8, adytail, _16b), _16b, scale(_len, _16c, adytail, _32), _32, _32b, _64), _64);\n    }\n  }\n\n  if (bdxtail !== 0 || bdytail !== 0) {\n    if (cdxtail !== 0 || cdytail !== 0 || adxtail !== 0 || adytail !== 0) {\n      s1 = cdxtail * ady;\n      c = splitter * cdxtail;\n      ahi = c - (c - cdxtail);\n      alo = cdxtail - ahi;\n      c = splitter * ady;\n      bhi = c - (c - ady);\n      blo = ady - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = cdx * adytail;\n      c = splitter * cdx;\n      ahi = c - (c - cdx);\n      alo = cdx - ahi;\n      c = splitter * adytail;\n      bhi = c - (c - adytail);\n      blo = adytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 + t0;\n      bvirt = _i - s0;\n      u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 + t1;\n      bvirt = _i - _0;\n      u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      u[3] = u3;\n      n1 = -cdy;\n      n0 = -cdytail;\n      s1 = adxtail * n1;\n      c = splitter * adxtail;\n      ahi = c - (c - adxtail);\n      alo = adxtail - ahi;\n      c = splitter * n1;\n      bhi = c - (c - n1);\n      blo = n1 - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = adx * n0;\n      c = splitter * adx;\n      ahi = c - (c - adx);\n      alo = adx - ahi;\n      c = splitter * n0;\n      bhi = c - (c - n0);\n      blo = n0 - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 + t0;\n      bvirt = _i - s0;\n      v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 + t1;\n      bvirt = _i - _0;\n      v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      v[3] = u3;\n      catlen = sum(4, u, 4, v, cat);\n      s1 = cdxtail * adytail;\n      c = splitter * cdxtail;\n      ahi = c - (c - cdxtail);\n      alo = cdxtail - ahi;\n      c = splitter * adytail;\n      bhi = c - (c - adytail);\n      blo = adytail - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = adxtail * cdytail;\n      c = splitter * adxtail;\n      ahi = c - (c - adxtail);\n      alo = adxtail - ahi;\n      c = splitter * cdytail;\n      bhi = c - (c - cdytail);\n      blo = cdytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      catt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      catt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      catt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      catt[3] = u3;\n      cattlen = 4;\n    } else {\n      cat[0] = 0;\n      catlen = 1;\n      catt[0] = 0;\n      cattlen = 1;\n    }\n\n    if (bdxtail !== 0) {\n      var _len3 = scale(catlen, cat, bdxtail, _16c);\n\n      finlen = finadd(finlen, sum(scale(bxtcalen, bxtca, bdxtail, _16), _16, scale(_len3, _16c, 2 * bdx, _32), _32, _48), _48);\n\n      var _len4 = scale(cattlen, catt, bdxtail, _8);\n\n      finlen = finadd(finlen, sum_three(scale(_len4, _8, 2 * bdx, _16), _16, scale(_len4, _8, bdxtail, _16b), _16b, scale(_len3, _16c, bdxtail, _32), _32, _32b, _64), _64);\n\n      if (cdytail !== 0) {\n        finlen = finadd(finlen, scale(scale(4, aa, bdxtail, _8), _8, cdytail, _16), _16);\n      }\n\n      if (adytail !== 0) {\n        finlen = finadd(finlen, scale(scale(4, cc, -bdxtail, _8), _8, adytail, _16), _16);\n      }\n    }\n\n    if (bdytail !== 0) {\n      var _len5 = scale(catlen, cat, bdytail, _16c);\n\n      finlen = finadd(finlen, sum(scale(bytcalen, bytca, bdytail, _16), _16, scale(_len5, _16c, 2 * bdy, _32), _32, _48), _48);\n\n      var _len6 = scale(cattlen, catt, bdytail, _8);\n\n      finlen = finadd(finlen, sum_three(scale(_len6, _8, 2 * bdy, _16), _16, scale(_len6, _8, bdytail, _16b), _16b, scale(_len5, _16c, bdytail, _32), _32, _32b, _64), _64);\n    }\n  }\n\n  if (cdxtail !== 0 || cdytail !== 0) {\n    if (adxtail !== 0 || adytail !== 0 || bdxtail !== 0 || bdytail !== 0) {\n      s1 = adxtail * bdy;\n      c = splitter * adxtail;\n      ahi = c - (c - adxtail);\n      alo = adxtail - ahi;\n      c = splitter * bdy;\n      bhi = c - (c - bdy);\n      blo = bdy - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = adx * bdytail;\n      c = splitter * adx;\n      ahi = c - (c - adx);\n      alo = adx - ahi;\n      c = splitter * bdytail;\n      bhi = c - (c - bdytail);\n      blo = bdytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 + t0;\n      bvirt = _i - s0;\n      u[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 + t1;\n      bvirt = _i - _0;\n      u[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      u[3] = u3;\n      n1 = -ady;\n      n0 = -adytail;\n      s1 = bdxtail * n1;\n      c = splitter * bdxtail;\n      ahi = c - (c - bdxtail);\n      alo = bdxtail - ahi;\n      c = splitter * n1;\n      bhi = c - (c - n1);\n      blo = n1 - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = bdx * n0;\n      c = splitter * bdx;\n      ahi = c - (c - bdx);\n      alo = bdx - ahi;\n      c = splitter * n0;\n      bhi = c - (c - n0);\n      blo = n0 - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 + t0;\n      bvirt = _i - s0;\n      v[0] = s0 - (_i - bvirt) + (t0 - bvirt);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 + t1;\n      bvirt = _i - _0;\n      v[1] = _0 - (_i - bvirt) + (t1 - bvirt);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      v[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      v[3] = u3;\n      abtlen = sum(4, u, 4, v, abt);\n      s1 = adxtail * bdytail;\n      c = splitter * adxtail;\n      ahi = c - (c - adxtail);\n      alo = adxtail - ahi;\n      c = splitter * bdytail;\n      bhi = c - (c - bdytail);\n      blo = bdytail - bhi;\n      s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n      t1 = bdxtail * adytail;\n      c = splitter * bdxtail;\n      ahi = c - (c - bdxtail);\n      alo = bdxtail - ahi;\n      c = splitter * adytail;\n      bhi = c - (c - adytail);\n      blo = adytail - bhi;\n      t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n      _i = s0 - t0;\n      bvirt = s0 - _i;\n      abtt[0] = s0 - (_i + bvirt) + (bvirt - t0);\n      _j = s1 + _i;\n      bvirt = _j - s1;\n      _0 = s1 - (_j - bvirt) + (_i - bvirt);\n      _i = _0 - t1;\n      bvirt = _0 - _i;\n      abtt[1] = _0 - (_i + bvirt) + (bvirt - t1);\n      u3 = _j + _i;\n      bvirt = u3 - _j;\n      abtt[2] = _j - (u3 - bvirt) + (_i - bvirt);\n      abtt[3] = u3;\n      abttlen = 4;\n    } else {\n      abt[0] = 0;\n      abtlen = 1;\n      abtt[0] = 0;\n      abttlen = 1;\n    }\n\n    if (cdxtail !== 0) {\n      var _len7 = scale(abtlen, abt, cdxtail, _16c);\n\n      finlen = finadd(finlen, sum(scale(cxtablen, cxtab, cdxtail, _16), _16, scale(_len7, _16c, 2 * cdx, _32), _32, _48), _48);\n\n      var _len8 = scale(abttlen, abtt, cdxtail, _8);\n\n      finlen = finadd(finlen, sum_three(scale(_len8, _8, 2 * cdx, _16), _16, scale(_len8, _8, cdxtail, _16b), _16b, scale(_len7, _16c, cdxtail, _32), _32, _32b, _64), _64);\n\n      if (adytail !== 0) {\n        finlen = finadd(finlen, scale(scale(4, bb, cdxtail, _8), _8, adytail, _16), _16);\n      }\n\n      if (bdytail !== 0) {\n        finlen = finadd(finlen, scale(scale(4, aa, -cdxtail, _8), _8, bdytail, _16), _16);\n      }\n    }\n\n    if (cdytail !== 0) {\n      var _len9 = scale(abtlen, abt, cdytail, _16c);\n\n      finlen = finadd(finlen, sum(scale(cytablen, cytab, cdytail, _16), _16, scale(_len9, _16c, 2 * cdy, _32), _32, _48), _48);\n\n      var _len10 = scale(abttlen, abtt, cdytail, _8);\n\n      finlen = finadd(finlen, sum_three(scale(_len10, _8, 2 * cdy, _16), _16, scale(_len10, _8, cdytail, _16b), _16b, scale(_len9, _16c, cdytail, _32), _32, _32b, _64), _64);\n    }\n  }\n\n  return fin[finlen - 1];\n}\n\nexport function incircle(ax, ay, bx, by, cx, cy, dx, dy) {\n  var adx = ax - dx;\n  var bdx = bx - dx;\n  var cdx = cx - dx;\n  var ady = ay - dy;\n  var bdy = by - dy;\n  var cdy = cy - dy;\n  var bdxcdy = bdx * cdy;\n  var cdxbdy = cdx * bdy;\n  var alift = adx * adx + ady * ady;\n  var cdxady = cdx * ady;\n  var adxcdy = adx * cdy;\n  var blift = bdx * bdx + bdy * bdy;\n  var adxbdy = adx * bdy;\n  var bdxady = bdx * ady;\n  var clift = cdx * cdx + cdy * cdy;\n  var det = alift * (bdxcdy - cdxbdy) + blift * (cdxady - adxcdy) + clift * (adxbdy - bdxady);\n  var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * alift + (Math.abs(cdxady) + Math.abs(adxcdy)) * blift + (Math.abs(adxbdy) + Math.abs(bdxady)) * clift;\n  var errbound = iccerrboundA * permanent;\n\n  if (det > errbound || -det > errbound) {\n    return det;\n  }\n\n  return incircleadapt(ax, ay, bx, by, cx, cy, dx, dy, permanent);\n}\nexport function incirclefast(ax, ay, bx, by, cx, cy, dx, dy) {\n  var adx = ax - dx;\n  var ady = ay - dy;\n  var bdx = bx - dx;\n  var bdy = by - dy;\n  var cdx = cx - dx;\n  var cdy = cy - dy;\n  var abdet = adx * bdy - bdx * ady;\n  var bcdet = bdx * cdy - cdx * bdy;\n  var cadet = cdx * ady - adx * cdy;\n  var alift = adx * adx + ady * ady;\n  var blift = bdx * bdx + bdy * bdy;\n  var clift = cdx * cdx + cdy * cdy;\n  return alift * bcdet + blift * cadet + clift * abdet;\n}","import { epsilon, splitter, resulterrbound, estimate, vec, sum, sum_three, scale, negate } from './util.js';\nvar isperrboundA = (16 + 224 * epsilon) * epsilon;\nvar isperrboundB = (5 + 72 * epsilon) * epsilon;\nvar isperrboundC = (71 + 1408 * epsilon) * epsilon * epsilon;\nvar ab = vec(4);\nvar bc = vec(4);\nvar cd = vec(4);\nvar de = vec(4);\nvar ea = vec(4);\nvar ac = vec(4);\nvar bd = vec(4);\nvar ce = vec(4);\nvar da = vec(4);\nvar eb = vec(4);\nvar abc = vec(24);\nvar bcd = vec(24);\nvar cde = vec(24);\nvar dea = vec(24);\nvar eab = vec(24);\nvar abd = vec(24);\nvar bce = vec(24);\nvar cda = vec(24);\nvar deb = vec(24);\nvar eac = vec(24);\nvar adet = vec(1152);\nvar bdet = vec(1152);\nvar cdet = vec(1152);\nvar ddet = vec(1152);\nvar edet = vec(1152);\nvar abdet = vec(2304);\nvar cddet = vec(2304);\nvar cdedet = vec(3456);\nvar deter = vec(5760);\n\nvar _8 = vec(8);\n\nvar _8b = vec(8);\n\nvar _8c = vec(8);\n\nvar _16 = vec(16);\n\nvar _24 = vec(24);\n\nvar _48 = vec(48);\n\nvar _48b = vec(48);\n\nvar _96 = vec(96);\n\nvar _192 = vec(192);\n\nvar _384x = vec(384);\n\nvar _384y = vec(384);\n\nvar _384z = vec(384);\n\nvar _768 = vec(768);\n\nfunction sum_three_scale(a, b, c, az, bz, cz, out) {\n  return sum_three(scale(4, a, az, _8), _8, scale(4, b, bz, _8b), _8b, scale(4, c, cz, _8c), _8c, _16, out);\n}\n\nfunction liftexact(alen, a, blen, b, clen, c, dlen, d, x, y, z, out) {\n  var len = sum(sum(alen, a, blen, b, _48), _48, negate(sum(clen, c, dlen, d, _48b), _48b), _48b, _96);\n  return sum_three(scale(scale(len, _96, x, _192), _192, x, _384x), _384x, scale(scale(len, _96, y, _192), _192, y, _384y), _384y, scale(scale(len, _96, z, _192), _192, z, _384z), _384z, _768, out);\n}\n\nfunction insphereexact(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez) {\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n  s1 = ax * by;\n  c = splitter * ax;\n  ahi = c - (c - ax);\n  alo = ax - ahi;\n  c = splitter * by;\n  bhi = c - (c - by);\n  blo = by - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = bx * ay;\n  c = splitter * bx;\n  ahi = c - (c - bx);\n  alo = bx - ahi;\n  c = splitter * ay;\n  bhi = c - (c - ay);\n  blo = ay - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ab[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ab[3] = u3;\n  s1 = bx * cy;\n  c = splitter * bx;\n  ahi = c - (c - bx);\n  alo = bx - ahi;\n  c = splitter * cy;\n  bhi = c - (c - cy);\n  blo = cy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = cx * by;\n  c = splitter * cx;\n  ahi = c - (c - cx);\n  alo = cx - ahi;\n  c = splitter * by;\n  bhi = c - (c - by);\n  blo = by - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  bc[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  bc[3] = u3;\n  s1 = cx * dy;\n  c = splitter * cx;\n  ahi = c - (c - cx);\n  alo = cx - ahi;\n  c = splitter * dy;\n  bhi = c - (c - dy);\n  blo = dy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = dx * cy;\n  c = splitter * dx;\n  ahi = c - (c - dx);\n  alo = dx - ahi;\n  c = splitter * cy;\n  bhi = c - (c - cy);\n  blo = cy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  cd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  cd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  cd[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  cd[3] = u3;\n  s1 = dx * ey;\n  c = splitter * dx;\n  ahi = c - (c - dx);\n  alo = dx - ahi;\n  c = splitter * ey;\n  bhi = c - (c - ey);\n  blo = ey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = ex * dy;\n  c = splitter * ex;\n  ahi = c - (c - ex);\n  alo = ex - ahi;\n  c = splitter * dy;\n  bhi = c - (c - dy);\n  blo = dy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  de[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  de[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  de[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  de[3] = u3;\n  s1 = ex * ay;\n  c = splitter * ex;\n  ahi = c - (c - ex);\n  alo = ex - ahi;\n  c = splitter * ay;\n  bhi = c - (c - ay);\n  blo = ay - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = ax * ey;\n  c = splitter * ax;\n  ahi = c - (c - ax);\n  alo = ax - ahi;\n  c = splitter * ey;\n  bhi = c - (c - ey);\n  blo = ey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ea[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ea[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ea[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ea[3] = u3;\n  s1 = ax * cy;\n  c = splitter * ax;\n  ahi = c - (c - ax);\n  alo = ax - ahi;\n  c = splitter * cy;\n  bhi = c - (c - cy);\n  blo = cy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = cx * ay;\n  c = splitter * cx;\n  ahi = c - (c - cx);\n  alo = cx - ahi;\n  c = splitter * ay;\n  bhi = c - (c - ay);\n  blo = ay - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ac[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ac[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ac[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ac[3] = u3;\n  s1 = bx * dy;\n  c = splitter * bx;\n  ahi = c - (c - bx);\n  alo = bx - ahi;\n  c = splitter * dy;\n  bhi = c - (c - dy);\n  blo = dy - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = dx * by;\n  c = splitter * dx;\n  ahi = c - (c - dx);\n  alo = dx - ahi;\n  c = splitter * by;\n  bhi = c - (c - by);\n  blo = by - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  bd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  bd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  bd[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  bd[3] = u3;\n  s1 = cx * ey;\n  c = splitter * cx;\n  ahi = c - (c - cx);\n  alo = cx - ahi;\n  c = splitter * ey;\n  bhi = c - (c - ey);\n  blo = ey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = ex * cy;\n  c = splitter * ex;\n  ahi = c - (c - ex);\n  alo = ex - ahi;\n  c = splitter * cy;\n  bhi = c - (c - cy);\n  blo = cy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ce[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ce[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  ce[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  ce[3] = u3;\n  s1 = dx * ay;\n  c = splitter * dx;\n  ahi = c - (c - dx);\n  alo = dx - ahi;\n  c = splitter * ay;\n  bhi = c - (c - ay);\n  blo = ay - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = ax * dy;\n  c = splitter * ax;\n  ahi = c - (c - ax);\n  alo = ax - ahi;\n  c = splitter * dy;\n  bhi = c - (c - dy);\n  blo = dy - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  da[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  da[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  da[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  da[3] = u3;\n  s1 = ex * by;\n  c = splitter * ex;\n  ahi = c - (c - ex);\n  alo = ex - ahi;\n  c = splitter * by;\n  bhi = c - (c - by);\n  blo = by - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = bx * ey;\n  c = splitter * bx;\n  ahi = c - (c - bx);\n  alo = bx - ahi;\n  c = splitter * ey;\n  bhi = c - (c - ey);\n  blo = ey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  eb[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  eb[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  u3 = _j + _i;\n  bvirt = u3 - _j;\n  eb[2] = _j - (u3 - bvirt) + (_i - bvirt);\n  eb[3] = u3;\n  var abclen = sum_three_scale(ab, bc, ac, cz, az, -bz, abc);\n  var bcdlen = sum_three_scale(bc, cd, bd, dz, bz, -cz, bcd);\n  var cdelen = sum_three_scale(cd, de, ce, ez, cz, -dz, cde);\n  var dealen = sum_three_scale(de, ea, da, az, dz, -ez, dea);\n  var eablen = sum_three_scale(ea, ab, eb, bz, ez, -az, eab);\n  var abdlen = sum_three_scale(ab, bd, da, dz, az, bz, abd);\n  var bcelen = sum_three_scale(bc, ce, eb, ez, bz, cz, bce);\n  var cdalen = sum_three_scale(cd, da, ac, az, cz, dz, cda);\n  var deblen = sum_three_scale(de, eb, bd, bz, dz, ez, deb);\n  var eaclen = sum_three_scale(ea, ac, ce, cz, ez, az, eac);\n  var deterlen = sum_three(liftexact(cdelen, cde, bcelen, bce, deblen, deb, bcdlen, bcd, ax, ay, az, adet), adet, liftexact(dealen, dea, cdalen, cda, eaclen, eac, cdelen, cde, bx, by, bz, bdet), bdet, sum_three(liftexact(eablen, eab, deblen, deb, abdlen, abd, dealen, dea, cx, cy, cz, cdet), cdet, liftexact(abclen, abc, eaclen, eac, bcelen, bce, eablen, eab, dx, dy, dz, ddet), ddet, liftexact(bcdlen, bcd, abdlen, abd, cdalen, cda, abclen, abc, ex, ey, ez, edet), edet, cddet, cdedet), cdedet, abdet, deter);\n  return deter[deterlen - 1];\n}\n\nvar xdet = vec(96);\nvar ydet = vec(96);\nvar zdet = vec(96);\nvar fin = vec(1152);\n\nfunction liftadapt(a, b, c, az, bz, cz, x, y, z, out) {\n  var len = sum_three_scale(a, b, c, az, bz, cz, _24);\n  return sum_three(scale(scale(len, _24, x, _48), _48, x, xdet), xdet, scale(scale(len, _24, y, _48), _48, y, ydet), ydet, scale(scale(len, _24, z, _48), _48, z, zdet), zdet, _192, out);\n}\n\nfunction insphereadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez, permanent) {\n  var ab3, bc3, cd3, da3, ac3, bd3;\n  var aextail, bextail, cextail, dextail;\n  var aeytail, beytail, ceytail, deytail;\n  var aeztail, beztail, ceztail, deztail;\n\n  var bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0;\n\n  var aex = ax - ex;\n  var bex = bx - ex;\n  var cex = cx - ex;\n  var dex = dx - ex;\n  var aey = ay - ey;\n  var bey = by - ey;\n  var cey = cy - ey;\n  var dey = dy - ey;\n  var aez = az - ez;\n  var bez = bz - ez;\n  var cez = cz - ez;\n  var dez = dz - ez;\n  s1 = aex * bey;\n  c = splitter * aex;\n  ahi = c - (c - aex);\n  alo = aex - ahi;\n  c = splitter * bey;\n  bhi = c - (c - bey);\n  blo = bey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = bex * aey;\n  c = splitter * bex;\n  ahi = c - (c - bex);\n  alo = bex - ahi;\n  c = splitter * aey;\n  bhi = c - (c - aey);\n  blo = aey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ab[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ab[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  ab3 = _j + _i;\n  bvirt = ab3 - _j;\n  ab[2] = _j - (ab3 - bvirt) + (_i - bvirt);\n  ab[3] = ab3;\n  s1 = bex * cey;\n  c = splitter * bex;\n  ahi = c - (c - bex);\n  alo = bex - ahi;\n  c = splitter * cey;\n  bhi = c - (c - cey);\n  blo = cey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = cex * bey;\n  c = splitter * cex;\n  ahi = c - (c - cex);\n  alo = cex - ahi;\n  c = splitter * bey;\n  bhi = c - (c - bey);\n  blo = bey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  bc[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  bc[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  bc3 = _j + _i;\n  bvirt = bc3 - _j;\n  bc[2] = _j - (bc3 - bvirt) + (_i - bvirt);\n  bc[3] = bc3;\n  s1 = cex * dey;\n  c = splitter * cex;\n  ahi = c - (c - cex);\n  alo = cex - ahi;\n  c = splitter * dey;\n  bhi = c - (c - dey);\n  blo = dey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = dex * cey;\n  c = splitter * dex;\n  ahi = c - (c - dex);\n  alo = dex - ahi;\n  c = splitter * cey;\n  bhi = c - (c - cey);\n  blo = cey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  cd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  cd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  cd3 = _j + _i;\n  bvirt = cd3 - _j;\n  cd[2] = _j - (cd3 - bvirt) + (_i - bvirt);\n  cd[3] = cd3;\n  s1 = dex * aey;\n  c = splitter * dex;\n  ahi = c - (c - dex);\n  alo = dex - ahi;\n  c = splitter * aey;\n  bhi = c - (c - aey);\n  blo = aey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = aex * dey;\n  c = splitter * aex;\n  ahi = c - (c - aex);\n  alo = aex - ahi;\n  c = splitter * dey;\n  bhi = c - (c - dey);\n  blo = dey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  da[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  da[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  da3 = _j + _i;\n  bvirt = da3 - _j;\n  da[2] = _j - (da3 - bvirt) + (_i - bvirt);\n  da[3] = da3;\n  s1 = aex * cey;\n  c = splitter * aex;\n  ahi = c - (c - aex);\n  alo = aex - ahi;\n  c = splitter * cey;\n  bhi = c - (c - cey);\n  blo = cey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = cex * aey;\n  c = splitter * cex;\n  ahi = c - (c - cex);\n  alo = cex - ahi;\n  c = splitter * aey;\n  bhi = c - (c - aey);\n  blo = aey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  ac[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  ac[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  ac3 = _j + _i;\n  bvirt = ac3 - _j;\n  ac[2] = _j - (ac3 - bvirt) + (_i - bvirt);\n  ac[3] = ac3;\n  s1 = bex * dey;\n  c = splitter * bex;\n  ahi = c - (c - bex);\n  alo = bex - ahi;\n  c = splitter * dey;\n  bhi = c - (c - dey);\n  blo = dey - bhi;\n  s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n  t1 = dex * bey;\n  c = splitter * dex;\n  ahi = c - (c - dex);\n  alo = dex - ahi;\n  c = splitter * bey;\n  bhi = c - (c - bey);\n  blo = bey - bhi;\n  t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n  _i = s0 - t0;\n  bvirt = s0 - _i;\n  bd[0] = s0 - (_i + bvirt) + (bvirt - t0);\n  _j = s1 + _i;\n  bvirt = _j - s1;\n  _0 = s1 - (_j - bvirt) + (_i - bvirt);\n  _i = _0 - t1;\n  bvirt = _0 - _i;\n  bd[1] = _0 - (_i + bvirt) + (bvirt - t1);\n  bd3 = _j + _i;\n  bvirt = bd3 - _j;\n  bd[2] = _j - (bd3 - bvirt) + (_i - bvirt);\n  bd[3] = bd3;\n  var finlen = sum(sum(negate(liftadapt(bc, cd, bd, dez, bez, -cez, aex, aey, aez, adet), adet), adet, liftadapt(cd, da, ac, aez, cez, dez, bex, bey, bez, bdet), bdet, abdet), abdet, sum(negate(liftadapt(da, ab, bd, bez, dez, aez, cex, cey, cez, cdet), cdet), cdet, liftadapt(ab, bc, ac, cez, aez, -bez, dex, dey, dez, ddet), ddet, cddet), cddet, fin);\n  var det = estimate(finlen, fin);\n  var errbound = isperrboundB * permanent;\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  bvirt = ax - aex;\n  aextail = ax - (aex + bvirt) + (bvirt - ex);\n  bvirt = ay - aey;\n  aeytail = ay - (aey + bvirt) + (bvirt - ey);\n  bvirt = az - aez;\n  aeztail = az - (aez + bvirt) + (bvirt - ez);\n  bvirt = bx - bex;\n  bextail = bx - (bex + bvirt) + (bvirt - ex);\n  bvirt = by - bey;\n  beytail = by - (bey + bvirt) + (bvirt - ey);\n  bvirt = bz - bez;\n  beztail = bz - (bez + bvirt) + (bvirt - ez);\n  bvirt = cx - cex;\n  cextail = cx - (cex + bvirt) + (bvirt - ex);\n  bvirt = cy - cey;\n  ceytail = cy - (cey + bvirt) + (bvirt - ey);\n  bvirt = cz - cez;\n  ceztail = cz - (cez + bvirt) + (bvirt - ez);\n  bvirt = dx - dex;\n  dextail = dx - (dex + bvirt) + (bvirt - ex);\n  bvirt = dy - dey;\n  deytail = dy - (dey + bvirt) + (bvirt - ey);\n  bvirt = dz - dez;\n  deztail = dz - (dez + bvirt) + (bvirt - ez);\n\n  if (aextail === 0 && aeytail === 0 && aeztail === 0 && bextail === 0 && beytail === 0 && beztail === 0 && cextail === 0 && ceytail === 0 && ceztail === 0 && dextail === 0 && deytail === 0 && deztail === 0) {\n    return det;\n  }\n\n  errbound = isperrboundC * permanent + resulterrbound * Math.abs(det);\n  var abeps = aex * beytail + bey * aextail - (aey * bextail + bex * aeytail);\n  var bceps = bex * ceytail + cey * bextail - (bey * cextail + cex * beytail);\n  var cdeps = cex * deytail + dey * cextail - (cey * dextail + dex * ceytail);\n  var daeps = dex * aeytail + aey * dextail - (dey * aextail + aex * deytail);\n  var aceps = aex * ceytail + cey * aextail - (aey * cextail + cex * aeytail);\n  var bdeps = bex * deytail + dey * bextail - (bey * dextail + dex * beytail);\n  det += (bex * bex + bey * bey + bez * bez) * (cez * daeps + dez * aceps + aez * cdeps + (ceztail * da3 + deztail * ac3 + aeztail * cd3)) + (dex * dex + dey * dey + dez * dez) * (aez * bceps - bez * aceps + cez * abeps + (aeztail * bc3 - beztail * ac3 + ceztail * ab3)) - ((aex * aex + aey * aey + aez * aez) * (bez * cdeps - cez * bdeps + dez * bceps + (beztail * cd3 - ceztail * bd3 + deztail * bc3)) + (cex * cex + cey * cey + cez * cez) * (dez * abeps + aez * bdeps + bez * daeps + (deztail * ab3 + aeztail * bd3 + beztail * da3))) + 2 * ((bex * bextail + bey * beytail + bez * beztail) * (cez * da3 + dez * ac3 + aez * cd3) + (dex * dextail + dey * deytail + dez * deztail) * (aez * bc3 - bez * ac3 + cez * ab3) - ((aex * aextail + aey * aeytail + aez * aeztail) * (bez * cd3 - cez * bd3 + dez * bc3) + (cex * cextail + cey * ceytail + cez * ceztail) * (dez * ab3 + aez * bd3 + bez * da3)));\n\n  if (det >= errbound || -det >= errbound) {\n    return det;\n  }\n\n  return insphereexact(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez);\n}\n\nexport function insphere(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez) {\n  var aex = ax - ex;\n  var bex = bx - ex;\n  var cex = cx - ex;\n  var dex = dx - ex;\n  var aey = ay - ey;\n  var bey = by - ey;\n  var cey = cy - ey;\n  var dey = dy - ey;\n  var aez = az - ez;\n  var bez = bz - ez;\n  var cez = cz - ez;\n  var dez = dz - ez;\n  var aexbey = aex * bey;\n  var bexaey = bex * aey;\n  var ab = aexbey - bexaey;\n  var bexcey = bex * cey;\n  var cexbey = cex * bey;\n  var bc = bexcey - cexbey;\n  var cexdey = cex * dey;\n  var dexcey = dex * cey;\n  var cd = cexdey - dexcey;\n  var dexaey = dex * aey;\n  var aexdey = aex * dey;\n  var da = dexaey - aexdey;\n  var aexcey = aex * cey;\n  var cexaey = cex * aey;\n  var ac = aexcey - cexaey;\n  var bexdey = bex * dey;\n  var dexbey = dex * bey;\n  var bd = bexdey - dexbey;\n  var abc = aez * bc - bez * ac + cez * ab;\n  var bcd = bez * cd - cez * bd + dez * bc;\n  var cda = cez * da + dez * ac + aez * cd;\n  var dab = dez * ab + aez * bd + bez * da;\n  var alift = aex * aex + aey * aey + aez * aez;\n  var blift = bex * bex + bey * bey + bez * bez;\n  var clift = cex * cex + cey * cey + cez * cez;\n  var dlift = dex * dex + dey * dey + dez * dez;\n  var det = clift * dab - dlift * abc + (alift * bcd - blift * cda);\n  var aezplus = Math.abs(aez);\n  var bezplus = Math.abs(bez);\n  var cezplus = Math.abs(cez);\n  var dezplus = Math.abs(dez);\n  var aexbeyplus = Math.abs(aexbey);\n  var bexaeyplus = Math.abs(bexaey);\n  var bexceyplus = Math.abs(bexcey);\n  var cexbeyplus = Math.abs(cexbey);\n  var cexdeyplus = Math.abs(cexdey);\n  var dexceyplus = Math.abs(dexcey);\n  var dexaeyplus = Math.abs(dexaey);\n  var aexdeyplus = Math.abs(aexdey);\n  var aexceyplus = Math.abs(aexcey);\n  var cexaeyplus = Math.abs(cexaey);\n  var bexdeyplus = Math.abs(bexdey);\n  var dexbeyplus = Math.abs(dexbey);\n  var permanent = ((cexdeyplus + dexceyplus) * bezplus + (dexbeyplus + bexdeyplus) * cezplus + (bexceyplus + cexbeyplus) * dezplus) * alift + ((dexaeyplus + aexdeyplus) * cezplus + (aexceyplus + cexaeyplus) * dezplus + (cexdeyplus + dexceyplus) * aezplus) * blift + ((aexbeyplus + bexaeyplus) * dezplus + (bexdeyplus + dexbeyplus) * aezplus + (dexaeyplus + aexdeyplus) * bezplus) * clift + ((bexceyplus + cexbeyplus) * aezplus + (cexaeyplus + aexceyplus) * bezplus + (aexbeyplus + bexaeyplus) * cezplus) * dlift;\n  var errbound = isperrboundA * permanent;\n\n  if (det > errbound || -det > errbound) {\n    return det;\n  }\n\n  return -insphereadapt(ax, ay, az, bx, by, bz, cx, cy, cz, dx, dy, dz, ex, ey, ez, permanent);\n}\nexport function inspherefast(pax, pay, paz, pbx, pby, pbz, pcx, pcy, pcz, pdx, pdy, pdz, pex, pey, pez) {\n  var aex = pax - pex;\n  var bex = pbx - pex;\n  var cex = pcx - pex;\n  var dex = pdx - pex;\n  var aey = pay - pey;\n  var bey = pby - pey;\n  var cey = pcy - pey;\n  var dey = pdy - pey;\n  var aez = paz - pez;\n  var bez = pbz - pez;\n  var cez = pcz - pez;\n  var dez = pdz - pez;\n  var ab = aex * bey - bex * aey;\n  var bc = bex * cey - cex * bey;\n  var cd = cex * dey - dex * cey;\n  var da = dex * aey - aex * dey;\n  var ac = aex * cey - cex * aey;\n  var bd = bex * dey - dex * bey;\n  var abc = aez * bc - bez * ac + cez * ab;\n  var bcd = bez * cd - cez * bd + dez * bc;\n  var cda = cez * da + dez * ac + aez * cd;\n  var dab = dez * ab + aez * bd + bez * da;\n  var alift = aex * aex + aey * aey + aez * aez;\n  var blift = bex * bex + bey * bey + bez * bez;\n  var clift = cex * cex + cey * cey + cez * cez;\n  var dlift = dex * dex + dey * dey + dez * dez;\n  return clift * dab - dlift * abc + (alift * bcd - blift * cda);\n}","import _classCallCheck from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nvar EPSILON = Math.pow(2, -52);\nvar EDGE_STACK = new Uint32Array(512);\nimport { orient2d } from 'robust-predicates';\n\nvar Delaunator = /*#__PURE__*/function () {\n  function Delaunator(coords) {\n    _classCallCheck(this, Delaunator);\n\n    var n = coords.length >> 1;\n    if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n    this.coords = coords; // arrays that will store the triangulation graph\n\n    var maxTriangles = Math.max(2 * n - 5, 0);\n    this._triangles = new Uint32Array(maxTriangles * 3);\n    this._halfedges = new Int32Array(maxTriangles * 3); // temporary arrays for tracking the edges of the advancing convex hull\n\n    this._hashSize = Math.ceil(Math.sqrt(n));\n    this._hullPrev = new Uint32Array(n); // edge to prev edge\n\n    this._hullNext = new Uint32Array(n); // edge to next edge\n\n    this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n\n    this._hullHash = new Int32Array(this._hashSize).fill(-1); // angular edge hash\n    // temporary arrays for sorting points\n\n    this._ids = new Uint32Array(n);\n    this._dists = new Float64Array(n);\n    this.update();\n  }\n\n  _createClass(Delaunator, [{\n    key: \"update\",\n    value: function update() {\n      var coords = this.coords,\n          hullPrev = this._hullPrev,\n          hullNext = this._hullNext,\n          hullTri = this._hullTri,\n          hullHash = this._hullHash;\n      var n = coords.length >> 1; // populate an array of point indices; calculate input data bbox\n\n      var minX = Infinity;\n      var minY = Infinity;\n      var maxX = -Infinity;\n      var maxY = -Infinity;\n\n      for (var i = 0; i < n; i++) {\n        var x = coords[2 * i];\n        var y = coords[2 * i + 1];\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n        this._ids[i] = i;\n      }\n\n      var cx = (minX + maxX) / 2;\n      var cy = (minY + maxY) / 2;\n      var minDist = Infinity;\n      var i0, i1, i2; // pick a seed point close to the center\n\n      for (var _i = 0; _i < n; _i++) {\n        var d = dist(cx, cy, coords[2 * _i], coords[2 * _i + 1]);\n\n        if (d < minDist) {\n          i0 = _i;\n          minDist = d;\n        }\n      }\n\n      var i0x = coords[2 * i0];\n      var i0y = coords[2 * i0 + 1];\n      minDist = Infinity; // find the point closest to the seed\n\n      for (var _i2 = 0; _i2 < n; _i2++) {\n        if (_i2 === i0) continue;\n\n        var _d = dist(i0x, i0y, coords[2 * _i2], coords[2 * _i2 + 1]);\n\n        if (_d < minDist && _d > 0) {\n          i1 = _i2;\n          minDist = _d;\n        }\n      }\n\n      var i1x = coords[2 * i1];\n      var i1y = coords[2 * i1 + 1];\n      var minRadius = Infinity; // find the third point which forms the smallest circumcircle with the first two\n\n      for (var _i3 = 0; _i3 < n; _i3++) {\n        if (_i3 === i0 || _i3 === i1) continue;\n        var r = circumradius(i0x, i0y, i1x, i1y, coords[2 * _i3], coords[2 * _i3 + 1]);\n\n        if (r < minRadius) {\n          i2 = _i3;\n          minRadius = r;\n        }\n      }\n\n      var i2x = coords[2 * i2];\n      var i2y = coords[2 * i2 + 1];\n\n      if (minRadius === Infinity) {\n        // order collinear points by dx (or dy if all x are identical)\n        // and return the list as a hull\n        for (var _i4 = 0; _i4 < n; _i4++) {\n          this._dists[_i4] = coords[2 * _i4] - coords[0] || coords[2 * _i4 + 1] - coords[1];\n        }\n\n        quicksort(this._ids, this._dists, 0, n - 1);\n        var hull = new Uint32Array(n);\n        var j = 0;\n\n        for (var _i5 = 0, d0 = -Infinity; _i5 < n; _i5++) {\n          var id = this._ids[_i5];\n\n          if (this._dists[id] > d0) {\n            hull[j++] = id;\n            d0 = this._dists[id];\n          }\n        }\n\n        this.hull = hull.subarray(0, j);\n        this.triangles = new Uint32Array(0);\n        this.halfedges = new Uint32Array(0);\n        return;\n      } // swap the order of the seed points for counter-clockwise orientation\n\n\n      if (orient2d(i0x, i0y, i1x, i1y, i2x, i2y) < 0) {\n        var _i6 = i1;\n        var _x = i1x;\n        var _y = i1y;\n        i1 = i2;\n        i1x = i2x;\n        i1y = i2y;\n        i2 = _i6;\n        i2x = _x;\n        i2y = _y;\n      }\n\n      var center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n      this._cx = center.x;\n      this._cy = center.y;\n\n      for (var _i7 = 0; _i7 < n; _i7++) {\n        this._dists[_i7] = dist(coords[2 * _i7], coords[2 * _i7 + 1], center.x, center.y);\n      } // sort the points by distance from the seed triangle circumcenter\n\n\n      quicksort(this._ids, this._dists, 0, n - 1); // set up the seed triangle as the starting hull\n\n      this._hullStart = i0;\n      var hullSize = 3;\n      hullNext[i0] = hullPrev[i2] = i1;\n      hullNext[i1] = hullPrev[i0] = i2;\n      hullNext[i2] = hullPrev[i1] = i0;\n      hullTri[i0] = 0;\n      hullTri[i1] = 1;\n      hullTri[i2] = 2;\n      hullHash.fill(-1);\n      hullHash[this._hashKey(i0x, i0y)] = i0;\n      hullHash[this._hashKey(i1x, i1y)] = i1;\n      hullHash[this._hashKey(i2x, i2y)] = i2;\n      this.trianglesLen = 0;\n\n      this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n      for (var k = 0, xp, yp; k < this._ids.length; k++) {\n        var _i8 = this._ids[k];\n        var _x2 = coords[2 * _i8];\n        var _y2 = coords[2 * _i8 + 1]; // skip near-duplicate points\n\n        if (k > 0 && Math.abs(_x2 - xp) <= EPSILON && Math.abs(_y2 - yp) <= EPSILON) continue;\n        xp = _x2;\n        yp = _y2; // skip seed triangle points\n\n        if (_i8 === i0 || _i8 === i1 || _i8 === i2) continue; // find a visible edge on the convex hull using edge hash\n\n        var start = 0;\n\n        for (var _j = 0, key = this._hashKey(_x2, _y2); _j < this._hashSize; _j++) {\n          start = hullHash[(key + _j) % this._hashSize];\n          if (start !== -1 && start !== hullNext[start]) break;\n        }\n\n        start = hullPrev[start];\n        var e = start,\n            q = void 0;\n\n        while (q = hullNext[e], orient2d(_x2, _y2, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1]) >= 0) {\n          e = q;\n\n          if (e === start) {\n            e = -1;\n            break;\n          }\n        }\n\n        if (e === -1) continue; // likely a near-duplicate point; skip it\n        // add the first triangle from the point\n\n        var t = this._addTriangle(e, _i8, hullNext[e], -1, -1, hullTri[e]); // recursively flip triangles from the point until they satisfy the Delaunay condition\n\n\n        hullTri[_i8] = this._legalize(t + 2);\n        hullTri[e] = t; // keep track of boundary triangles on the hull\n\n        hullSize++; // walk forward through the hull, adding more triangles and flipping recursively\n\n        var _n = hullNext[e];\n\n        while (q = hullNext[_n], orient2d(_x2, _y2, coords[2 * _n], coords[2 * _n + 1], coords[2 * q], coords[2 * q + 1]) < 0) {\n          t = this._addTriangle(_n, _i8, q, hullTri[_i8], -1, hullTri[_n]);\n          hullTri[_i8] = this._legalize(t + 2);\n          hullNext[_n] = _n; // mark as removed\n\n          hullSize--;\n          _n = q;\n        } // walk backward from the other side, adding more triangles and flipping\n\n\n        if (e === start) {\n          while (q = hullPrev[e], orient2d(_x2, _y2, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1]) < 0) {\n            t = this._addTriangle(q, _i8, e, -1, hullTri[e], hullTri[q]);\n\n            this._legalize(t + 2);\n\n            hullTri[q] = t;\n            hullNext[e] = e; // mark as removed\n\n            hullSize--;\n            e = q;\n          }\n        } // update the hull indices\n\n\n        this._hullStart = hullPrev[_i8] = e;\n        hullNext[e] = hullPrev[_n] = _i8;\n        hullNext[_i8] = _n; // save the two new edges in the hash table\n\n        hullHash[this._hashKey(_x2, _y2)] = _i8;\n        hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n      }\n\n      this.hull = new Uint32Array(hullSize);\n\n      for (var _i9 = 0, _e = this._hullStart; _i9 < hullSize; _i9++) {\n        this.hull[_i9] = _e;\n        _e = hullNext[_e];\n      } // trim typed triangle mesh arrays\n\n\n      this.triangles = this._triangles.subarray(0, this.trianglesLen);\n      this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n  }, {\n    key: \"_hashKey\",\n    value: function _hashKey(x, y) {\n      return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n  }, {\n    key: \"_legalize\",\n    value: function _legalize(a) {\n      var triangles = this._triangles,\n          halfedges = this._halfedges,\n          coords = this.coords;\n      var i = 0;\n      var ar = 0; // recursion eliminated with a fixed-size stack\n\n      while (true) {\n        var b = halfedges[a];\n        /* if the pair of triangles doesn't satisfy the Delaunay condition\n         * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n         * then do the same check/flip recursively for the new pair of triangles\n         *\n         *           pl                    pl\n         *          /||\\                  /  \\\n         *       al/ || \\bl            al/    \\a\n         *        /  ||  \\              /      \\\n         *       /  a||b  \\    flip    /___ar___\\\n         *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n         *        \\  ||  /              \\      /\n         *       ar\\ || /br             b\\    /br\n         *          \\||/                  \\  /\n         *           pr                    pr\n         */\n\n        var a0 = a - a % 3;\n        ar = a0 + (a + 2) % 3;\n\n        if (b === -1) {\n          // convex hull edge\n          if (i === 0) break;\n          a = EDGE_STACK[--i];\n          continue;\n        }\n\n        var b0 = b - b % 3;\n        var al = a0 + (a + 1) % 3;\n        var bl = b0 + (b + 2) % 3;\n        var p0 = triangles[ar];\n        var pr = triangles[a];\n        var pl = triangles[al];\n        var p1 = triangles[bl];\n        var illegal = inCircle(coords[2 * p0], coords[2 * p0 + 1], coords[2 * pr], coords[2 * pr + 1], coords[2 * pl], coords[2 * pl + 1], coords[2 * p1], coords[2 * p1 + 1]);\n\n        if (illegal) {\n          triangles[a] = p1;\n          triangles[b] = p0;\n          var hbl = halfedges[bl]; // edge swapped on the other side of the hull (rare); fix the halfedge reference\n\n          if (hbl === -1) {\n            var e = this._hullStart;\n\n            do {\n              if (this._hullTri[e] === bl) {\n                this._hullTri[e] = a;\n                break;\n              }\n\n              e = this._hullPrev[e];\n            } while (e !== this._hullStart);\n          }\n\n          this._link(a, hbl);\n\n          this._link(b, halfedges[ar]);\n\n          this._link(ar, bl);\n\n          var br = b0 + (b + 1) % 3; // don't worry about hitting the cap: it can only happen on extremely degenerate input\n\n          if (i < EDGE_STACK.length) {\n            EDGE_STACK[i++] = br;\n          }\n        } else {\n          if (i === 0) break;\n          a = EDGE_STACK[--i];\n        }\n      }\n\n      return ar;\n    }\n  }, {\n    key: \"_link\",\n    value: function _link(a, b) {\n      this._halfedges[a] = b;\n      if (b !== -1) this._halfedges[b] = a;\n    } // add a new triangle given vertex indices and adjacent half-edge ids\n\n  }, {\n    key: \"_addTriangle\",\n    value: function _addTriangle(i0, i1, i2, a, b, c) {\n      var t = this.trianglesLen;\n      this._triangles[t] = i0;\n      this._triangles[t + 1] = i1;\n      this._triangles[t + 2] = i2;\n\n      this._link(t, a);\n\n      this._link(t + 1, b);\n\n      this._link(t + 2, c);\n\n      this.trianglesLen += 3;\n      return t;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(points) {\n      var getX = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultGetX;\n      var getY = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultGetY;\n      var n = points.length;\n      var coords = new Float64Array(n * 2);\n\n      for (var i = 0; i < n; i++) {\n        var p = points[i];\n        coords[2 * i] = getX(p);\n        coords[2 * i + 1] = getY(p);\n      }\n\n      return new Delaunator(coords);\n    }\n  }]);\n\n  return Delaunator;\n}(); // monotonically increases with real angle, but doesn't need expensive trigonometry\n\n\nexport { Delaunator as default };\n\nfunction pseudoAngle(dx, dy) {\n  var p = dx / (Math.abs(dx) + Math.abs(dy));\n  return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n  var dx = ax - bx;\n  var dy = ay - by;\n  return dx * dx + dy * dy;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n  var dx = ax - px;\n  var dy = ay - py;\n  var ex = bx - px;\n  var ey = by - py;\n  var fx = cx - px;\n  var fy = cy - py;\n  var ap = dx * dx + dy * dy;\n  var bp = ex * ex + ey * ey;\n  var cp = fx * fx + fy * fy;\n  return dx * (ey * cp - bp * fy) - dy * (ex * cp - bp * fx) + ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n  var dx = bx - ax;\n  var dy = by - ay;\n  var ex = cx - ax;\n  var ey = cy - ay;\n  var bl = dx * dx + dy * dy;\n  var cl = ex * ex + ey * ey;\n  var d = 0.5 / (dx * ey - dy * ex);\n  var x = (ey * bl - dy * cl) * d;\n  var y = (dx * cl - ex * bl) * d;\n  return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n  var dx = bx - ax;\n  var dy = by - ay;\n  var ex = cx - ax;\n  var ey = cy - ay;\n  var bl = dx * dx + dy * dy;\n  var cl = ex * ex + ey * ey;\n  var d = 0.5 / (dx * ey - dy * ex);\n  var x = ax + (ey * bl - dy * cl) * d;\n  var y = ay + (dx * cl - ex * bl) * d;\n  return {\n    x: x,\n    y: y\n  };\n}\n\nfunction quicksort(ids, dists, left, right) {\n  if (right - left <= 20) {\n    for (var i = left + 1; i <= right; i++) {\n      var temp = ids[i];\n      var tempDist = dists[temp];\n      var j = i - 1;\n\n      while (j >= left && dists[ids[j]] > tempDist) {\n        ids[j + 1] = ids[j--];\n      }\n\n      ids[j + 1] = temp;\n    }\n  } else {\n    var median = left + right >> 1;\n\n    var _i10 = left + 1;\n\n    var _j2 = right;\n    swap(ids, median, _i10);\n    if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n    if (dists[ids[_i10]] > dists[ids[right]]) swap(ids, _i10, right);\n    if (dists[ids[left]] > dists[ids[_i10]]) swap(ids, left, _i10);\n    var _temp = ids[_i10];\n    var _tempDist = dists[_temp];\n\n    while (true) {\n      do {\n        _i10++;\n      } while (dists[ids[_i10]] < _tempDist);\n\n      do {\n        _j2--;\n      } while (dists[ids[_j2]] > _tempDist);\n\n      if (_j2 < _i10) break;\n      swap(ids, _i10, _j2);\n    }\n\n    ids[left + 1] = ids[_j2];\n    ids[_j2] = _temp;\n\n    if (right - _i10 + 1 >= _j2 - left) {\n      quicksort(ids, dists, _i10, right);\n      quicksort(ids, dists, left, _j2 - 1);\n    } else {\n      quicksort(ids, dists, left, _j2 - 1);\n      quicksort(ids, dists, _i10, right);\n    }\n  }\n}\n\nfunction swap(arr, i, j) {\n  var tmp = arr[i];\n  arr[i] = arr[j];\n  arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n  return p[0];\n}\n\nfunction defaultGetY(p) {\n  return p[1];\n}","import _classCallCheck from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nvar epsilon = 1e-6;\n\nvar Path = /*#__PURE__*/function () {\n  function Path() {\n    _classCallCheck(this, Path);\n\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n\n    this._ = \"\";\n  }\n\n  _createClass(Path, [{\n    key: \"moveTo\",\n    value: function moveTo(x, y) {\n      this._ += \"M\".concat(this._x0 = this._x1 = +x, \",\").concat(this._y0 = this._y1 = +y);\n    }\n  }, {\n    key: \"closePath\",\n    value: function closePath() {\n      if (this._x1 !== null) {\n        this._x1 = this._x0, this._y1 = this._y0;\n        this._ += \"Z\";\n      }\n    }\n  }, {\n    key: \"lineTo\",\n    value: function lineTo(x, y) {\n      this._ += \"L\".concat(this._x1 = +x, \",\").concat(this._y1 = +y);\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(x, y, r) {\n      x = +x, y = +y, r = +r;\n      var x0 = x + r;\n      var y0 = y;\n      if (r < 0) throw new Error(\"negative radius\");\n      if (this._x1 === null) this._ += \"M\".concat(x0, \",\").concat(y0);else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n      if (!r) return;\n      this._ += \"A\".concat(r, \",\").concat(r, \",0,1,1,\").concat(x - r, \",\").concat(y, \"A\").concat(r, \",\").concat(r, \",0,1,1,\").concat(this._x1 = x0, \",\").concat(this._y1 = y0);\n    }\n  }, {\n    key: \"rect\",\n    value: function rect(x, y, w, h) {\n      this._ += \"M\".concat(this._x0 = this._x1 = +x, \",\").concat(this._y0 = this._y1 = +y, \"h\").concat(+w, \"v\").concat(+h, \"h\").concat(-w, \"Z\");\n    }\n  }, {\n    key: \"value\",\n    value: function value() {\n      return this._ || null;\n    }\n  }]);\n\n  return Path;\n}();\n\nexport { Path as default };","import _classCallCheck from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar Polygon = /*#__PURE__*/function () {\n  function Polygon() {\n    _classCallCheck(this, Polygon);\n\n    this._ = [];\n  }\n\n  _createClass(Polygon, [{\n    key: \"moveTo\",\n    value: function moveTo(x, y) {\n      this._.push([x, y]);\n    }\n  }, {\n    key: \"closePath\",\n    value: function closePath() {\n      this._.push(this._[0].slice());\n    }\n  }, {\n    key: \"lineTo\",\n    value: function lineTo(x, y) {\n      this._.push([x, y]);\n    }\n  }, {\n    key: \"value\",\n    value: function value() {\n      return this._.length ? this._ : null;\n    }\n  }]);\n\n  return Polygon;\n}();\n\nexport { Polygon as default };","import _slicedToArray from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/regenerator/index.js\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nvar Voronoi = /*#__PURE__*/function () {\n  function Voronoi(delaunay) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 960, 500],\n        _ref2 = _slicedToArray(_ref, 4),\n        xmin = _ref2[0],\n        ymin = _ref2[1],\n        xmax = _ref2[2],\n        ymax = _ref2[3];\n\n    _classCallCheck(this, Voronoi);\n\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    this.delaunay = delaunay;\n    this._circumcenters = new Float64Array(delaunay.points.length * 2);\n    this.vectors = new Float64Array(delaunay.points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n\n    this._init();\n  }\n\n  _createClass(Voronoi, [{\n    key: \"update\",\n    value: function update() {\n      this.delaunay.update();\n\n      this._init();\n\n      return this;\n    }\n  }, {\n    key: \"_init\",\n    value: function _init() {\n      var _this$delaunay = this.delaunay,\n          points = _this$delaunay.points,\n          hull = _this$delaunay.hull,\n          triangles = _this$delaunay.triangles,\n          vectors = this.vectors; // Compute circumcenters.\n\n      var circumcenters = this.circumcenters = this._circumcenters.subarray(0, triangles.length / 3 * 2);\n\n      for (var i = 0, j = 0, n = triangles.length, x, y; i < n; i += 3, j += 2) {\n        var t1 = triangles[i] * 2;\n        var t2 = triangles[i + 1] * 2;\n        var t3 = triangles[i + 2] * 2;\n        var _x = points[t1];\n        var _y = points[t1 + 1];\n        var x2 = points[t2];\n        var y2 = points[t2 + 1];\n        var x3 = points[t3];\n        var y3 = points[t3 + 1];\n        var dx = x2 - _x;\n        var dy = y2 - _y;\n        var ex = x3 - _x;\n        var ey = y3 - _y;\n        var ab = (dx * ey - dy * ex) * 2;\n\n        if (Math.abs(ab) < 1e-9) {\n          // degenerate case (collinear diagram)\n          // almost equal points (degenerate triangle)\n          // the circumcenter is at the infinity, in a\n          // direction that is:\n          // 1. orthogonal to the halfedge.\n          var a = 1e9; // 2. points away from the center; since the list of triangles starts\n          // in the center, the first point of the first triangle\n          // will be our reference\n\n          var r = triangles[0] * 2;\n          a *= Math.sign((points[r] - _x) * ey - (points[r + 1] - _y) * ex);\n          x = (_x + x3) / 2 - a * ey;\n          y = (_y + y3) / 2 + a * ex;\n        } else {\n          var d = 1 / ab;\n          var bl = dx * dx + dy * dy;\n          var cl = ex * ex + ey * ey;\n          x = _x + (ey * bl - dy * cl) * d;\n          y = _y + (dx * cl - ex * bl) * d;\n        }\n\n        circumcenters[j] = x;\n        circumcenters[j + 1] = y;\n      } // Compute exterior cell rays.\n\n\n      var h = hull[hull.length - 1];\n      var p0,\n          p1 = h * 4;\n      var x0,\n          x1 = points[2 * h];\n      var y0,\n          y1 = points[2 * h + 1];\n      vectors.fill(0);\n\n      for (var _i = 0; _i < hull.length; ++_i) {\n        h = hull[_i];\n        p0 = p1, x0 = x1, y0 = y1;\n        p1 = h * 4, x1 = points[2 * h], y1 = points[2 * h + 1];\n        vectors[p0 + 2] = vectors[p1] = y0 - y1;\n        vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(context) {\n      var buffer = context == null ? context = new Path() : undefined;\n      var _this$delaunay2 = this.delaunay,\n          halfedges = _this$delaunay2.halfedges,\n          inedges = _this$delaunay2.inedges,\n          hull = _this$delaunay2.hull,\n          circumcenters = this.circumcenters,\n          vectors = this.vectors;\n      if (hull.length <= 1) return null;\n\n      for (var i = 0, n = halfedges.length; i < n; ++i) {\n        var j = halfedges[i];\n        if (j < i) continue;\n        var ti = Math.floor(i / 3) * 2;\n        var tj = Math.floor(j / 3) * 2;\n        var xi = circumcenters[ti];\n        var yi = circumcenters[ti + 1];\n        var xj = circumcenters[tj];\n        var yj = circumcenters[tj + 1];\n\n        this._renderSegment(xi, yi, xj, yj, context);\n      }\n\n      var h0,\n          h1 = hull[hull.length - 1];\n\n      for (var _i2 = 0; _i2 < hull.length; ++_i2) {\n        h0 = h1, h1 = hull[_i2];\n        var t = Math.floor(inedges[h1] / 3) * 2;\n        var x = circumcenters[t];\n        var y = circumcenters[t + 1];\n        var v = h0 * 4;\n\n        var p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n\n        if (p) this._renderSegment(x, y, p[0], p[1], context);\n      }\n\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"renderBounds\",\n    value: function renderBounds(context) {\n      var buffer = context == null ? context = new Path() : undefined;\n      context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"renderCell\",\n    value: function renderCell(i, context) {\n      var buffer = context == null ? context = new Path() : undefined;\n\n      var points = this._clip(i);\n\n      if (points === null || !points.length) return;\n      context.moveTo(points[0], points[1]);\n      var n = points.length;\n\n      while (points[0] === points[n - 2] && points[1] === points[n - 1] && n > 1) {\n        n -= 2;\n      }\n\n      for (var _i3 = 2; _i3 < n; _i3 += 2) {\n        if (points[_i3] !== points[_i3 - 2] || points[_i3 + 1] !== points[_i3 - 1]) context.lineTo(points[_i3], points[_i3 + 1]);\n      }\n\n      context.closePath();\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"cellPolygons\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function cellPolygons() {\n      var points, i, n, cell;\n      return _regeneratorRuntime.wrap(function cellPolygons$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              points = this.delaunay.points;\n              i = 0, n = points.length / 2;\n\n            case 2:\n              if (!(i < n)) {\n                _context.next = 11;\n                break;\n              }\n\n              cell = this.cellPolygon(i);\n\n              if (!cell) {\n                _context.next = 8;\n                break;\n              }\n\n              cell.index = i;\n              _context.next = 8;\n              return cell;\n\n            case 8:\n              ++i;\n              _context.next = 2;\n              break;\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, cellPolygons, this);\n    })\n  }, {\n    key: \"cellPolygon\",\n    value: function cellPolygon(i) {\n      var polygon = new Polygon();\n      this.renderCell(i, polygon);\n      return polygon.value();\n    }\n  }, {\n    key: \"_renderSegment\",\n    value: function _renderSegment(x0, y0, x1, y1, context) {\n      var S;\n\n      var c0 = this._regioncode(x0, y0);\n\n      var c1 = this._regioncode(x1, y1);\n\n      if (c0 === 0 && c1 === 0) {\n        context.moveTo(x0, y0);\n        context.lineTo(x1, y1);\n      } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n        context.moveTo(S[0], S[1]);\n        context.lineTo(S[2], S[3]);\n      }\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(i, x, y) {\n      if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n      return this.delaunay._step(i, x, y) === i;\n    }\n  }, {\n    key: \"neighbors\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function neighbors(i) {\n      var ci, _iterator, _step, j, cj, ai, li, aj, lj;\n\n      return _regeneratorRuntime.wrap(function neighbors$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              ci = this._clip(i);\n\n              if (!ci) {\n                _context2.next = 33;\n                break;\n              }\n\n              _iterator = _createForOfIteratorHelper(this.delaunay.neighbors(i));\n              _context2.prev = 3;\n\n              _iterator.s();\n\n            case 5:\n              if ((_step = _iterator.n()).done) {\n                _context2.next = 25;\n                break;\n              }\n\n              j = _step.value;\n              cj = this._clip(j); // find the common edge\n\n              if (!cj) {\n                _context2.next = 23;\n                break;\n              }\n\n              ai = 0, li = ci.length;\n\n            case 10:\n              if (!(ai < li)) {\n                _context2.next = 23;\n                break;\n              }\n\n              aj = 0, lj = cj.length;\n\n            case 12:\n              if (!(aj < lj)) {\n                _context2.next = 20;\n                break;\n              }\n\n              if (!(ci[ai] == cj[aj] && ci[ai + 1] == cj[aj + 1] && ci[(ai + 2) % li] == cj[(aj + lj - 2) % lj] && ci[(ai + 3) % li] == cj[(aj + lj - 1) % lj])) {\n                _context2.next = 17;\n                break;\n              }\n\n              _context2.next = 16;\n              return j;\n\n            case 16:\n              return _context2.abrupt(\"break\", 23);\n\n            case 17:\n              aj += 2;\n              _context2.next = 12;\n              break;\n\n            case 20:\n              ai += 2;\n              _context2.next = 10;\n              break;\n\n            case 23:\n              _context2.next = 5;\n              break;\n\n            case 25:\n              _context2.next = 30;\n              break;\n\n            case 27:\n              _context2.prev = 27;\n              _context2.t0 = _context2[\"catch\"](3);\n\n              _iterator.e(_context2.t0);\n\n            case 30:\n              _context2.prev = 30;\n\n              _iterator.f();\n\n              return _context2.finish(30);\n\n            case 33:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, neighbors, this, [[3, 27, 30, 33]]);\n    })\n  }, {\n    key: \"_cell\",\n    value: function _cell(i) {\n      var circumcenters = this.circumcenters,\n          _this$delaunay3 = this.delaunay,\n          inedges = _this$delaunay3.inedges,\n          halfedges = _this$delaunay3.halfedges,\n          triangles = _this$delaunay3.triangles;\n      var e0 = inedges[i];\n      if (e0 === -1) return null; // coincident point\n\n      var points = [];\n      var e = e0;\n\n      do {\n        var t = Math.floor(e / 3);\n        points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n        e = e % 3 === 2 ? e - 2 : e + 1;\n        if (triangles[e] !== i) break; // bad triangulation\n\n        e = halfedges[e];\n      } while (e !== e0 && e !== -1);\n\n      return points;\n    }\n  }, {\n    key: \"_clip\",\n    value: function _clip(i) {\n      // degenerate case (1 valid point: return the box)\n      if (i === 0 && this.delaunay.hull.length === 1) {\n        return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n      }\n\n      var points = this._cell(i);\n\n      if (points === null) return null;\n      var V = this.vectors;\n      var v = i * 4;\n      return V[v] || V[v + 1] ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3]) : this._clipFinite(i, points);\n    }\n  }, {\n    key: \"_clipFinite\",\n    value: function _clipFinite(i, points) {\n      var n = points.length;\n      var P = null;\n      var x0,\n          y0,\n          x1 = points[n - 2],\n          y1 = points[n - 1];\n\n      var c0,\n          c1 = this._regioncode(x1, y1);\n\n      var e0,\n          e1 = 0;\n\n      for (var j = 0; j < n; j += 2) {\n        x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n        c0 = c1, c1 = this._regioncode(x1, y1);\n\n        if (c0 === 0 && c1 === 0) {\n          e0 = e1, e1 = 0;\n          if (P) P.push(x1, y1);else P = [x1, y1];\n        } else {\n          var S = void 0,\n              sx0 = void 0,\n              sy0 = void 0,\n              sx1 = void 0,\n              sy1 = void 0;\n\n          if (c0 === 0) {\n            if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n            var _S = S;\n\n            var _S2 = _slicedToArray(_S, 4);\n\n            sx0 = _S2[0];\n            sy0 = _S2[1];\n            sx1 = _S2[2];\n            sy1 = _S2[3];\n          } else {\n            if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n            var _S3 = S;\n\n            var _S4 = _slicedToArray(_S3, 4);\n\n            sx1 = _S4[0];\n            sy1 = _S4[1];\n            sx0 = _S4[2];\n            sy0 = _S4[3];\n            e0 = e1, e1 = this._edgecode(sx0, sy0);\n            if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n            if (P) P.push(sx0, sy0);else P = [sx0, sy0];\n          }\n\n          e0 = e1, e1 = this._edgecode(sx1, sy1);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx1, sy1);else P = [sx1, sy1];\n        }\n      }\n\n      if (P) {\n        e0 = e1, e1 = this._edgecode(P[0], P[1]);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n      } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n        return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n      }\n\n      return P;\n    }\n  }, {\n    key: \"_clipSegment\",\n    value: function _clipSegment(x0, y0, x1, y1, c0, c1) {\n      while (true) {\n        if (c0 === 0 && c1 === 0) return [x0, y0, x1, y1];\n        if (c0 & c1) return null;\n        var x = void 0,\n            y = void 0,\n            c = c0 || c1;\n        if (c & 8) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;else if (c & 4) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;else if (c & 2) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n        if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n      }\n    }\n  }, {\n    key: \"_clipInfinite\",\n    value: function _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n      var P = Array.from(points),\n          p;\n      if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n      if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n\n      if (P = this._clipFinite(i, P)) {\n        for (var j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n          c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n          if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n        }\n      } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n        P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n      }\n\n      return P;\n    }\n  }, {\n    key: \"_edge\",\n    value: function _edge(i, e0, e1, P, j) {\n      while (e0 !== e1) {\n        var x = void 0,\n            y = void 0;\n\n        switch (e0) {\n          case 5:\n            e0 = 4;\n            continue;\n          // top-left\n\n          case 4:\n            e0 = 6, x = this.xmax, y = this.ymin;\n            break;\n          // top\n\n          case 6:\n            e0 = 2;\n            continue;\n          // top-right\n\n          case 2:\n            e0 = 10, x = this.xmax, y = this.ymax;\n            break;\n          // right\n\n          case 10:\n            e0 = 8;\n            continue;\n          // bottom-right\n\n          case 8:\n            e0 = 9, x = this.xmin, y = this.ymax;\n            break;\n          // bottom\n\n          case 9:\n            e0 = 1;\n            continue;\n          // bottom-left\n\n          case 1:\n            e0 = 5, x = this.xmin, y = this.ymin;\n            break;\n          // left\n        } // Note: this implicitly checks for out of bounds: if P[j] or P[j+1] are\n        // undefined, the conditional statement will be executed.\n\n\n        if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n          P.splice(j, 0, x, y), j += 2;\n        }\n      }\n\n      if (P.length > 4) {\n        for (var _i4 = 0; _i4 < P.length; _i4 += 2) {\n          var _j = (_i4 + 2) % P.length,\n              k = (_i4 + 4) % P.length;\n\n          if (P[_i4] === P[_j] && P[_j] === P[k] || P[_i4 + 1] === P[_j + 1] && P[_j + 1] === P[k + 1]) P.splice(_j, 2), _i4 -= 2;\n        }\n      }\n\n      return j;\n    }\n  }, {\n    key: \"_project\",\n    value: function _project(x0, y0, vx, vy) {\n      var t = Infinity,\n          c,\n          x,\n          y;\n\n      if (vy < 0) {\n        // top\n        if (y0 <= this.ymin) return null;\n        if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n      } else if (vy > 0) {\n        // bottom\n        if (y0 >= this.ymax) return null;\n        if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n      }\n\n      if (vx > 0) {\n        // right\n        if (x0 >= this.xmax) return null;\n        if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n      } else if (vx < 0) {\n        // left\n        if (x0 <= this.xmin) return null;\n        if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n      }\n\n      return [x, y];\n    }\n  }, {\n    key: \"_edgecode\",\n    value: function _edgecode(x, y) {\n      return (x === this.xmin ? 1 : x === this.xmax ? 2 : 0) | (y === this.ymin ? 4 : y === this.ymax ? 8 : 0);\n    }\n  }, {\n    key: \"_regioncode\",\n    value: function _regioncode(x, y) {\n      return (x < this.xmin ? 1 : x > this.xmax ? 2 : 0) | (y < this.ymin ? 4 : y > this.ymax ? 8 : 0);\n    }\n  }]);\n\n  return Voronoi;\n}();\n\nexport { Voronoi as default };","import _classCallCheck from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(flatIterable);\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e2) { throw _e2; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e3) { didErr = true; err = _e3; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"/Users/baumzeit/Code/voronoi-shopping/frontend/node_modules/@babel/runtime/regenerator/index.js\";\nimport \"core-js/modules/es.math.hypot.js\";\nimport Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\nvar tau = 2 * Math.PI,\n    pow = Math.pow;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n} // A triangulation is collinear if all its triangles have a non-null area\n\n\nfunction collinear(d) {\n  var triangles = d.triangles,\n      coords = d.coords;\n\n  for (var i = 0; i < triangles.length; i += 3) {\n    var a = 2 * triangles[i],\n        b = 2 * triangles[i + 1],\n        c = 2 * triangles[i + 2],\n        cross = (coords[c] - coords[a]) * (coords[b + 1] - coords[a + 1]) - (coords[b] - coords[a]) * (coords[c + 1] - coords[a + 1]);\n    if (cross > 1e-10) return false;\n  }\n\n  return true;\n}\n\nfunction jitter(x, y, r) {\n  return [x + Math.sin(x + y) * r, y + Math.cos(x - y) * r];\n}\n\nvar Delaunay = /*#__PURE__*/function () {\n  function Delaunay(points) {\n    _classCallCheck(this, Delaunay);\n\n    this._delaunator = new Delaunator(points);\n    this.inedges = new Int32Array(points.length / 2);\n    this._hullIndex = new Int32Array(points.length / 2);\n    this.points = this._delaunator.coords;\n\n    this._init();\n  }\n\n  _createClass(Delaunay, [{\n    key: \"update\",\n    value: function update() {\n      this._delaunator.update();\n\n      this._init();\n\n      return this;\n    }\n  }, {\n    key: \"_init\",\n    value: function _init() {\n      var d = this._delaunator,\n          points = this.points; // check for collinear\n\n      if (d.hull && d.hull.length > 2 && collinear(d)) {\n        this.collinear = Int32Array.from({\n          length: points.length / 2\n        }, function (_, i) {\n          return i;\n        }).sort(function (i, j) {\n          return points[2 * i] - points[2 * j] || points[2 * i + 1] - points[2 * j + 1];\n        }); // for exact neighbors\n\n        var e = this.collinear[0],\n            f = this.collinear[this.collinear.length - 1],\n            bounds = [points[2 * e], points[2 * e + 1], points[2 * f], points[2 * f + 1]],\n            r = 1e-8 * Math.hypot(bounds[3] - bounds[1], bounds[2] - bounds[0]);\n\n        for (var i = 0, n = points.length / 2; i < n; ++i) {\n          var p = jitter(points[2 * i], points[2 * i + 1], r);\n          points[2 * i] = p[0];\n          points[2 * i + 1] = p[1];\n        }\n\n        this._delaunator = new Delaunator(points);\n      } else {\n        delete this.collinear;\n      }\n\n      var halfedges = this.halfedges = this._delaunator.halfedges;\n      var hull = this.hull = this._delaunator.hull;\n      var triangles = this.triangles = this._delaunator.triangles;\n      var inedges = this.inedges.fill(-1);\n\n      var hullIndex = this._hullIndex.fill(-1); // Compute an index from each point to an (arbitrary) incoming halfedge\n      // Used to give the first neighbor of each point; for this reason,\n      // on the hull we give priority to exterior halfedges\n\n\n      for (var _e = 0, _n = halfedges.length; _e < _n; ++_e) {\n        var _p = triangles[_e % 3 === 2 ? _e - 2 : _e + 1];\n        if (halfedges[_e] === -1 || inedges[_p] === -1) inedges[_p] = _e;\n      }\n\n      for (var _i = 0, _n2 = hull.length; _i < _n2; ++_i) {\n        hullIndex[hull[_i]] = _i;\n      } // degenerate case: 1 or 2 (distinct) points\n\n\n      if (hull.length <= 2 && hull.length > 0) {\n        this.triangles = new Int32Array(3).fill(-1);\n        this.halfedges = new Int32Array(3).fill(-1);\n        this.triangles[0] = hull[0];\n        inedges[hull[0]] = 1;\n\n        if (hull.length === 2) {\n          inedges[hull[1]] = 0;\n          this.triangles[1] = hull[1];\n          this.triangles[2] = hull[1];\n        }\n      }\n    }\n  }, {\n    key: \"voronoi\",\n    value: function voronoi(bounds) {\n      return new Voronoi(this, bounds);\n    }\n  }, {\n    key: \"neighbors\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function neighbors(i) {\n      var inedges, hull, _hullIndex, halfedges, triangles, collinear, l, e0, e, p0, p;\n\n      return _regeneratorRuntime.wrap(function neighbors$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              inedges = this.inedges, hull = this.hull, _hullIndex = this._hullIndex, halfedges = this.halfedges, triangles = this.triangles, collinear = this.collinear; // degenerate case with several collinear points\n\n              if (!collinear) {\n                _context.next = 10;\n                break;\n              }\n\n              l = collinear.indexOf(i);\n\n              if (!(l > 0)) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 6;\n              return collinear[l - 1];\n\n            case 6:\n              if (!(l < collinear.length - 1)) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 9;\n              return collinear[l + 1];\n\n            case 9:\n              return _context.abrupt(\"return\");\n\n            case 10:\n              e0 = inedges[i];\n\n              if (!(e0 === -1)) {\n                _context.next = 13;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 13:\n              // coincident point\n              e = e0, p0 = -1;\n\n            case 14:\n              _context.next = 16;\n              return p0 = triangles[e];\n\n            case 16:\n              e = e % 3 === 2 ? e - 2 : e + 1;\n\n              if (!(triangles[e] !== i)) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 19:\n              // bad triangulation\n              e = halfedges[e];\n\n              if (!(e === -1)) {\n                _context.next = 26;\n                break;\n              }\n\n              p = hull[(_hullIndex[i] + 1) % hull.length];\n\n              if (!(p !== p0)) {\n                _context.next = 25;\n                break;\n              }\n\n              _context.next = 25;\n              return p;\n\n            case 25:\n              return _context.abrupt(\"return\");\n\n            case 26:\n              if (e !== e0) {\n                _context.next = 14;\n                break;\n              }\n\n            case 27:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, neighbors, this);\n    })\n  }, {\n    key: \"find\",\n    value: function find(x, y) {\n      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n      var i0 = i;\n      var c;\n\n      while ((c = this._step(i, x, y)) >= 0 && c !== i && c !== i0) {\n        i = c;\n      }\n\n      return c;\n    }\n  }, {\n    key: \"_step\",\n    value: function _step(i, x, y) {\n      var inedges = this.inedges,\n          hull = this.hull,\n          _hullIndex = this._hullIndex,\n          halfedges = this.halfedges,\n          triangles = this.triangles,\n          points = this.points;\n      if (inedges[i] === -1 || !points.length) return (i + 1) % (points.length >> 1);\n      var c = i;\n      var dc = pow(x - points[i * 2], 2) + pow(y - points[i * 2 + 1], 2);\n      var e0 = inedges[i];\n      var e = e0;\n\n      do {\n        var t = triangles[e];\n        var dt = pow(x - points[t * 2], 2) + pow(y - points[t * 2 + 1], 2);\n        if (dt < dc) dc = dt, c = t;\n        e = e % 3 === 2 ? e - 2 : e + 1;\n        if (triangles[e] !== i) break; // bad triangulation\n\n        e = halfedges[e];\n\n        if (e === -1) {\n          e = hull[(_hullIndex[i] + 1) % hull.length];\n\n          if (e !== t) {\n            if (pow(x - points[e * 2], 2) + pow(y - points[e * 2 + 1], 2) < dc) return e;\n          }\n\n          break;\n        }\n      } while (e !== e0);\n\n      return c;\n    }\n  }, {\n    key: \"render\",\n    value: function render(context) {\n      var buffer = context == null ? context = new Path() : undefined;\n      var points = this.points,\n          halfedges = this.halfedges,\n          triangles = this.triangles;\n\n      for (var i = 0, n = halfedges.length; i < n; ++i) {\n        var j = halfedges[i];\n        if (j < i) continue;\n        var ti = triangles[i] * 2;\n        var tj = triangles[j] * 2;\n        context.moveTo(points[ti], points[ti + 1]);\n        context.lineTo(points[tj], points[tj + 1]);\n      }\n\n      this.renderHull(context);\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"renderPoints\",\n    value: function renderPoints(context, r) {\n      if (r === undefined && (!context || typeof context.moveTo !== \"function\")) r = context, context = null;\n      r = r == undefined ? 2 : +r;\n      var buffer = context == null ? context = new Path() : undefined;\n      var points = this.points;\n\n      for (var i = 0, n = points.length; i < n; i += 2) {\n        var x = points[i],\n            y = points[i + 1];\n        context.moveTo(x + r, y);\n        context.arc(x, y, r, 0, tau);\n      }\n\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"renderHull\",\n    value: function renderHull(context) {\n      var buffer = context == null ? context = new Path() : undefined;\n      var hull = this.hull,\n          points = this.points;\n      var h = hull[0] * 2,\n          n = hull.length;\n      context.moveTo(points[h], points[h + 1]);\n\n      for (var i = 1; i < n; ++i) {\n        var _h = 2 * hull[i];\n\n        context.lineTo(points[_h], points[_h + 1]);\n      }\n\n      context.closePath();\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"hullPolygon\",\n    value: function hullPolygon() {\n      var polygon = new Polygon();\n      this.renderHull(polygon);\n      return polygon.value();\n    }\n  }, {\n    key: \"renderTriangle\",\n    value: function renderTriangle(i, context) {\n      var buffer = context == null ? context = new Path() : undefined;\n      var points = this.points,\n          triangles = this.triangles;\n      var t0 = triangles[i *= 3] * 2;\n      var t1 = triangles[i + 1] * 2;\n      var t2 = triangles[i + 2] * 2;\n      context.moveTo(points[t0], points[t0 + 1]);\n      context.lineTo(points[t1], points[t1 + 1]);\n      context.lineTo(points[t2], points[t2 + 1]);\n      context.closePath();\n      return buffer && buffer.value();\n    }\n  }, {\n    key: \"trianglePolygons\",\n    value: /*#__PURE__*/_regeneratorRuntime.mark(function trianglePolygons() {\n      var triangles, i, n;\n      return _regeneratorRuntime.wrap(function trianglePolygons$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              triangles = this.triangles;\n              i = 0, n = triangles.length / 3;\n\n            case 2:\n              if (!(i < n)) {\n                _context2.next = 8;\n                break;\n              }\n\n              _context2.next = 5;\n              return this.trianglePolygon(i);\n\n            case 5:\n              ++i;\n              _context2.next = 2;\n              break;\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, trianglePolygons, this);\n    })\n  }, {\n    key: \"trianglePolygon\",\n    value: function trianglePolygon(i) {\n      var polygon = new Polygon();\n      this.renderTriangle(i, polygon);\n      return polygon.value();\n    }\n  }], [{\n    key: \"from\",\n    value: function from(points) {\n      var fx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : pointX;\n      var fy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : pointY;\n      var that = arguments.length > 3 ? arguments[3] : undefined;\n      return new Delaunay(\"length\" in points ? flatArray(points, fx, fy, that) : Float64Array.from(flatIterable(points, fx, fy, that)));\n    }\n  }]);\n\n  return Delaunay;\n}();\n\nexport { Delaunay as default };\n\nfunction flatArray(points, fx, fy, that) {\n  var n = points.length;\n  var array = new Float64Array(n * 2);\n\n  for (var i = 0; i < n; ++i) {\n    var p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n\n  return array;\n}\n\nfunction flatIterable(points, fx, fy, that) {\n  var i, _iterator, _step2, p;\n\n  return _regeneratorRuntime.wrap(function flatIterable$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          i = 0;\n          _iterator = _createForOfIteratorHelper(points);\n          _context3.prev = 2;\n\n          _iterator.s();\n\n        case 4:\n          if ((_step2 = _iterator.n()).done) {\n            _context3.next = 13;\n            break;\n          }\n\n          p = _step2.value;\n          _context3.next = 8;\n          return fx.call(that, p, i, points);\n\n        case 8:\n          _context3.next = 10;\n          return fy.call(that, p, i, points);\n\n        case 10:\n          ++i;\n\n        case 11:\n          _context3.next = 4;\n          break;\n\n        case 13:\n          _context3.next = 18;\n          break;\n\n        case 15:\n          _context3.prev = 15;\n          _context3.t0 = _context3[\"catch\"](2);\n\n          _iterator.e(_context3.t0);\n\n        case 18:\n          _context3.prev = 18;\n\n          _iterator.f();\n\n          return _context3.finish(18);\n\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked, null, [[2, 15, 18, 21]]);\n}","import { Delaunay } from 'd3-delaunay'\nimport { useMemo } from 'react'\n\nconst padding = { top: 0, left: 1.5 * 16, right: 1.5 * 16, bottom: 1.5 * 16 }\nconst cellGap = 22\n\nexport type Point = {\n  x: number\n  y: number\n}\nexport type PointWithPath = Point & {\n  path: string\n}\n\ntype UseVoronoiModelProps<T> = {\n  width: number\n  height: number\n  data: T[]\n}\nexport const useVoronoiModel = <T extends Point = Point>({ width, height, data }: UseVoronoiModelProps<T>) => {\n  const delaunay = useMemo(() => {\n    return Delaunay.from(\n      data,\n      (d) => d.x,\n      (d) => d.y\n    )\n  }, [data])\n\n  const voronoi = useMemo(() => {\n    const bounds: [number, number, number, number] = [\n      Number(padding.left) - cellGap / 2,\n      Number(padding.top) - cellGap / 2,\n      width - cellGap / 2,\n      height - cellGap / 2\n    ]\n    return delaunay.voronoi(bounds)\n  }, [delaunay, height, width])\n\n  const enrichedData: (T & PointWithPath)[] = useMemo(\n    () =>\n      data.map((d, idx) => ({\n        ...d,\n        path: voronoi.renderCell(idx)\n      })),\n    [data, voronoi]\n  )\n\n  return { delaunay, voronoi, enrichedData }\n}\n","import * as d3 from 'd3-selection'\nimport { Link } from 'gatsby'\nimport React, { memo, SVGProps, useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nimport './voronoi.scss'\nimport { VoronoiChartDatum } from '../../projects/use-projects-chart-data'\nimport { drawVoronoi } from './helpers/draw-voronoi'\nimport { highlightCellsByAreaId, hoverCell, restore, VoronoiOptions } from './helpers/voronoi-actions'\nimport { useVoronoiModel } from './use-voronoi-model'\n\ntype HighlightPatternDatum = { color?: string | null; id: string | number }\n\nexport type VoronoiChartProps = {\n  data: VoronoiChartDatum[]\n  highlightPatternData: HighlightPatternDatum[]\n  width: number\n  height: number\n  imageSize: number\n  onClickCell: (slug: string) => void\n  highlightedAreaId?: string | null\n}\n\nexport const VoronoiChart = memo(\n  ({\n    data,\n    highlightPatternData,\n    width,\n    height,\n    imageSize,\n    highlightedAreaId = null,\n    onClickCell\n  }: VoronoiChartProps) => {\n    const [svgNode, setSvgNode] = useState<SVGSVGElement | null>(null)\n    const [initialized, setInitialized] = useState(false)\n    const [hoveredCell, setHoveredCell] = useState('')\n\n    const onRefChange = useCallback((node: SVGSVGElement | null) => {\n      setSvgNode(node)\n    }, [])\n\n    const spanRef = useRef<HTMLAnchorElement>(null)\n\n    const { voronoi, enrichedData } = useVoronoiModel({ data, width, height })\n\n    const voronoiOptions = useMemo<VoronoiOptions | undefined>(() => {\n      return {\n        width,\n        height,\n        imageSize\n      }\n    }, [height, imageSize, width])\n\n    useEffect(() => {\n      if (svgNode && voronoiOptions) {\n        const svg = d3\n          .select(svgNode)\n          .attr('id', 'voronoi-projects')\n          .attr('fill', 'none')\n          .attr('stroke-linejoin', 'round')\n          .attr('stroke-linecap', 'round')\n\n        drawVoronoi({\n          svg,\n          voronoi,\n          data: enrichedData,\n          options: voronoiOptions,\n          onClick: onClickCell,\n          onHover: hoverCell(svgNode),\n          // onHover: (slug) => {\n          //   if (spanRef.current) {\n          //     setHoveredCell(slug)\n          //     const mouseOverEvent = new MouseEvent('mouseover', { bubbles: true })\n          //     spanRef.current?.dispatchEvent(mouseOverEvent)\n          //   }\n          //   hoverCell(svgNode)(slug)\n          // },\n          onMouseLeave: restore(svgNode)\n        })\n        setInitialized(true)\n      }\n    }, [enrichedData, initialized, onClickCell, svgNode, voronoi, voronoiOptions])\n\n    useEffect(() => {\n      if (initialized && svgNode) {\n        highlightCellsByAreaId(svgNode)(highlightedAreaId)\n      }\n    }, [highlightedAreaId, initialized, svgNode])\n\n    return (\n      <>\n        {/* <Link ref={spanRef as any} key={hoveredCell} to={hoveredCell} style={{ display: 'none' }} /> */}\n\n        <svg ref={onRefChange} width={width} height={height} className=\"cursor-pointer voronoi animate-fadeIn\">\n          <defs>\n            <HatchPattern id=\"diagonalHatch\" className=\"stroke-bg-secondary\" />\n            {highlightPatternData.map(({ color, id }) => (\n              <HatchPattern key={id} stroke={color || 'black'} id={'diagonalHatchHighlight-' + id} />\n            ))}\n          </defs>\n        </svg>\n      </>\n    )\n  }\n)\n\nconst HatchPattern = ({ id, ...rest }: Pick<HighlightPatternDatum, 'id'> & SVGProps<SVGPathElement>) => {\n  return (\n    <pattern key={id} id={String(id)} patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\">\n      <path\n        d=\"M-1,1 l2,-2\n          M0,4 l4,-4\n          M3,5 l2,-2\"\n        strokeWidth=\"1\"\n        opacity={0.8}\n        {...rest}\n      />\n    </pattern>\n  )\n}\n","import React from 'react'\n\nimport { UseJitterGridReturn } from '../../../common/hooks/use-jitter-grid'\nimport { useHighlightArea } from '../../project/use-highlight-area'\nimport { useProjectsChartData } from '../../projects/use-projects-chart-data'\nimport { VoronoiChart } from './VoronoiChart'\n\ntype VoronoiContainerProps = {\n  projects: Queries.ProductBaseFragment[]\n  areas: Queries.CategoryBaseFragment[]\n} & Required<UseJitterGridReturn>\n\nexport const VoronoiContainer = ({\n  gridSpecs: { width, height, numCols, numRows },\n  projects,\n  areas,\n  getGridCoordinates\n}: VoronoiContainerProps) => {\n  const [highlightArea] = useHighlightArea()\n\n  const chartData = useProjectsChartData({ projects, getGridCoordinates })\n  return (\n    <>\n      <div id=\"voronoiContainer\" className=\"overflow-x-hidden\">\n        <VoronoiChart\n          data={chartData}\n          width={width}\n          height={height}\n          onClickCell={() => {}}\n          imageSize={Math.max(width / numCols, height / numRows) * 1.2}\n          highlightPatternData={areas}\n          highlightedAreaId={highlightArea?.id}\n        />\n      </div>\n    </>\n  )\n}\n","import { getSrc, getSrcSet } from 'gatsby-plugin-image'\nimport { useMemo } from 'react'\n\nimport { GridCoordinate } from '../../common/hooks/use-jitter-grid'\nimport { getStrapiImage } from '../../common/utility/get-image'\nimport notEmpty from '../../common/utility/not-empty'\nimport { Point } from '../viz/Voronoi/use-voronoi-model'\n\nexport type VoronoiChartDatum = Point & {\n  imgSrc: string | undefined\n  id: string\n  title: string\n  price: string\n  slug: string\n  areas: {\n    color: string\n    name: string\n    id: string\n  }[]\n  index: number\n}\n\ntype UseProjectsChartDataProps = {\n  projects: Queries.ProductBaseFragment[]\n  getGridCoordinates: (idx: number) => GridCoordinate\n}\nexport const useProjectsChartData = ({\n  projects,\n  getGridCoordinates\n}: UseProjectsChartDataProps): VoronoiChartDatum[] =>\n  useMemo(\n    () =>\n      getGridCoordinates\n        ? projects.map(({ images, id, categories, name, slug, price }, idx) => {\n            const imageData = images?.[0] ? getStrapiImage(images?.[0]) : undefined\n            return {\n              x: getGridCoordinates(idx)[0],\n              y: getGridCoordinates(idx)[1],\n              imgSrc: imageData ? getSrc(imageData) : '',\n              id: id,\n              index: idx,\n              title: String(name),\n              price: `${price},00 €`,\n              slug: String(slug),\n              areas:\n                categories?.filter(notEmpty).map((d) => ({\n                  color: String(d.color),\n                  name: String(d.name),\n                  id: d.id\n                })) || []\n            }\n          })\n        : [],\n    [getGridCoordinates, projects]\n  )\n","import { useWindowSize } from '@react-hook/window-size'\nimport React from 'react'\n\nimport { NAVBAR_HEIGHT } from '../../common/components/Navbar'\nimport { useJitterGrid } from '../../common/hooks/use-jitter-grid'\nimport { ProductsAndCategories } from '../../pages'\nimport { VoronoiContainer } from '../viz/Voronoi/VoronoiContainer'\n\nconst relMargin = { top: 0.18, right: 0.14, bottom: 0.16, left: 0.14 }\n\nconst ProjectsMap = ({ projects, areas }: ProductsAndCategories) => {\n  const [width, windowHeight] = useWindowSize({ wait: 300 })\n\n  const { getGridCoordinates, gridSpecs } = useJitterGrid({\n    minItems: projects.length,\n    width,\n    minHeight: windowHeight - NAVBAR_HEIGHT,\n    relMargin,\n    minTilePixels: 55000,\n    colJitter: 0.05\n  })\n\n  return gridSpecs && getGridCoordinates ? (\n    <VoronoiContainer projects={projects} areas={areas} gridSpecs={gridSpecs} getGridCoordinates={getGridCoordinates} />\n  ) : null\n}\n\nexport default ProjectsMap\n"],"names":["wellKnownSymbol","create","defineProperty","UNSCOPABLES","ArrayPrototype","Array","prototype","undefined","configurable","value","module","exports","key","isArray","isConstructor","isObject","SPECIES","$Array","originalArray","C","constructor","arraySpeciesConstructor","length","$TypeError","TypeError","it","lengthOfArrayLike","doesNotExceedSafeInteger","bind","flattenIntoArray","target","original","source","sourceLen","start","depth","mapper","thisArg","element","elementLen","targetIndex","sourceIndex","mapFn","classof","argument","$","toObject","toIntegerOrInfinity","arraySpeciesCreate","proto","flat","depthArg","arguments","O","this","A","addToUnscopables","$hypot","Math","hypot","abs","sqrt","stat","arity","forced","Infinity","NaN","value1","value2","arg","div","sum","i","aLen","larg","getStrapiImage","queryImage","localFile","_queryImage$localFile","childImageSharp","_queryImage$localFile2","gatsbyImageData","current","storedValue","useDebounceCallback","callback","wait","leading","storedCallback","timeout","deps","_ref","clearTimeout","_ref2","args","setTimeout","apply","useDebounce","initialState","state","type","listener","cleanup","storedListener","storedCleanup","targetEl","didUnsubscribe","addEventListener","removeEventListener","_len","_key","emptyObj","win","window","getSize","document","documentElement","clientWidth","clientHeight","useWindowSize","options","_options$initialWidth","initialWidth","_options$initialHeigh","initialHeight","_useDebounce","_useDebounce2","size","setDebouncedSize","setSize","sourceRandomNormal","randomNormal","mu","sigma","x","r","y","log","useJitterGrid","minItems","width","minHeight","relMargin","minTilePixels","colJitter","gridData","useMemo","height","defaultSize","aspect","min","aspectFactor","virtualColumns","virtualRows","safeRows","ceil","safeColumns","refCols","refRows","floor","marginTop","max","top","marginBottom","bottom","marginRight","right","marginLeft","left","getNoise","unitSize","jitter","numOrphans","adoptedOrphans","getRowJitter","idx","rowSpecs","rows","rowHeight","positions","from","_","interval","gridPositions","map","rowIdx","items","colWidth","colDiff","offset","adjustedColWidth","adoptionRowIdx","isLastRow","colSpecs","colPos","colSize","rowPos","getCoordinates","grid","numCols","numRows","err","console","error","getGridCoordinates","useCallback","gridSpecs","none","selector","querySelector","array","empty","childMatcher","node","matches","find","childFirst","firstElementChild","filter","children","update","EnterNode","parent","datum","ownerDocument","namespaceURI","_next","_parent","__data__","bindIndex","group","enter","exit","data","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","Map","keyValues","call","has","set","get","delete","arraylike","ascending","a","b","_createForOfIteratorHelper","o","allowArrayLike","Symbol","iterator","minLen","_arrayLikeToArray","n","Object","toString","slice","name","test","_unsupportedIterableToArray","F","s","done","e","_e","f","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","appendChild","child","insertBefore","querySelectorAll","xhtml","svg","xlink","xml","xmlns","prefix","indexOf","namespaces","hasOwnProperty","space","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","v","attrFunctionNS","defaultView","styleRemove","style","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","list","add","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","parentNode","lower","previousSibling","firstChild","creatorInherit","uri","createElement","createElementNS","creatorFixed","namespace","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","parseTypenames","typenames","t","onRemove","typename","on","__on","j","m","onAdd","event","contextListener","push","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","join","splice","contains","_marked","_callee","groups","_context","prev","_groups","stop","root","Selection","parents","_parents","selection","select","subgroups","subnode","subgroup","selectAll","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","constant","enterGroup","updateGroup","exitGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","merge","order","context","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","nodes","_step","_iterator","each","attr","getAttributeNS","property","classed","text","html","creator","insert","before","deep","dispatch","LABEL_OFFSET_Y","updateCell","imageSize","d","base","path","annotation","cell","titleSpace","title","adjustLabel","box","_select$select","_select$select$node","getBBox","boxStart","boxWidth","paddingX","boxHeight","paddingY","adjustLabelBox","drawVoronoi","opts","voronoi","onHover","onClick","onMouseLeave","String","id","defG","sel","imgSrc","index","price","drawCell","drawContentLayer","renderBounds","code","activeElement","activeElementSlug","_activeElement$datum","slug","stopPropagation","isExposed","restore","svgNode","d3","hoverCell","hoveredSlug","elen","flen","h","Q","Qnew","hh","bvirt","enow","fnow","eindex","findex","hindex","vec","Float64Array","B","C1","C2","D","u","orient2d","ax","ay","bx","by","cx","cy","detleft","detright","det","detsum","acxtail","acytail","bcxtail","bcytail","c","ahi","alo","bhi","blo","_i","_j","_0","s1","s0","t1","t0","u3","acx","bcx","acy","bcy","errbound","C1len","C2len","Dlen","orient2dadapt","EPSILON","pow","EDGE_STACK","Uint32Array","Delaunator","coords","Error","maxTriangles","_triangles","_halfedges","Int32Array","_hashSize","_hullPrev","_hullNext","_hullTri","_hullHash","fill","_ids","_dists","hullPrev","hullNext","hullTri","hullHash","minX","minY","maxX","maxY","i2","minDist","dist","i0x","i0y","_i2","_d","i1x","i1y","minRadius","_i3","circumradius","i2x","i2y","_i4","quicksort","hull","_i5","d0","subarray","triangles","halfedges","_i6","_x","_y","center","dx","dy","ex","ey","bl","cl","circumcenter","_cx","_cy","_i7","_hullStart","hullSize","_hashKey","trianglesLen","_addTriangle","xp","yp","k","_i8","_x2","_y2","q","_legalize","_n","_i9","p","px","py","fx","fy","bp","cp","ar","a0","b0","al","p0","pr","pl","p1","ap","hbl","_link","br","points","getX","defaultGetX","getY","defaultGetY","ids","dists","temp","tempDist","_i10","_j2","swap","_temp","_tempDist","tmp","Path","_x0","_y0","_x1","_y1","concat","x0","y0","w","Polygon","Voronoi","delaunay","xmin","ymin","xmax","ymax","_circumcenters","vectors","_init","_this$delaunay","circumcenters","t2","t3","x2","y2","x3","y3","ab","sign","x1","y1","buffer","_this$delaunay2","inedges","ti","tj","xi","yi","xj","yj","_renderSegment","h0","h1","_project","rect","_clip","moveTo","lineTo","closePath","cellPolygons","cellPolygon","polygon","renderCell","S","c0","_regioncode","c1","_clipSegment","neighbors","ci","cj","ai","li","aj","lj","_context2","abrupt","finish","_this$delaunay3","e0","_cell","V","_clipInfinite","_clipFinite","P","e1","sx0","sy0","sx1","sy1","_S","_S2","_S3","_S4","_edgecode","_edge","vx0","vy0","vxn","vyn","unshift","vx","vy","flatIterable","_e3","tau","PI","pointX","pointY","sin","cos","Delaunay","_delaunator","_hullIndex","collinear","bounds","hullIndex","_p","_n2","l","dc","dt","renderHull","arc","_h","trianglePolygons","trianglePolygon","renderTriangle","that","flatArray","_step2","_context3","padding","VoronoiChart","memo","highlightPatternData","highlightedAreaId","onClickCell","useState","setSvgNode","initialized","setInitialized","onRefChange","useRef","Number","cellGap","enrichedData","useVoronoiModel","voronoiOptions","useEffect","highlightId","cellG","highlightPath","shouldHighlight","Boolean","areas","area","highlightCellsByAreaId","React","ref","className","HatchPattern","color","stroke","rest","patternUnits","strokeWidth","opacity","VoronoiContainer","projects","highlightArea","useHighlightArea","chartData","images","categories","imageData","getSrc","notEmpty","useProjectsChartData","windowHeight","NAVBAR_HEIGHT"],"sourceRoot":""}